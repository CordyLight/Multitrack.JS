var MultitrackJS=function(t){var e={};function i(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){const a=i(6).default;t.exports=a},function(t,e,i){var a=i(2),n=i(3);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var s={insert:"head",singleton:!1};a(n,s);t.exports=n.locals||{}},function(t,e,i){"use strict";var a,n=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},s=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),r=[];function o(t){for(var e=-1,i=0;i<r.length;i++)if(r[i].identifier===t){e=i;break}return e}function l(t,e){for(var i={},a=[],n=0;n<t.length;n++){var s=t[n],l=e.base?s[0]+e.base:s[0],c=i[l]||0,h="".concat(l," ").concat(c);i[l]=c+1;var d=o(h),p={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(r[d].references++,r[d].updater(p)):r.push({identifier:h,updater:v(p,e),references:1}),a.push(h)}return a}function c(t){var e=document.createElement("style"),a=t.attributes||{};if(void 0===a.nonce){var n=i.nc;n&&(a.nonce=n)}if(Object.keys(a).forEach((function(t){e.setAttribute(t,a[t])})),"function"==typeof t.insert)t.insert(e);else{var r=s(t.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(e)}return e}var h,d=(h=[],function(t,e){return h[t]=e,h.filter(Boolean).join("\n")});function p(t,e,i,a){var n=i?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(t.styleSheet)t.styleSheet.cssText=d(e,n);else{var s=document.createTextNode(n),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(s,r[e]):t.appendChild(s)}}function u(t,e,i){var a=i.css,n=i.media,s=i.sourceMap;if(n?t.setAttribute("media",n):t.removeAttribute("media"),s&&btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}var m=null,f=0;function v(t,e){var i,a,n;if(e.singleton){var s=f++;i=m||(m=c(e)),a=p.bind(null,i,s,!1),n=p.bind(null,i,s,!0)}else i=c(e),a=u.bind(null,i,e),n=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return a(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;a(t=e)}else n()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=n());var i=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var a=0;a<i.length;a++){var n=o(i[a]);r[n].references--}for(var s=l(t,e),c=0;c<i.length;c++){var h=o(i[c]);0===r[h].references&&(r[h].updater(),r.splice(h,1))}i=s}}}},function(t,e,i){(e=i(4)(!1)).push([t.i,"*[application-name=multitrack-js]{width:640px;height:360px;font-family:-apple-system,BlinkMacSystemFont,Roboto,Open Sans,Helvetica Neue,\"Noto Sans Armenian\",\"Noto Sans Bengali\",\"Noto Sans Cherokee\",\"Noto Sans Devanagari\",\"Noto Sans Ethiopic\",\"Noto Sans Georgian\",\"Noto Sans Hebrew\",\"Noto Sans Kannada\",\"Noto Sans Khmer\",\"Noto Sans Lao\",\"Noto Sans Osmanya\",\"Noto Sans Tamil\",\"Noto Sans Telugu\",\"Noto Sans Thai\",sans-serif;font-size:1rem;position:relative;background:#000;color:#fff;user-select:none;-moz-user-select:none;-webkit-user-select:none}*[application-name=multitrack-js] video,*[application-name=multitrack-js] #subtitles{position:absolute;top:0;left:0;width:100%;height:100%}*[application-name=multitrack-js] div[name=settings]{display:none;font-size:.75em;position:absolute;bottom:64px;right:8px;max-width:300px;width:100%;max-height:calc(100% - 128px);background-color:rgba(0,0,0,.75);overflow:hidden}*[application-name=multitrack-js] div[name=settings] div[name=settingsHeader]{display:flex;background:#fff;color:#000;padding:0px 12px;width:100%;line-height:32px;height:32px;overflow:hidden;box-sizing:border-box}*[application-name=multitrack-js] div[name=settings] div[name=settingsBody]>div{padding:8px 0px}*[application-name=multitrack-js] div[name=settings] div[name=settingsBody] *[name=listEl]{display:block;height:32px;width:100%;box-sizing:border-box;display:flex;padding:0px 12px;line-height:32px;color:#fff;text-decoration:none;cursor:pointer;transition:.3s background;overflow:hidden;word-break:break-all}*[application-name=multitrack-js] div[name=settings] div[name=settingsBody] *[name=listEl]:hover{background-color:rgba(255,255,255,.25)}*[application-name=multitrack-js] div[name=settings] div[name=settingsBody] *[name=listEl][selected=true]{background-color:rgba(255,255,255,.5)}*[application-name=multitrack-js] div[name=settings] div[name=settingsBody] div[blockname=info]{padding:12px}*[application-name=multitrack-js] div[name=overlay]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to top, rgba(0, 0, 0, 0.75) 0px, rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.375), rgba(0, 0, 0, 0.15), rgba(0, 0, 0, 0) 96px),linear-gradient(to bottom, rgba(0, 0, 0, 0.75) 0px, rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.375), rgba(0, 0, 0, 0.15), rgba(0, 0, 0, 0) 96px);transition:.3s opacity,.3s visibility}*[application-name=multitrack-js] div[name=overlay] div[name=progress-all]{position:absolute;left:0;bottom:38px;width:-webkit-fill-available;width:-moz-available;width:fill-available;height:16px;margin:0px 8px;box-sizing:border-box;cursor:pointer}*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] div[name=timeline-popup]{position:absolute;bottom:16px;padding:2px;border-radius:2px;background-color:rgba(0,0,0,.5)}*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] div[name=timeline-popup] div[name=timeline-popup-image]{width:128px;height:72px}*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] div[name=timeline-popup] div[name=timeline-popup-time]{width:max-content;font-size:12px;margin:0 auto;padding:4px}*[application-name=multitrack-js] div[name=overlay] div[name=progress-all]:hover div[name=progress-played]::before{display:block;content:\" \";width:12px;height:12px;border-radius:50%;position:absolute;top:50%;right:0;transform:translateX(50%) translateY(-50%);background-color:#fff}*[application-name=multitrack-js] div[name=overlay] div[name=progress-all]:hover div[name=progress-line],*[application-name=multitrack-js] div[name=overlay] div[name=progress-all]:hover canvas[name=progress-loaded],*[application-name=multitrack-js] div[name=overlay] div[name=progress-all]:hover div[name=progress-played]{height:6px}*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] div[name=progress-line],*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] canvas[name=progress-loaded],*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] div[name=progress-played]{position:absolute;transform:translateY(-50%);top:50%;left:0;height:4px;width:100%}*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] div[name=progress-played]{width:0%}*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] div[name=progress-line]{background-color:rgba(255,255,255,.25)}*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] canvas[name=progress-loaded]{opacity:.5}*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] div[name=progress-played]{background-color:#fff}*[application-name=multitrack-js] div[name=overlay] div[name=volumebar-all]{position:relative;width:60px;height:100%;margin:0 4px;box-sizing:border-box;cursor:pointer}*[application-name=multitrack-js] div[name=overlay] div[name=volumebar-all] div[name=volumebar-line],*[application-name=multitrack-js] div[name=overlay] div[name=volumebar-all] div[name=volumebar-selected]{position:absolute;transform:translateY(-50%);top:50%;left:0;height:4px;width:100%}*[application-name=multitrack-js] div[name=overlay] div[name=volumebar-all] div[name=volumebar-line]{background-color:rgba(255,255,255,.25)}*[application-name=multitrack-js] div[name=overlay] div[name=volumebar-all] div[name=volumebar-selected]{background-color:#fff}*[application-name=multitrack-js] div[name=overlay] div[name=volumebar-all] div[name=volumebar-selected]::before{display:block;content:\" \";width:12px;height:12px;border-radius:50%;position:absolute;top:50%;right:0;transform:translateX(50%) translateY(-50%);background-color:#fff}*[application-name=multitrack-js] div[name=overlay] div[name=overlay-top],*[application-name=multitrack-js] div[name=overlay] div[name=overlay-bottom]{display:flex;position:absolute;left:0;width:100%;height:44px;padding:4px;box-sizing:border-box}*[application-name=multitrack-js] div[name=overlay] div[name=overlay-top]{top:0}*[application-name=multitrack-js] div[name=overlay] div[name=overlay-bottom]{bottom:0}*[application-name=multitrack-js] div[name=overlay] div[name=title]{flex:auto;line-height:36px;padding:0 8px;box-sizing:border-box}*[application-name=multitrack-js] div[name=overlay] div[name=time]{padding:0px 8px;line-height:36px;font-size:12px}*[application-name=multitrack-js] button{display:block;border:none;margin:none;padding:6px;width:24px;height:24px;box-sizing:content-box;background-color:transparent;background-position:50%;background-repeat:no-repeat;cursor:pointer}*[application-name=multitrack-js] button[hidden]{display:none}*[application-name=multitrack-js] button[name=playBtn]{padding:6px 11px;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='M8 5v14l11-7z' fill='white'/%3E%3C/svg%3E\")}*[application-name=multitrack-js] button[name=pauseBtn]{padding:6px 11px;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='M6 19h4V5H6v14zm8-14v14h4V5h-4z' fill='white'/%3E%3C/svg%3E\")}*[application-name=multitrack-js] button[name=backward10]{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' enable-background='new 0 0 24 24' height='24' viewBox='0 0 24 24' width='24'%3E%3Cg%3E%3Cg%3E%3Cpath d='M11.99,5V1l-5,5l5,5V7c3.31,0,6,2.69,6,6s-2.69,6-6,6s-6-2.69-6-6h-2c0,4.42,3.58,8,8,8s8-3.58,8-8S16.41,5,11.99,5z' fill='white'/%3E%3Cg%3E%3Cpath d='M10.89,16h-0.85v-3.26l-1.01,0.31v-0.69l1.77-0.63h0.09V16z' fill='white'/%3E%3Cpath d='M15.17,14.24c0,0.32-0.03,0.6-0.1,0.82s-0.17,0.42-0.29,0.57s-0.28,0.26-0.45,0.33s-0.37,0.1-0.59,0.1 s-0.41-0.03-0.59-0.1s-0.33-0.18-0.46-0.33s-0.23-0.34-0.3-0.57s-0.11-0.5-0.11-0.82V13.5c0-0.32,0.03-0.6,0.1-0.82 s0.17-0.42,0.29-0.57s0.28-0.26,0.45-0.33s0.37-0.1,0.59-0.1s0.41,0.03,0.59,0.1c0.18,0.07,0.33,0.18,0.46,0.33 s0.23,0.34,0.3,0.57s0.11,0.5,0.11,0.82V14.24z M14.32,13.38c0-0.19-0.01-0.35-0.04-0.48s-0.07-0.23-0.12-0.31 s-0.11-0.14-0.19-0.17s-0.16-0.05-0.25-0.05s-0.18,0.02-0.25,0.05s-0.14,0.09-0.19,0.17s-0.09,0.18-0.12,0.31 s-0.04,0.29-0.04,0.48v0.97c0,0.19,0.01,0.35,0.04,0.48s0.07,0.24,0.12,0.32s0.11,0.14,0.19,0.17s0.16,0.05,0.25,0.05 s0.18-0.02,0.25-0.05s0.14-0.09,0.19-0.17s0.09-0.19,0.11-0.32s0.04-0.29,0.04-0.48V13.38z' fill='white'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")}*[application-name=multitrack-js] button[name=forward10]{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' enable-background='new 0 0 24 24' height='24' viewBox='0 0 24 24' width='24'%3E%3Cg%3E%3Cg%3E%3Cpath fill='white' d='M18,13c0,3.31-2.69,6-6,6s-6-2.69-6-6s2.69-6,6-6v4l5-5l-5-5v4c-4.42,0-8,3.58-8,8c0,4.42,3.58,8,8,8s8-3.58,8-8H18z'/%3E%3Cpolygon points='10.86,15.94 10.86,11.67 10.77,11.67 9,12.3 9,12.99 10.01,12.68 10.01,15.94' fill='white'/%3E%3Cpath d='M12.25,13.44v0.74c0,1.9,1.31,1.82,1.44,1.82c0.14,0,1.44,0.09,1.44-1.82v-0.74c0-1.9-1.31-1.82-1.44-1.82 C13.55,11.62,12.25,11.53,12.25,13.44z M14.29,13.32v0.97c0,0.77-0.21,1.03-0.59,1.03c-0.38,0-0.6-0.26-0.6-1.03v-0.97 c0-0.75,0.22-1.01,0.59-1.01C14.07,12.3,14.29,12.57,14.29,13.32z' fill='white'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")}*[application-name=multitrack-js] button[name=fullscreenOn]{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z' fill='white'/%3E%3C/svg%3E\")}*[application-name=multitrack-js] button[name=fullscreenOff]{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z' fill='white'/%3E%3C/svg%3E\")}*[application-name=multitrack-js] button[name=pipOn]{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='M19 7h-8v6h8V7zm2-4H3c-1.1 0-2 .9-2 2v14c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98V5c0-1.1-.9-2-2-2zm0 16.01H3V4.98h18v14.03z' fill='white'/%3E%3C/svg%3E\")}*[application-name=multitrack-js] button[name=pipOff]{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z' fill='white'/%3E%3C/svg%3E\")}*[application-name=multitrack-js] button[name=volume][icon=\"0\"]{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z' fill='white'/%3E%3C/svg%3E\")}*[application-name=multitrack-js] button[name=volume][icon=\"1\"]{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='m 3,9 v 6 h 4 l 5,5 V 4 L 7,9 Z' fill='white'/%3E%3C/svg%3E\")}*[application-name=multitrack-js] button[name=volume][icon=\"2\"]{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='m 3,9 v 6 h 4 l 5,5 V 4 L 7,9 Z m 13.5,3 C 16.5,10.23 15.48,8.71 14,7.97 v 8.05 c 1.48,-0.73 2.5,-2.25 2.5,-4.02 z' fill='white'/%3E%3C/svg%3E\")}*[application-name=multitrack-js] button[name=volume][icon=\"3\"]{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z' fill='white'/%3E%3C/svg%3E\")}*[application-name=multitrack-js] button[name=menu]{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' enable-background='new 0 0 24 24' height='24' viewBox='0 0 24 24' width='24'%3E%3Cg%3E%3Cpath d='M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z' fill='white'/%3E%3C/g%3E%3C/svg%3E\")}",""]),t.exports=e},function(t,e,i){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=function(t,e){var i=t[1]||"",a=t[3];if(!a)return i;if(e&&"function"==typeof btoa){var n=(r=a,o=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(l," */")),s=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(t," */")}));return[i].concat(s).concat([n]).join("\n")}var r,o,l;return[i].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,a){"string"==typeof t&&(t=[[null,t,""]]);var n={};if(a)for(var s=0;s<this.length;s++){var r=this[s][0];null!=r&&(n[r]=!0)}for(var o=0;o<t.length;o++){var l=[].concat(t[o]);a&&n[l[0]]||(i&&(l[2]?l[2]="".concat(i," and ").concat(l[2]):l[2]=i),e.push(l))}},e}},function(t,e,i){"use strict";function a(t){var e=t.toLowerCase().trim().split(/\s*;\s*/);return"banner"===e[0]?{name:e[0],delay:1*e[1]||0,leftToRight:1*e[2]||0,fadeAwayWidth:1*e[3]||0}:/^scroll\s/.test(e[0])?{name:e[0],y1:Math.min(1*e[1],1*e[2]),y2:Math.max(1*e[1],1*e[2]),delay:1*e[3]||0,fadeAwayHeight:1*e[4]||0}:null}function n(t){return t.toLowerCase().replace(/([+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?)/g," $1 ").replace(/([mnlbspc])/g," $1 ").trim().replace(/\s+/g," ").split(/\s(?=[mnlbspc])/).map((function(t){return t.split(" ").filter((function(t,e){return!(e&&Number.isNaN(1*t))}))}))}i.r(e);var s=["b","i","u","s","fsp","k","K","kf","ko","kt","fe","q","p","pbo","a","an","fscx","fscy","fax","fay","frx","fry","frz","fr","be","blur","bord","xbord","ybord","shad","xshad","yshad"].map((function(t){return{name:t,regex:new RegExp("^"+t+"-?\\d")}}));function r(t){for(var e,i={},a=0;a<s.length;a++){var o=s[a],l=o.name;if(o.regex.test(t))return i[l]=1*t.slice(l.length),i}if(/^fn/.test(t))i.fn=t.slice(2);else if(/^r/.test(t))i.r=t.slice(1);else if(/^fs[\d+-]/.test(t))i.fs=t.slice(2);else if(/^\d?c&?H?[0-9a-f]+|^\d?c$/i.test(t)){var c=t.match(/^(\d?)c&?H?(\w*)/),h=c[1],d=c[2];i["c"+(h||1)]=d&&("000000"+d).slice(-6)}else if(/^\da&?H?[0-9a-f]+/i.test(t)){var p=t.match(/^(\d)a&?H?(\w\w)/),u=p[1],m=p[2];i["a"+u]=m}else if(/^alpha&?H?[0-9a-f]+/i.test(t))e=t.match(/^alpha&?H?([0-9a-f]+)/i),i.alpha=e[1],i.alpha=("00"+i.alpha).slice(-2);else if(/^(?:pos|org|move|fad|fade)\(/.test(t)){var f=t.match(/^(\w+)\((.*?)\)?$/),v=f[1],g=f[2];i[v]=g.trim().split(/\s*,\s*/).map(Number)}else if(/^i?clip/.test(t)){var b=t.match(/^i?clip\((.*?)\)?$/)[1].trim().split(/\s*,\s*/);i.clip={inverse:/iclip/.test(t),scale:1,drawing:null,dots:null},1===b.length&&(i.clip.drawing=n(b[0])),2===b.length&&(i.clip.scale=1*b[0],i.clip.drawing=n(b[1])),4===b.length&&(i.clip.dots=b.map(Number))}else if(/^t\(/.test(t)){var y=t.match(/^t\((.*?)\)?$/)[1].trim().replace(/\\.*/,(function(t){return t.replace(/,/g,"\n")})).split(/\s*,\s*/);if(!y[0])return i;i.t={t1:0,t2:0,accel:1,tags:y[y.length-1].replace(/\n/g,",").split("\\").slice(1).map(r)},2===y.length&&(i.t.accel=1*y[0]),3===y.length&&(i.t.t1=1*y[0],i.t.t2=1*y[1]),4===y.length&&(i.t.t1=1*y[0],i.t.t2=1*y[1],i.t.accel=1*y[2])}return i}function o(t){for(var e=[],i=0,a="",n=0;n<t.length;n++){var s=t[n];"("===s&&i++,")"===s&&i--,i<0&&(i=0),i||"\\"!==s?a+=s:(a&&e.push(a),a="")}return e.push(a),e.map(r)}function l(t){var e=t.split(/{([^{}]*?)}/),i=[];e[0].length&&i.push({tags:[],text:e[0],drawing:[]});for(var a=1;a<e.length;a+=2){var s=o(e[a]),r=s.reduce((function(t,e){return void 0===e.p?t:!!e.p}),!1);i.push({tags:s,text:r?"":e[a+1],drawing:r?n(e[a+1]):[]})}return{raw:t,combined:i.map((function(t){return t.text})).join(""),parsed:i}}function c(t,e){var i=t.split(",");if(i.length>e.length){var n=i.slice(e.length-1).join();(i=i.slice(0,e.length-1)).push(n)}for(var s,r={},o=0;o<i.length;o++){var c=e[o],h=i[o].trim();switch(c){case"Layer":case"MarginL":case"MarginR":case"MarginV":r[c]=1*h;break;case"Start":case"End":r[c]=(s=void 0,3600*(s=h.split(":"))[0]+60*s[1]+1*s[2]);break;case"Effect":r[c]=a(h);break;case"Text":r[c]=l(h);break;default:r[c]=h}}return r}function h(t){return t.match(/Format\s*:\s*(.*)/i)[1].split(/\s*,\s*/)}function d(t){return t.match(/Style\s*:\s*(.*)/i)[1].split(/\s*,\s*/)}var p=Object.assign||function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var a=0;a<e.length;a++)if(e[a])for(var n=Object.keys(e[a]),s=0;s<n.length;s++)t[n[s]]=e[a][n[s]];return t};function u(t){var e={type:null,prev:null,next:null,points:[]};/[mnlbs]/.test(t[0])&&(e.type=t[0].toUpperCase().replace("N","L").replace("B","C"));for(var i=t.length-!(1&t.length),a=1;a<i;a+=2)e.points.push({x:1*t[a],y:1*t[a+1]});return e}function m(t){return!(!t.points.length||!t.type)&&!(/C|S/.test(t.type)&&t.points.length<3)}function f(t){return t.map((function(t){return t.type+t.points.map((function(t){return t.x+","+t.y})).join(",")})).join("")}function v(t){for(var e,i=[],a=0;a<t.length;){var n=t[a],s=u(n);if(m(s)){if("S"===s.type){var r=(i[a-1]||{points:[{x:0,y:0}]}).points.slice(-1)[0],o=r.x,l=r.y;s.points.unshift({x:o,y:l})}a&&(s.prev=i[a-1].type,i[a-1].next=s.type),i.push(s),a++}else{if(a&&"S"===i[a-1].type){var c={p:s.points,c:i[a-1].points.slice(0,3)};i[a-1].points=i[a-1].points.concat((c[n[0]]||[]).map((function(t){return{x:t.x,y:t.y}})))}t.splice(a,1)}}var h=(e=[]).concat.apply(e,i.map((function(t){var e=t.type,i=t.points,a=t.prev,n=t.next;return"S"===e?function(t,e,i){var a=[],n=[0,2/3,1/3,0],s=[0,1/3,2/3,0],r=[0,1/6,2/3,1/6],o=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},l=[t[t.length-1].x,t[0].x,t[1].x,t[2].x],c=[t[t.length-1].y,t[0].y,t[1].y,t[2].y];a.push({type:"M"===e?"M":"L",points:[{x:o(r,l),y:o(r,c)}]});for(var h=3;h<t.length;h++)l=[t[h-3].x,t[h-2].x,t[h-1].x,t[h].x],c=[t[h-3].y,t[h-2].y,t[h-1].y,t[h].y],a.push({type:"C",points:[{x:o(n,l),y:o(n,c)},{x:o(s,l),y:o(s,c)},{x:o(r,l),y:o(r,c)}]});if("L"===i||"C"===i){var d=t[t.length-1];a.push({type:"L",points:[{x:d.x,y:d.y}]})}return a}(i,a,n):{type:e,points:i}})));return p({instructions:h,d:f(h)},function(t){var e,i=1/0,a=1/0,n=-1/0,s=-1/0;return(e=[]).concat.apply(e,t.map((function(t){return t.points}))).forEach((function(t){var e=t.x,r=t.y;i=Math.min(i,e),a=Math.min(a,r),n=Math.max(n,e),s=Math.max(s,r)})),{minX:i,minY:a,width:n-i,height:s-a}}(i))}var g=["fs","clip","c1","c2","c3","c4","a1","a2","a3","a4","alpha","fscx","fscy","fax","fay","frx","fry","frz","fr","be","blur","bord","xbord","ybord","shad","xshad","yshad"];function b(t,e,i){var a,n,s;void 0===i&&(i={});var r=t[e];if(void 0===r)return null;if("pos"===e||"org"===e)return 2===r.length?((a={})[e]={x:r[0],y:r[1]},a):null;if("move"===e){var o=r[0],l=r[1],c=r[2],h=r[3],d=r[4];void 0===d&&(d=0);var u=r[5];return void 0===u&&(u=0),4===r.length||6===r.length?{move:{x1:o,y1:l,x2:c,y2:h,t1:d,t2:u}}:null}if("fad"===e||"fade"===e)return 2===r.length?{fade:{type:"fad",t1:r[0],t2:r[1]}}:7===r.length?{fade:{type:"fade",a1:r[0],a2:r[1],a3:r[2],t1:r[3],t2:r[4],t3:r[5],t4:r[6]}}:null;if("clip"===e){var m=r.inverse,f=r.scale,y=r.drawing,x=r.dots;return y?{clip:{inverse:m,scale:f,drawing:v(y),dots:x}}:x?{clip:{inverse:m,scale:f,drawing:y,dots:{x1:x[0],y1:x[1],x2:x[2],y2:x[3]}}}:null}if(/^[xy]?(bord|shad)$/.test(e)&&(r=Math.max(r,0)),"bord"===e)return{xbord:r,ybord:r};if("shad"===e)return{xshad:r,yshad:r};if(/^c\d$/.test(e))return(n={})[e]=r||i[e],n;if("alpha"===e)return{a1:r,a2:r,a3:r,a4:r};if("fr"===e)return{frz:r};if("fs"===e)return{fs:/^\+|-/.test(r)?(1*r>-10?1+r/10:1)*i.fs:1*r};if("t"===e){var _=r.t1,w=r.accel,k=r.tags,C=r.t2||1e3*(i.end-i.start),S={};return k.forEach((function(t){var e=Object.keys(t)[0];~g.indexOf(e)&&("clip"!==e||t[e].dots)&&p(S,b(t,e,i))})),{t:{t1:_,t2:C,accel:w,tag:S}}}return(s={})[e]=r,s}var y=[null,1,2,3,null,7,8,9,null,4,5,6],x=["r","a","an","pos","org","move","fade","fad","clip"];function _(t,e){return{name:t,borderStyle:e[t].style.BorderStyle,tag:e[t].tag,fragments:[]}}function w(t){for(var e,i,a,n,s,r,o=t.styles,l=t.name,c=t.parsed,h=t.start,d=t.end,u=[],m=_(l,o),f={},g=0;g<c.length;g++){for(var w=c[g],k=w.tags,C=w.text,S=w.drawing,E=void 0,T=0;T<k.length;T++){var j=k[T];E=void 0===j.r?E:j.r}for(var A={tag:void 0===E?JSON.parse(JSON.stringify(f)):{},text:C,drawing:S.length?v(S):null},M=0;M<k.length;M++){var z=k[M];e=e||y[z.a||0]||z.an,i=i||b(z,"pos"),a=a||b(z,"org"),n=n||b(z,"move"),s=s||b(z,"fade")||b(z,"fad"),r=b(z,"clip")||r;var N=Object.keys(z)[0];if(N&&!~x.indexOf(N)){var $=m.tag,L=b(z,N,{start:h,end:d,c1:$.c1,c2:$.c2,c3:$.c3,c4:$.c4,fs:f.fs||m.tag.fs});"t"===N?(A.tag.t=A.tag.t||[],A.tag.t.push(L.t)):p(A.tag,L)}}if(f=A.tag,void 0!==E&&(u.push(m),m=_(o[E]?E:l,o)),A.text||A.drawing){var F=m.fragments[m.fragments.length-1]||{};F.text&&A.text&&!Object.keys(A.tag).length?F.text+=A.text:m.fragments.push(A)}}return u.push(m),p({alignment:e,slices:u},i,a,n,s,r)}function k(t){for(var e=t.styles,i=t.dialogues,a=1/0,n=[],s=0;s<i.length;s++){var r=i[s];if(!(r.Start>=r.End)){e[r.Style]||(r.Style="Default");var o=e[r.Style].style,l=w({styles:e,name:r.Style,parsed:r.Text.parsed,start:r.Start,end:r.End}),c=l.alignment||o.Alignment;a=Math.min(a,r.Layer),n.push(p({layer:r.Layer,start:r.Start,end:r.End,margin:{left:r.MarginL||o.MarginL,right:r.MarginR||o.MarginR,vertical:r.MarginV||o.MarginV},effect:r.Effect},l,{alignment:c}))}}for(var h=0;h<n.length;h++)n[h].layer-=a;return n.sort((function(t,e){return t.start-e.start||t.end-e.end}))}var C={Name:"Default",Fontname:"Arial",Fontsize:"20",PrimaryColour:"&H00FFFFFF&",SecondaryColour:"&H000000FF&",OutlineColour:"&H00000000&",BackColour:"&H00000000&",Bold:"0",Italic:"0",Underline:"0",StrikeOut:"0",ScaleX:"100",ScaleY:"100",Spacing:"0",Angle:"0",BorderStyle:"1",Outline:"2",Shadow:"2",Alignment:"2",MarginL:"10",MarginR:"10",MarginV:"10",Encoding:"1"};function S(t){if(/^(&|H|&H)[0-9a-f]{6,}/i.test(t)){var e=t.match(/&?H?([0-9a-f]{2})?([0-9a-f]{6})/i);return[e[1]||"00",e[2]]}var i=parseInt(t,10);if(!Number.isNaN(i)){if(i<-2147483648)return["00","000000"];var a=-2147483648<=i&&i<=2147483647?("00000000"+(i<0?i+4294967296:i).toString(16)).slice(-8):String(i).slice(0,8);return[a.slice(0,2),a.slice(2)]}return["00","000000"]}function E(t,e){void 0===e&&(e={});var i=function(t){for(var e={info:{},styles:{format:[],style:[]},events:{format:[],comment:[],dialogue:[]}},i=t.split(/\r?\n/),a=0,n=0;n<i.length;n++){var s=i[n].trim();if(!/^;/.test(s)&&(/^\[Script Info\]/i.test(s)?a=1:/^\[V4\+? Styles\]/i.test(s)?a=2:/^\[Events\]/i.test(s)?a=3:/^\[.*\]/.test(s)&&(a=0),0!==a)){if(1===a&&/:/.test(s)){var r=s.match(/(.*?)\s*:\s*(.*)/),o=r[1],l=r[2];e.info[o]=l}if(2===a&&(/^Format\s*:/i.test(s)&&(e.styles.format=h(s)),/^Style\s*:/i.test(s)&&e.styles.style.push(d(s))),3===a&&(/^Format\s*:/i.test(s)&&(e.events.format=h(s)),/^(?:Comment|Dialogue)\s*:/i.test(s))){var p=s.match(/^(\w+?)\s*:\s*(.*)/i),u=p[1],m=p[2];e.events[u.toLowerCase()].push(c(m,e.events.format))}}}return e}(t),a=function(t){for(var e=t.info,i=t.style,a=t.format,n=t.defaultStyle,s={},r=[p({},C,n,{Name:"Default"})].concat(i.map((function(t){for(var e={},i=0;i<a.length;i++)e[a[i]]=t[i];return e}))),o=function(t){var i=r[t];/^(\*+)Default$/.test(i.Name)&&(i.Name="Default"),Object.keys(i).forEach((function(t){"Name"===t||"Fontname"===t||/Colour/.test(t)||(i[t]*=1)}));var a=S(i.PrimaryColour),n=a[0],o=a[1],l=S(i.SecondaryColour),c=l[0],h=l[1],d=S(i.OutlineColour),p=d[0],u=d[1],m=S(i.BackColour),f=m[0],v=m[1],g={fn:i.Fontname,fs:i.Fontsize,c1:o,a1:n,c2:h,a2:c,c3:u,a3:p,c4:v,a4:f,b:Math.abs(i.Bold),i:Math.abs(i.Italic),u:Math.abs(i.Underline),s:Math.abs(i.StrikeOut),fscx:i.ScaleX,fscy:i.ScaleY,fsp:i.Spacing,frz:i.Angle,xbord:i.Outline,ybord:i.Outline,xshad:i.Shadow,yshad:i.Shadow,q:/^[0-3]$/.test(e.WrapStyle)?1*e.WrapStyle:2};s[i.Name]={style:i,tag:g}},l=0;l<r.length;l++)o(l);return s}({info:i.info,style:i.styles.style,format:i.styles.format,defaultStyle:e.defaultStyle||{}});return{info:i.info,width:1*i.info.PlayResX||null,height:1*i.info.PlayResY||null,collisions:i.info.Collisions||"Normal",styles:a,dialogues:k({styles:a,dialogues:i.events.dialogue})}}var T=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,50/3)},j=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||clearTimeout;function A(t){var e=t.match(/(\w\w)(\w\w)(\w\w)(\w\w)/),i=1-("0x"+e[1])/255,a=+("0x"+e[2]),n=+("0x"+e[3]);return"rgba("+ +("0x"+e[4])+","+n+","+a+","+i+")"}function M(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function z(t,e){void 0===e&&(e=[]);for(var i=document.createElementNS("http://www.w3.org/2000/svg",t),a=0;a<e.length;a++){var n=e[a];i.setAttributeNS("xlink:href"===n[0]?"http://www.w3.org/1999/xlink":null,n[0],n[1])}return i}function N(t){var e=document.body.style,i=t.replace(/^\w/,(function(t){return t.toUpperCase()}));return t in e?"":"webkit"+i in e?"-webkit-":"moz"+i in e?"-moz-":""}var $={transform:N("transform"),animation:N("animation"),clipPath:N("clipPath")};function L(t){var e=t.getRootNode?t.getRootNode():document;return e===document?e.head:e}var F=["c3","a3","c4","a4","xbord","ybord","xshad","yshad","blur","be"],B=["fscx","fscy","frx","fry","frz","fax","fay"];function O(t){var e=this._.scriptRes.width,i=this._.scriptRes.height,a="";if(null!==t.dots){var n=t.dots,s=n.x1,r=n.y1,o=n.x2,l=n.y2;a="M"+(s/=e)+","+(r/=i)+"L"+s+","+(l/=i)+","+(o/=e)+","+l+","+o+","+r+"Z"}null!==t.drawing&&(a=t.drawing.instructions.map((function(t){return t.type+t.points.map((function(t){var a=t.x,n=t.y;return a/e+","+n/i})).join(",")})).join(""));var c=1/(1<<t.scale-1);t.inverse&&(a+="M0,0L0,"+c+","+c+","+c+","+c+",0,0,0Z");var h="ASS-"+M(),d=z("clipPath",[["id",h],["clipPathUnits","objectBoundingBox"]]);return d.appendChild(z("path",[["d",a],["transform","scale("+c+")"],["clip-rule","evenodd"]])),this._.$defs.appendChild(d),{$clipPath:d,cssText:$.clipPath+"clip-path:url(#"+h+");"}}function R(t){if(t.clip){var e=document.createElement("div");this._.$stage.insertBefore(e,t.$div),e.appendChild(t.$div),e.className="ASS-fix-objectBoundingBox";var i=O.call(this,t.clip),a=i.cssText,n=i.$clipPath;this._.$defs.appendChild(n),e.style.cssText=a,p(t,{$div:e,$clipPath:n})}}var H=document.createElement("div");H.className="ASS-fix-font-size",H.textContent="M";var V=Object.create(null);function q(t,e){var i=t+"-"+e;return V[i]||(H.style.cssText="line-height:normal;font-size:"+e+'px;font-family:"'+t+'",Arial;',V[i]=e*e/H.clientHeight),V[i]}function D(t,e){var i=[],a=A(t.a3+t.c3),n=t.xbord*e,s=t.ybord*e,r=A(t.a4+t.c4),o=t.xshad*e,l=t.yshad*e,c=t.blur||t.be||0;if(!(n+s+o+l))return"none";if(n||s)for(var h=-1;h<=1;h++)for(var d=-1;d<=1;d++){for(var p=1;p<n;p++)for(var u=1;u<s;u++)(h||d)&&i.push(a+" "+h*p+"px "+d*u+"px "+c+"px");i.push(a+" "+h*n+"px "+d*s+"px "+c+"px")}if(o||l){var m=o>0?1:-1,f=l>0?1:-1;o=Math.abs(o),l=Math.abs(l);for(var v=Math.max(n,o-n);v<o+n;v++)for(var g=Math.max(s,l-s);g<l+s;g++)i.push(r+" "+v*m+"px "+g*f+"px "+c+"px");i.push(r+" "+(o+n)*m+"px "+(l+s)*f+"px "+c+"px")}return i.join()}function P(t){return["perspective(314px)","rotateY("+(t.fry||0)+"deg)","rotateX("+(t.frx||0)+"deg)","rotateZ("+(-t.frz||0)+"deg)","scale("+(t.p?1:(t.fscx||100)/100)+","+(t.p?1:(t.fscy||100)/100)+")","skew("+(t.fax||0)+"rad,"+(t.fay||0)+"rad)"].join(" ")}function W(t,e){return"@"+$.animation+"keyframes "+t+" {"+e+"}\n"}var I=function(){this.obj={}};function U(){var t=this,e="";return this.dialogues.forEach((function(i){var a=i.start,n=i.end,s=i.effect,r=i.move,o=i.fade,l=i.slices,c=1e3*(n-a),h=new I;if(s&&!r){var d=s.name,u=s.delay,m=s.lefttoright,f=s.y1,v=s.y2||t._.resampledRes.height;if("banner"===d){var g=t.scale*(c/u)*(m?1:-1);h.set("0.000%","transform","translateX(0)"),h.set("100.000%","transform","translateX("+g+"px)")}if(/^scroll/.test(d)){var b=/up/.test(d)?-1:1,y="translateY("+t.scale*f*b+"px)",x="translateY("+t.scale*v*b+"px)",_=(v-f)/(c/u)*100;h.set("0.000%","transform",y),_<100&&h.set(_.toFixed(3)+"%","transform",x),h.set("100.000%","transform",x)}}if(r){var w=r.x1,k=r.y1,C=r.x2,S=r.y2,E=r.t1,T=r.t2||c,j=i.pos||{x:0,y:0},z=[{x:w,y:k},{x:C,y:S}].map((function(e){var i=e.x,a=e.y;return"translate("+t.scale*(i-j.x)+"px, "+t.scale*(a-j.y)+"px)"}));h.setT({t1:E,t2:T,duration:c,prop:"transform",from:z[0],to:z[1]})}if(o)if("fad"===o.type){var N=o.t1,$=o.t2;h.set("0.000%","opacity",0),N<c?(h.set((N/c*100).toFixed(3)+"%","opacity",1),N+$<c&&h.set(((c-$)/c*100).toFixed(3)+"%","opacity",1),h.set("100.000%","opacity",0)):h.set("100.000%","opacity",c/N)}else{var L=o.a1,O=o.a2,R=o.a3,H=o.t1,V=o.t2,U=o.t3,Y=o.t4,X=[H,V,U,Y].map((function(t){return(t/c*100).toFixed(3)+"%"})),G=[L,O,R].map((function(t){return 1-t/255}));h.set("0.000%","opacity",G[0]),H<c&&h.set(X[0],"opacity",G[0]),V<c&&h.set(X[1],"opacity",G[1]),U<c&&h.set(X[2],"opacity",G[1]),Y<c&&h.set(X[3],"opacity",G[2]),h.set("100.000%","opacity",G[2])}var J=h.toString();J&&(p(i,{animationName:"ASS-"+M()}),e+=W(i.animationName,J)),l.forEach((function(i){i.fragments.forEach((function(a){if(a.tag.t&&a.tag.t.length){var n,s=new I,r=p({},i.tag,a.tag);(n=a.tag.t,n.reduceRight((function(t,e){var i=!1;return t.map((function(t){return i=e.t1===t.t1&&e.t2===t.t2&&e.accel===t.accel,p({},t,i?{tag:p({},t.tag,e.tag)}:{})})).concat(i?[]:e)}),[])).forEach((function(e){var n=e.t1,o=e.t2,l=e.tag;if(l.fs){var h=t.scale*q(r.fn,r.fs)+"px",d=t.scale*q(l.fn,r.fs)+"px";s.setT({t1:n,t2:o,duration:c,prop:"font-size",from:h,to:d})}if(l.fsp){var u=t.scale*r.fsp+"px",m=t.scale*l.fsp+"px";s.setT({t1:n,t2:o,duration:c,prop:"letter-spacing",from:u,to:m})}var f=void 0!==l.a1&&l.a1===l.a2&&l.a2===l.a3&&l.a3===l.a4;if(l.c1||l.a1&&!f){var v=A(r.a1+r.c1),g=A((l.a1||r.a1)+(l.c1||r.c1));s.setT({t1:n,t2:o,duration:c,prop:"color",from:v,to:g})}if(f){var b=1-parseInt(r.a1,16)/255,y=1-parseInt(l.a1,16)/255;s.setT({t1:n,t2:o,duration:c,prop:"opacity",from:b,to:y})}if(F.some((function(t){return void 0!==l[t]&&l[t]!==(a.tag[t]||i.tag[t])}))){var x=/Yes/i.test(t.info.ScaledBorderAndShadow)?t.scale:1,_=D(r,x),w=D(p({},r,l),x);s.setT({t1:n,t2:o,duration:c,prop:"text-shadow",from:_,to:w})}if(B.some((function(t){return void 0!==l[t]&&l[t]!==(a.tag[t]||i.tag[t])}))){var k=p({},r,l);a.drawing&&(p(k,{p:0,fscx:(l.fscx||r.fscx)/r.fscx*100,fscy:(l.fscy||r.fscy)/r.fscy*100}),p(r,{fscx:100,fscy:100}));var C=P(r),S=P(k);s.setT({t1:n,t2:o,duration:c,prop:"transform",from:C,to:S})}}));var o=s.toString();p(a,{animationName:"ASS-"+M()}),e+=W(a.animationName,o)}}))}))})),e}function Y(t,e,i){var a=$.animation;return a+"animation-name:"+t+";"+a+"animation-duration:"+e+"s;"+a+"animation-delay:"+i+"s;"+a+"animation-timing-function:linear;"+a+"animation-iteration-count:1;"+a+"animation-fill-mode:forwards;"}function X(t,e){var i=p({},e,t.tag),a=t.drawing,n=a.minX,s=a.minY,r=a.width,o=a.height,l=this.scale/(1<<i.p-1),c=(i.fscx?i.fscx/100:1)*l,h=(i.fscy?i.fscy/100:1)*l,d=i.blur||i.be||0,u=i.xbord+(i.xshad<0?-i.xshad:0)+d,m=i.ybord+(i.yshad<0?-i.yshad:0)+d,f=r*c+2*i.xbord+Math.abs(i.xshad)+2*d,v=o*h+2*i.ybord+Math.abs(i.yshad)+2*d,g=z("svg",[["width",f],["height",v],["viewBox",-u+" "+-m+" "+f+" "+v]]),b=/Yes/i.test(this.info.ScaledBorderAndShadow)?this.scale:1,y="ASS-"+M(),x=z("defs");x.appendChild(function(t,e,i){var a=t.xbord||t.ybord,n=t.xshad||t.yshad,s="FF"!==t.a1,r=t.blur||t.be||0,o=z("filter",[["id",e]]);o.appendChild(z("feGaussianBlur",[["stdDeviation",a?0:r],["in","SourceGraphic"],["result","sg_b"]])),o.appendChild(z("feFlood",[["flood-color",A(t.a1+t.c1)],["result","c1"]])),o.appendChild(z("feComposite",[["operator","in"],["in","c1"],["in2","sg_b"],["result","main"]])),a&&(o.appendChild(z("feMorphology",[["radius",t.xbord*i+" "+t.ybord*i],["operator","dilate"],["in","SourceGraphic"],["result","dil"]])),o.appendChild(z("feGaussianBlur",[["stdDeviation",r],["in","dil"],["result","dil_b"]])),o.appendChild(z("feComposite",[["operator","out"],["in","dil_b"],["in2","SourceGraphic"],["result","dil_b_o"]])),o.appendChild(z("feFlood",[["flood-color",A(t.a3+t.c3)],["result","c3"]])),o.appendChild(z("feComposite",[["operator","in"],["in","c3"],["in2","dil_b_o"],["result","border"]]))),n&&(a||s)&&(o.appendChild(z("feOffset",[["dx",t.xshad*i],["dy",t.yshad*i],["in",a?"dil":"SourceGraphic"],["result","off"]])),o.appendChild(z("feGaussianBlur",[["stdDeviation",r],["in","off"],["result","off_b"]])),s||(o.appendChild(z("feOffset",[["dx",t.xshad*i],["dy",t.yshad*i],["in","SourceGraphic"],["result","sg_off"]])),o.appendChild(z("feComposite",[["operator","out"],["in","off_b"],["in2","sg_off"],["result","off_b_o"]]))),o.appendChild(z("feFlood",[["flood-color",A(t.a4+t.c4)],["result","c4"]])),o.appendChild(z("feComposite",[["operator","in"],["in","c4"],["in2",s?"off_b":"off_b_o"],["result","shadow"]])));var l=z("feMerge",[]);return n&&(a||s)&&l.appendChild(z("feMergeNode",[["in","shadow"]])),a&&l.appendChild(z("feMergeNode",[["in","border"]])),l.appendChild(z("feMergeNode",[["in","main"]])),o.appendChild(l),o}(i,y,b)),g.appendChild(x);var _="ASS-"+M(),w=z("symbol",[["id",_],["viewBox",n+" "+s+" "+r+" "+o]]);return w.appendChild(z("path",[["d",t.drawing.d]])),g.appendChild(w),g.appendChild(z("use",[["width",r*c],["height",o*h],["xlink:href","#"+_],["filter","url(#"+y+")"]])),g.style.cssText="position:absolute;left:"+(n*c-u)+"px;top:"+(s*h-m)+"px;",{$svg:g,cssText:"position:relative;width:"+r*c+"px;height:"+o*h+"px;"}}function G(t){var e=this,i=document.createElement("div");i.className="ASS-dialogue";var a=document.createDocumentFragment(),n=t.slices,s=t.start,r=t.end;return n.forEach((function(t){var i=t.borderStyle;t.fragments.forEach((function(n){var o=n.text,l=n.drawing,c=n.animationName,h=p({},t.tag,n.tag),d="display:inline-block;",u=e.video.currentTime;if(!l){d+='font-family:"'+h.fn+'",Arial;',d+="font-size:"+e.scale*q(h.fn,h.fs)+"px;",d+="color:"+A(h.a1+h.c1)+";";var m=/Yes/i.test(e.info.ScaledBorderAndShadow)?e.scale:1;1===i&&(d+="text-shadow:"+D(h,m)+";"),3===i&&(d+="background-color:"+A(h.a3+h.c3)+";box-shadow:"+D(h,m)+";"),d+=h.b?"font-weight:"+(1===h.b?"bold":h.b)+";":"",d+=h.i?"font-style:italic;":"",d+=h.u||h.s?"text-decoration:"+(h.u?"underline":"")+" "+(h.s?"line-through":"")+";":"",d+=h.fsp?"letter-spacing:"+h.fsp+"px;":"",1!==h.q&&0!==h.q&&3!==h.q||(d+="word-break:break-all;white-space:normal;"),2===h.q&&(d+="word-break:normal;white-space:nowrap;")}if(B.some((function(t){return/^fsc[xy]$/.test(t)?100!==h[t]:!!h[t]}))&&(d+=$.transform+"transform:"+P(h)+";",l||(d+="transform-style:preserve-3d;word-break:normal;white-space:nowrap;")),c&&(d+=Y(c,r-s,Math.min(0,s-u))),l&&h.pbo){var f=e.scale*-h.pbo*(h.fscy||100)/100;d+="vertical-align:"+f+"px;"}var v=/"fr[xyz]":[^0]/.test(JSON.stringify(h));(function(t,e){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\s/g,"&nbsp;").replace(/\\h/g,"&nbsp;").replace(/\\N/g,"<br>").replace(/\\n/g,2===e?"<br>":"&nbsp;")})(o,h.q).split("<br>").forEach((function(i,s){var r=document.createElement("span");if(r.dataset.hasRotate=v,l){var o=X.call(e,n,t.tag);r.style.cssText=o.cssText,r.appendChild(o.$svg)}else{if(s&&a.appendChild(document.createElement("br")),!i)return;r.innerHTML=i}r.style.cssText+=d,a.appendChild(r)}))}))})),i.appendChild(a),i}function J(t){var e=t.layer,i=t.margin,a=t.width,n=t.height,s=t.alignment,r=t.end,o=this.width-(this.scale*(i.left+i.right)|0),l=this.height,c=this.scale*i.vertical|0,h=100*this.video.currentTime;this._.space[e]=this._.space[e]||{left:{width:new Uint16Array(l+1),end:new Uint16Array(l+1)},center:{width:new Uint16Array(l+1),end:new Uint16Array(l+1)},right:{width:new Uint16Array(l+1),end:new Uint16Array(l+1)}};var d=this._.space[e],p=["right","left","center"][s%3],u=0,m=0,f=function(t){return(u=function(t){var e=d.left.width[t],i=d.center.width[t],n=d.right.width[t],s=d.left.end[t],r=d.center.end[t],l=d.right.end[t];return"left"===p&&(s>h&&e||r>h&&i&&2*a+i>o||l>h&&n&&a+n>o)||"center"===p&&(s>h&&e&&2*e+a>o||r>h&&i||l>h&&n&&2*n+a>o)||"right"===p&&(s>h&&e&&e+a>o||r>h&&i&&2*a+i>o||l>h&&n)}(t)?0:u+1)>=n&&(m=t,!0)};if(s<=3)for(var v=l-c-1;v>c&&!f(v);v--);else if(s>=7)for(var g=c+1;g<l-c&&!f(g);g++);else for(var b=l-n>>1;b<l-c&&!f(b);b++);s>3&&(m-=n-1);for(var y=m;y<m+n;y++)d[p].width[y]=a,d[p].end[y]=100*r;return m}function K(t){var e=t.effect,i=t.move,a=t.alignment,n=t.width,s=t.height,r=t.margin,o=t.slices,l=0,c=0;if(e)"banner"===e.name&&(a<=3&&(c=this.height-s-r.vertical),a>=4&&a<=6&&(c=(this.height-s)/2),a>=7&&(c=r.vertical),l=e.lefttoright?-n:this.width);else if(t.pos||i){var h=t.pos||{x:0,y:0};a%3==1&&(l=this.scale*h.x),a%3==2&&(l=this.scale*h.x-n/2),a%3==0&&(l=this.scale*h.x-n),a<=3&&(c=this.scale*h.y-s),a>=4&&a<=6&&(c=this.scale*h.y-s/2),a>=7&&(c=this.scale*h.y)}else{a%3==1&&(l=0),a%3==2&&(l=(this.width-n)/2),a%3==0&&(l=this.width-n-this.scale*r.right),o.some((function(t){return t.fragments.some((function(t){return t.animationName}))}))?(a<=3&&(c=this.height-s-r.vertical),a>=4&&a<=6&&(c=(this.height-s)/2),a>=7&&(c=r.vertical)):c=J.call(this,t)}return{x:l,y:c}}function Z(t){var e=t.layer,i=t.start,a=t.end,n=t.alignment,s=t.effect,r=t.pos,o=t.margin,l=t.animationName,c=t.width,h=t.height,d=t.x,p=t.y,u=this.video.currentTime,m="";(e&&(m+="z-index:"+e+";"),l&&(m+=Y(l,a-i,Math.min(0,i-u))),m+="text-align:"+["right","left","center"][n%3]+";",s)||(m+="max-width:"+(this.width-this.scale*(o.left+o.right))+"px;",r||(n%3==1&&(m+="margin-left:"+this.scale*o.left+"px;"),n%3==0&&(m+="margin-right:"+this.scale*o.right+"px;"),c>this.width-this.scale*(o.left+o.right)&&(m+="margin-left:"+this.scale*o.left+"px;",m+="margin-right:"+this.scale*o.right+"px;")));return m+="width:"+c+"px;height:"+h+"px;left:"+d+"px;top:"+p+"px;"}function Q(t){var e=G.call(this,t);p(t,{$div:e}),this._.$stage.appendChild(e);var i=e.getBoundingClientRect(),a=i.width,n=i.height;return p(t,{width:a,height:n}),p(t,K.call(this,t)),e.style.cssText=Z.call(this,t),function(t){var e=t.alignment,i=t.width,a=t.height,n=t.x,s=t.y,r=t.$div,o=t.org;o||(o={x:0,y:0},e%3==1&&(o.x=n),e%3==2&&(o.x=n+i/2),e%3==0&&(o.x=n+i),e<=3&&(o.y=s+a),e>=4&&e<=6&&(o.y=s+a/2),e>=7&&(o.y=s));for(var l=r.childNodes.length-1;l>=0;l--){var c=r.childNodes[l];if("true"===c.dataset.hasRotate){var h=o.x-n-c.offsetLeft,d=o.y-s-c.offsetTop;c.style.cssText+=$.transform+"transform-origin:"+h+"px "+d+"px;"}}}(t),R.call(this,t),t}function tt(){for(var t=this.video.currentTime,e=this._.stagings.length-1;e>=0;e--){var i=this._.stagings[e],a=i.end;if(i.effect&&/scroll/.test(i.effect.name)){var n=i.effect,s=n.y1,r=n.y2,o=n.delay,l=((r||this._.resampledRes.height)-s)/(1e3/o);a=Math.min(a,i.start+l)}a<t&&(this._.$stage.removeChild(i.$div),i.$clipPath&&this._.$defs.removeChild(i.$clipPath),this._.stagings.splice(e,1))}for(var c=this.dialogues;this._.index<c.length&&t>=c[this._.index].start;){if(t<c[this._.index].end){var h=Q.call(this,c[this._.index]);this._.stagings.push(h)}++this._.index}}function et(){var t=this,e=function(){tt.call(t),t._.requestId=T(e)};return j(this._.requestId),this._.requestId=T(e),this._.$stage.classList.remove("ASS-animation-paused"),this}function it(){return j(this._.requestId),this._.requestId=0,this._.$stage.classList.add("ASS-animation-paused"),this}function at(){for(;this._.$stage.lastChild;)this._.$stage.removeChild(this._.$stage.lastChild);for(;this._.$defs.lastChild;)this._.$defs.removeChild(this._.$defs.lastChild);this._.stagings=[],this._.space=[]}function nt(){var t=this.video.currentTime,e=this.dialogues;at.call(this),this._.index=function(){for(var i=0,a=e.length-1;i+1<a&&t>e[a+i>>1].end;)i=a+i>>1;if(!i)return 0;for(var n=i;n<a;n++)if(e[n].end>t&&t>=e[n].start||n&&e[n-1].end<t&&t<e[n].start)return n;return a}(),tt.call(this)}function st(){var t=this._.listener;t.play=et.bind(this),t.pause=it.bind(this),t.seeking=nt.bind(this),this.video.addEventListener("play",t.play),this.video.addEventListener("pause",t.pause),this.video.addEventListener("seeking",t.seeking)}function rt(){var t=this._.listener;this.video.removeEventListener("play",t.play),this.video.removeEventListener("pause",t.pause),this.video.removeEventListener("seeking",t.seeking),t.play=null,t.pause=null,t.seeking=null}function ot(){var t=this.video.clientWidth,e=this.video.clientHeight,i=this.video.videoWidth||t,a=this.video.videoHeight||e,n=this._.scriptRes.width,s=this._.scriptRes.height,r=n,o=s,l=Math.min(t/i,e/a);"video_width"===this.resampling&&(o=n/i*a),"video_height"===this.resampling&&(r=s/a*i),this.scale=Math.min(t/r,e/o),"script_width"===this.resampling&&(this.scale=l*(i/r)),"script_height"===this.resampling&&(this.scale=l*(a/o)),this.width=this.scale*r,this.height=this.scale*o,this._.resampledRes={width:r,height:o},this.container.style.cssText="width:"+t+"px;height:"+e+"px;";var c="width:"+this.width+"px;height:"+this.height+"px;top:"+(e-this.height)/2+"px;left:"+(t-this.width)/2+"px;";return this._.$stage.style.cssText=c,this._.$svg.style.cssText=c,this._.$svg.setAttributeNS(null,"viewBox","0 0 "+n+" "+s),this._.$animation.innerHTML=U.call(this),nt.call(this),this}I.prototype.set=function(t,e,i){this.obj[t]||(this.obj[t]={}),this.obj[t][e]=i},I.prototype.setT=function(t){var e=t.t1,i=t.t2,a=t.duration,n=t.prop,s=t.from,r=t.to;this.set("0.000%",n,s),e<a&&this.set((e/a*100).toFixed(3)+"%",n,s),i<a&&this.set((i/a*100).toFixed(3)+"%",n,r),this.set("100.000%",n,r)},I.prototype.toString=function(){var t=this;return Object.keys(this.obj).map((function(e){return e+"{"+Object.keys(t.obj[e]).map((function(i){return""+($[i]||"")+i+":"+t.obj[e][i]+";"})).join("")+"}"})).join("")};function lt(t,e,i){if(void 0===i&&(i={}),this.scale=1,this._={index:0,stagings:[],space:[],listener:{},$svg:z("svg"),$defs:z("defs"),$stage:document.createElement("div"),$animation:document.createElement("style")},this._.$svg.appendChild(this._.$defs),this._.$stage.className="ASS-stage ASS-animation-paused",this._.resampling=i.resampling||"video_height",this.container=i.container||document.createElement("div"),this.container.classList.add("ASS-container"),this.container.appendChild(H),this.container.appendChild(this._.$svg),this._.hasInitContainer=!!i.container,this.video=e,st.call(this),!this._.hasInitContainer){var a=!e.paused;e.parentNode.insertBefore(this.container,e),this.container.appendChild(e),a&&e.paused&&e.play()}this.container.appendChild(this._.$stage);var n=E(t),s=n.info,r=n.width,o=n.height,l=n.dialogues;this.info=s,this._.scriptRes={width:r||e.videoWidth,height:o||e.videoHeight},this.dialogues=l;var c=L(this.container),h=c.querySelector("#ASS-global-style");return h||((h=document.createElement("style")).type="text/css",h.id="ASS-global-style",h.appendChild(document.createTextNode(".ASS-container,.ASS-stage{position:relative;overflow:hidden}.ASS-container video{position:absolute;top:0;left:0}.ASS-stage{pointer-events:none;position:absolute}.ASS-dialogue{font-size:0;position:absolute}.ASS-fix-font-size{position:absolute;visibility:hidden}.ASS-fix-objectBoundingBox{width:100%;height:100%;position:absolute;top:0;left:0}.ASS-animation-paused *{-webkit-animation-play-state:paused!important;animation-play-state:paused!important}")),c.appendChild(h)),this._.$animation.type="text/css",this._.$animation.className="ASS-animation",c.appendChild(this._.$animation),ot.call(this),this.video.paused||(nt.call(this),et.call(this)),this}function ct(){return this._.$stage.style.visibility="visible",this}function ht(){return this._.$stage.style.visibility="hidden",this}function dt(){it.call(this),at.call(this),rt.call(this,this._.listener);var t=L(this.container);if(!this._.hasInitContainer){var e=!this.video.paused;this.container.parentNode.insertBefore(this.video,this.container),this.container.parentNode.removeChild(this.container),e&&this.video.paused&&this.video.play()}for(var i in t.removeChild(this._.$animation),this)Object.prototype.hasOwnProperty.call(this,i)&&(this[i]=null);return this}var pt=/^(video|script)_(width|height)$/;function ut(){return pt.test(this._.resampling)?this._.resampling:"video_height"}function mt(t){return t===this._.resampling?t:(pt.test(t)&&(this._.resampling=t,this.resize()),this._.resampling)}var ft=function(t,e,i){return"string"!=typeof t?this:lt.call(this,t,e,i)},vt={resampling:{configurable:!0}};ft.prototype.resize=function(){return ot.call(this)},ft.prototype.show=function(){return ct.call(this)},ft.prototype.hide=function(){return ht.call(this)},ft.prototype.destroy=function(){return dt.call(this)},vt.resampling.get=function(){return ut.call(this)},vt.resampling.set=function(t){return mt.call(this,t)},Object.defineProperties(ft.prototype,vt),e.default=ft},function(t,e,i){"use strict";i.r(e);i(1);function a(t,e){return{x:e.clientX-t.getBoundingClientRect().x,y:e.clientY-t.getBoundingClientRect().y}}function n(t){console.error(`${this._.name} | ${t}`)}function s(t){let e=(t=Math.floor(t))%60,i=Math.floor(t/60)%60,a=Math.floor(t/3600);return a>0?`${a}:${i.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`:`${i.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}function r(t,e={},i=(()=>{})){var a=document.createElement(t);for(var n in e)a.setAttribute(n,e[n]);return i(a),a}function o(t){t<0&&(t=0),t>1&&(t=1),this._.form.buttons.volume.setAttribute("icon",Math.ceil(3*t)),this._.form.volumebar.selected.setAttribute("style",`width: ${100*t}%`),this._.form.audio.volume=t}function l(t=!0){0!=this._.form.audio.volume?(this._.form.audio.lastVolume=this._.form.audio.volume,o.call(this,0)):t||o.call(this,this._.form.audio.lastVolume)}function c(){document.addEventListener("keydown",t=>{switch(t.code){case"Space":t.preventDefault();case"KeyK":this.playing?this.pause():this.play();break;case"ArrowLeft":t.preventDefault(),this.rewind(-5);break;case"ArrowRight":t.preventDefault(),this.rewind(5);break;case"KeyJ":this.rewind(-10);break;case"KeyL":this.rewind(10);break;case"KeyM":this.mute(!1);break;case"ArrowUp":t.preventDefault(),this._.form.audio.volume&&(this._.form.audio.lastVolume=this._.form.audio.volume),o.call(this,this._.form.audio.volume+.05);break;case"ArrowDown":t.preventDefault(),this._.form.audio.volume&&(this._.form.audio.lastVolume=this._.form.audio.volume),o.call(this,this._.form.audio.volume-.05);break;case"KeyF":toggleFullscreen.call(this);break;case"Digit0":case"Numpad0":this.setTime(0*this.duration);break;case"Digit1":case"Numpad1":this.setTime(.1*this.duration);break;case"Digit2":case"Numpad2":this.setTime(.2*this.duration);break;case"Digit3":case"Numpad3":this.setTime(.3*this.duration);break;case"Digit4":case"Numpad4":this.setTime(.4*this.duration);break;case"Digit5":case"Numpad5":this.setTime(.5*this.duration);break;case"Digit6":case"Numpad6":this.setTime(.6*this.duration);break;case"Digit7":case"Numpad7":this.setTime(.7*this.duration);break;case"Digit8":case"Numpad8":this.setTime(.8*this.duration);break;case"Digit9":case"Numpad9":this.setTime(.9*this.duration)}})}function h(t){t?(this._.form.video.onplaying=null,this._.form.video.play().then(()=>{this._.form.video.onplaying=this._.form.video._onplaying})):(this._.form.video.onpause=null,this._.form.video.pause(),setTimeout(()=>{this._.form.video.onpause=this._.form.video._onpause},16))}function d(t){t?(this._.form.audio.onplaying=null,this._.form.audio.play().then(()=>{this._.form.audio.onplaying=this._.form.audio._onplaying})):(this._.form.audio.onpause=null,this._.form.audio.pause(),setTimeout(()=>{this._.form.audio.onpause=this._.form.audio._onpause},16))}function p(t){t?d.call(this,!1):this.playing&&d.call(this,!0),this._.form.video._isWaiting=t}function u(t){t?h.call(this,!1):this.playing&&h.call(this,!0),this._.form.audio._isWaiting=t}function m(t){t?(this._.form.audio._isWaiting||h.call(this,!0),this._.form.video._isWaiting||d.call(this,!0),this._.form.buttons.play.setAttribute("name","pauseBtn")):(h.call(this,!1),d.call(this,!1),this._.form.buttons.play.setAttribute("name","playBtn")),this.playing=t}function f(){m.call(this,!0)}function v(){m.call(this,!1)}function g(t){(t+=this._.form.audio.currentTime)<0&&(t=0),this._.form.video.currentTime=t,this._.form.audio.currentTime=t}function b(t){t=Math.floor(t),this._.form.video.currentTime=t,this._.form.audio.currentTime=t}let y;function x(t){h.call(this,!1),p.call(this,!0),this._.form.video.src=t,this._.form.video.currentTime=this._.form.audio.currentTime,this.playing&&h.call(this,!0)}function _(t){let e=this._.form.audio.currentTime;d.call(this,!1),u.call(this,!0),this._.form.audio.src=t,this._.form.audio.currentTime=e,this.playing&&d.call(this,!0)}function w(t){clearTimeout(this._.subtitlesDownloader),void 0!==this._.ass&&(this._.ass.destroy(),this._.ass=void 0),t&&(this._.subtitlesDownloader=setTimeout(()=>{var e=new XMLHttpRequest;if(e.open("GET",t,!1),e.send(),200==e.status)try{this._.ass=new y(e.responseText,this._.form.video,{container:this._.form.subtitles}),this.resize()}catch(t){n.call(this,"Can't use ASS library")}}))}function k(){this._.form.settings.title.innerText="Настройки";for(let t in this._.form.settings.menu)this._.form.settings.menu[t].content.setAttribute("style","display: none");this._.form.settings.menuSwitcher._root.removeAttribute("style")}function C(){this._.form.settings.opened?this._.form.settings._root.removeAttribute("style"):(k.call(this),this._.form.settings._root.setAttribute("style","display: block")),this._.form.settings.opened=!this._.form.settings.opened}function S(){this._.form.settings={opened:!1,menu:{quality:{titlename:"Качество",content:r("div")},dubs:{titlename:"Озвучки",content:r("div")},subtitles:{titlename:"Субтитры",content:r("div")},info:{titlename:"Информация о плеере",content:r("div",{blockName:"info"},t=>{t.innerHTML+='<a href="https://forms.gle/gTrxarVsZoof3CyW6" target="_blank" style="color: #ffccff; font-size: 24px">Баг-репорт</a> (перед отправкой проверьте ссылку ниже, возможно этот баг уже известен!)';let e=r("div",{style:"display: flex; padding: 12px 0px"},t=>{t.appendChild(r("img",{src:"https://avatars2.githubusercontent.com/u/26777464?s=96",width:48,height:48})),t.appendChild(r("div",{style:"line-height: 20px; padding: 4px 8px"},t=>{t.innerHTML+='Исходный код плеера:<br><a href="https://github.com/Ponywka/Multitrack.JS" style="color: #ffccff">Ponywka/Multitrack.JS</a>',t.innerHTML+="\x3c!--| Да, Somepony, ты дождался его! |--\x3e"}))});t.appendChild(e)})}},title:r("div",{name:"title"}),header:r("div",{name:"settingsHeader"}),body:r("div",{name:"settingsBody"}),menuSwitcher:{_root:r("div")},_root:r("div",{name:"settings"})},this._.form.settings.body.appendChild(this._.form.settings.menuSwitcher._root);for(let t in this._.form.settings.menu)this._.form.settings.body.appendChild(this._.form.settings.menu[t].content),this._.form.settings.menuSwitcher["btn"+t]=r("div",{name:"listEl",page:t},e=>{e.innerText=this._.form.settings.menu[t].titlename,e.onclick=e=>{k.call(this),this._.form.settings.title.innerText=this._.form.settings.menu[t].titlename,this._.form.settings.menu[t].content.removeAttribute("style"),this._.form.settings.menuSwitcher._root.setAttribute("style","display: none;")}}),this._.form.settings.menuSwitcher._root.appendChild(this._.form.settings.menuSwitcher["btn"+t]);let t;k.call(this),t=!0;for(let e of this._.videos){let i=r("div",{name:"listEl",link:e.path},t=>{t.innerText=e.name,t.onclick=i=>{for(let t of this._.form.settings.menu.quality.content.querySelectorAll("*"))t.removeAttribute("selected");t.setAttribute("selected","true"),x.call(this,e.path)}});this._.form.settings.menu.quality.content.appendChild(i),t&&(i.click(),t=!1)}t=!0;for(let e of this._.audios){let i=r("div",{name:"listEl",link:e.path},t=>{t.innerText=e.name,t.onclick=i=>{for(let t of this._.form.settings.menu.dubs.content.querySelectorAll("*"))t.removeAttribute("selected");t.setAttribute("selected","true"),_.call(this,e.path)}});this._.form.settings.menu.dubs.content.appendChild(i),t&&(i.click(),t=!1)}let e=r("div",{name:"listEl"},t=>{t.innerText="Отключено",t.onclick=e=>{for(let t of this._.form.settings.menu.subtitles.content.querySelectorAll("*"))t.removeAttribute("selected");t.setAttribute("selected","true"),w.call(this)}});this._.form.settings.menu.subtitles.content.appendChild(e),e.click();for(let t of this._.subtitles){let e=r("div",{name:"listEl",link:t.path},e=>{e.innerText=t.name,e.onclick=i=>{for(let t of this._.form.settings.menu.subtitles.content.querySelectorAll("*"))t.removeAttribute("selected");e.setAttribute("selected","true"),w.call(this,t.path)}});this._.form.settings.menu.subtitles.content.appendChild(e)}this._.form.settings.header.appendChild(this._.form.settings.title),this._.form.settings._root.appendChild(this._.form.settings.header),this._.form.settings._root.appendChild(this._.form.settings.body)}function E(){if(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),this._.form.buttons.fullscreen.setAttribute("name","fullscreenOn");else{var t=this._.element;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):t.msRequestFullscreen&&t.msRequestFullscreen(),this._.form.buttons.fullscreen.setAttribute("name","fullscreenOff")}}function T(){this._.form.buttons={play:r("button",{name:"playBtn"},t=>{t.onclick=()=>{this.playing?this.pause():this.play()}}),backward10:r("button",{name:"backward10"},t=>{t.onclick=()=>{this.rewind(-10)}}),forward10:r("button",{name:"forward10"},t=>{t.onclick=()=>{this.rewind(10)}}),fullscreen:r("button",{name:"fullscreenOn"},t=>{t.onclick=t=>{E.call(this)}}),pip:r("button",{name:"pipOn"},t=>{t.onclick=e=>{"pictureInPictureEnabled"in document?this._.form.video!==document.pictureInPictureElement?(this._.form.video.requestPictureInPicture(),t.setAttribute("name","pipOff")):(document.exitPictureInPicture(),t.setAttribute("name","pipOn")):n.call(this,"Sorry, your browser is not support picture-in-picture")}}),menu:r("button",{name:"menu"},t=>{t.addEventListener("click",()=>{C.call(this)})})}}function j(){this._.moveEvents=[],document.addEventListener("mousemove",t=>{for(let e of this._.moveEvents)e.move(t)}),document.addEventListener("mouseup",t=>{for(let e of this._.moveEvents)e.release(t);this._.moveEvents=[]}),document.addEventListener("touchmove",t=>{for(let e of this._.moveEvents)e.move(t.touches[0])},!1),document.addEventListener("touchend",t=>{for(let e of this._.moveEvents)e.release(t.changedTouches[0]);this._.moveEvents=[]},!1),this._.form.overlays._root.addEventListener("dblclick",t=>{t.target===this._.form.overlays._root&&E.call(this)},!1),this._.element.addEventListener("contextmenu",t=>(t.preventDefault(),C.call(this),!1),!1)}function A(){this._.pageFocused=!0,window.addEventListener("focus",()=>{this._.pageFocused=!0,this.playing&&m.call(this,!0)}),window.addEventListener("blur",()=>{this._.pageFocused=!1})}function M(){this._.form.video=r("video",{},t=>{t._onplaying=()=>{m.call(this,!0)},t.onplaying=t._onplaying,t._onpause=e=>{(t===document.pictureInPictureElement||this._.pageFocused)&&m.call(this,!1)},t.onpause=t._onpause,t.onwaiting=()=>{p.call(this,!0)},t.oncanplay=()=>{p.call(this,!1)},t.onloadedmetadata=()=>{this.duration=t.duration,this._.form.time.innerText=`${s(this._.form.audio.currentTime)} / ${s(this.duration)}`},t.onprogress=()=>{var e=this._.form.progressbar.loaded,i=this._.form.progressbar.loaded._canvas;e.width=e.clientWidth,i.fillStyle="white",i.clearRect(0,0,e.width,1);for(let s=0;s<t.buffered.length;s++){var a=t.buffered.start(s)*e.width/this.duration,n=t.buffered.end(s)*e.width/this.duration-a;i.fillRect(Math.floor(a),0,Math.floor(n),1)}}})}function z(){this._.form.audio=r("audio",{},t=>{t._onplaying=()=>{m.call(this,!0)},t.onplaying=t._onplaying,t._onpause=()=>{m.call(this,!1)},t.onpause=t._onpause,t.onwaiting=()=>{u.call(this,!0)},t.oncanplay=()=>{u.call(this,!1)},t.ontimeupdate=()=>{this.currentTime=t.currentTime,this._.form.progressbar.updateStyle||this._.form.progressbar.played.setAttribute("style",`width: ${100*t.currentTime/this.duration}%`),this._.form.time.innerText=`${s.call(this,t.currentTime)} / ${s.call(this,this.duration)}`}})}function N(){this._.form.buttons.volume=r("button",{name:"volume",icon:3},t=>{t.addEventListener("click",()=>{l.call(this,!1)})}),this._.form.volumebar={line:r("div",{name:"volumebar-line"}),selected:r("div",{name:"volumebar-selected"}),_root:r("div",{name:"volumebar-all"},t=>{let e=e=>{this._.form.volumebar.updateStyle=!1;a(t,e).x;var i=a(t,e).x/t.clientWidth;o.call(this,i)},i=e=>{if(this._.form.volumebar.updateStyle){var i=a(t,e).x/t.clientWidth;o.call(this,i)}};t.addEventListener("mousedown",()=>{this._.form.volumebar.updateStyle=!0,this._.form.audio.lastVolume=this._.form.audio.volume,Object(this._.moveEvents).push({move:i,release:e})}),t.addEventListener("touchstart",()=>{this._.form.volumebar.updateStyle=!0,this._.form.audio.lastVolume=this._.form.audio.volume,Object(this._.moveEvents).push({move:i,release:e})})})},this._.form.volumebar._root.appendChild(this._.form.volumebar.line),this._.form.volumebar._root.appendChild(this._.form.volumebar.selected)}function $(){this._.form.progressbar={line:r("div",{name:"progress-line"}),loaded:r("canvas",{name:"progress-loaded",height:1},t=>{t._canvas=t.getContext("2d")}),played:r("div",{name:"progress-played"}),popup:r("div",{name:"timeline-popup",style:"display: none"},t=>{t.text=r("div",{name:"timeline-popup-time"}),t.image=r("div",{name:"timeline-popup-image"})}),_root:r("div",{name:"progress-all"},t=>{let e=(e,i)=>{if(this._.form.progressbar.popup.text.innerText=s(this.duration*i),0!=this._.form.progressbar.popup.clientWidth&&(this._.form.progressbar.popup.halfWidth=this._.form.progressbar.popup.clientWidth/2),e<this._.form.progressbar.popup.halfWidth?this._.form.progressbar.popup.setAttribute("style","left: 0px"):e<t.clientWidth-this._.form.progressbar.popup.halfWidth?this._.form.progressbar.popup.setAttribute("style",`left: ${e-this._.form.progressbar.popup.halfWidth}px`):this._.form.progressbar.popup.setAttribute("style",`left: ${t.clientWidth-2*this._.form.progressbar.popup.halfWidth}px`),this._.parameters.frames.image){var a=this._.parameters.frames.x*this._.parameters.frames.y,n=Math.floor(i*a);n>=a&&(n=a-1);var r=n%this._.parameters.frames.x/(this._.parameters.frames.x-1),o=Math.floor(n/this._.parameters.frames.x)/(this._.parameters.frames.y-1);this._.form.progressbar.popup.image.setAttribute("style",`\n                            background-position: ${100*r}% ${100*o}%;\n                            background-size: ${100*this._.parameters.frames.x}%;\n                            background-image: url(${this._.parameters.frames.image})`)}else this._.form.progressbar.popup.image.setAttribute("style","display: none")},i=i=>{var n=a(t,i),s=n.x/t.clientWidth;s<0&&(s=0),s>1&&(s=1),this._.form.progressbar.updateStyle&&this._.form.progressbar.played.setAttribute("style",`width: ${100*s}%`),e(n.x,s)},n=e=>{this._.form.progressbar.updateStyle=!1,this._.form.progressbar.popup.setAttribute("style","display: none"),this.setTime(this.duration*a(t,e).x/t.clientWidth)};t.addEventListener("mousedown",t=>{this._.form.progressbar.updateStyle=!0,Object(this._.moveEvents).push({move:i,release:n})}),t.addEventListener("touchstart",t=>{this._.form.progressbar.updateStyle=!0,Object(this._.moveEvents).push({move:i,release:n})}),t.addEventListener("mousemove",i=>{var n=a(t,i),s=n.x/t.clientWidth;s<0&&(s=0),s>1&&(s=1),this._.form.progressbar.updateStyle||n.y>0?e(n.x,s):this._.form.progressbar.popup.setAttribute("style","display: none")}),t.addEventListener("mouseout",t=>{this._.form.progressbar.popup.setAttribute("style","display: none")})})},this._.form.progressbar.popup.appendChild(this._.form.progressbar.popup.image),this._.form.progressbar.popup.appendChild(this._.form.progressbar.popup.text),this._.form.progressbar._root.appendChild(this._.form.progressbar.popup),this._.form.progressbar._root.appendChild(this._.form.progressbar.line),this._.form.progressbar._root.appendChild(this._.form.progressbar.loaded),this._.form.progressbar._root.appendChild(this._.form.progressbar.played)}function L(){let t;this._.element.addEventListener("mousemove",()=>{this._.form.overlays._root.removeAttribute("style"),clearTimeout(t),t=setTimeout(()=>{this._.form.overlays._root.setAttribute("style","opacity: 0; cursor: none;")},3e3)}),this._.element.addEventListener("mouseout",()=>{clearTimeout(t),this._.form.overlays._root.setAttribute("style","opacity: 0;")}),this._.form.overlays={_root:r("div",{name:"overlay"},t=>{}),bottom:r("div",{name:"overlay-bottom"}),top:r("div",{name:"overlay-top"})},this._.form.overlays.top.appendChild(this._.form.title),this._.form.overlays.bottom.appendChild(this._.form.buttons.play),this._.form.overlays.bottom.appendChild(this._.form.buttons.backward10),this._.form.overlays.bottom.appendChild(this._.form.buttons.forward10),this._.form.overlays.bottom.appendChild(this._.form.buttons.volume),this._.form.overlays.bottom.appendChild(this._.form.volumebar._root),this._.form.overlays.bottom.appendChild(this._.form.time),this._.form.overlays.bottom.appendChild(r("div",{style:"flex: auto"})),!("pictureInPictureEnabled"in document)||navigator.userAgent.search(/YaBrowser/)>0||this._.form.overlays.bottom.appendChild(this._.form.buttons.pip),this._.form.overlays.bottom.appendChild(this._.form.buttons.menu),this._.form.overlays.bottom.appendChild(this._.form.buttons.fullscreen),this._.form.overlays._root.appendChild(this._.form.overlays.top),this._.form.overlays._root.appendChild(this._.form.overlays.bottom),this._.form.overlays._root.appendChild(this._.form.progressbar._root),this._.form.overlays._root.addEventListener("click",t=>{t.target==this._.form.overlays._root&&(this.playing?this.pause():this.play())})}function F(){this._.form={},M.call(this),z.call(this),this._.form.subtitles=r("div",{id:"subtitles"}),this._.form.time=r("div",{name:"time"},t=>{t.innerText="--:-- / --:--"}),this._.form.title=r("div",{name:"title"}),T.call(this),$.call(this),N.call(this),S.call(this),L.call(this),this._.element.appendChild(this._.form.video),this._.element.appendChild(this._.form.audio),this._.element.appendChild(this._.form.subtitles),this._.element.appendChild(this._.form.overlays._root),this._.element.appendChild(this._.form.settings._root),j.call(this),c.call(this),A.call(this)}function B(t,e){if(this._={name:"Multitrack.JS",parameters:{frames:{x:10,y:10}},subtitlesDownloader:null,videos:e.videos,audios:e.audios,subtitles:e.subtitles},this.playing=!1,this._.element=document.querySelector(t)){this._.element.setAttribute("application-name","multitrack-js"),F.call(this),e.placeholder&&(this._.form.video.poster=e.placeholder),e.preview&&(this._.parameters.frames.image=e.preview),this._.form.title.innerText=e.title;let t=this._.form.video,i=this._.form.audio;(function e(){let a=i.currentTime-t.currentTime,n=Math.abs(a);if(this.playing&&n>1/60)if(n<3){var s=n+1;a>0?(this._.form.video.playbackRate=s,setTimeout(()=>{this._.form.video.playbackRate=1,e.call(this)},1e3)):(this._.form.video.playbackRate=1/s,setTimeout(()=>{this._.form.video.playbackRate=1,e.call(this)},1e3*s))}else this._.form.video.currentTime=this._.form.audio.currentTime,e.call(this);else setTimeout(()=>{e.call(this)},1e3)}).call(this)}else n.call(this,`Can not find "${t}" element!`)}document.addEventListener("DOMContentLoaded",(function(){y=i(5).default}));e.default=class{constructor(t,e){return B.call(this,t,e),this}play(){f.call(this)}pause(){v.call(this)}rewind(t){g.call(this,t)}setTime(t){b.call(this,t)}mute(t){mute.call(this,t)}resize(){void 0!==this._.ass&&this._.ass.resize()}}}]);