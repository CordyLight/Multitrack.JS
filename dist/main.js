var MultitrackJS =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/assjs/dist/ass.esm.js":
/*!********************************************!*\
  !*** ./node_modules/assjs/dist/ass.esm.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nfunction parseEffect(text) {\n  var param = text\n    .toLowerCase()\n    .trim()\n    .split(/\\s*;\\s*/);\n  if (param[0] === 'banner') {\n    return {\n      name: param[0],\n      delay: param[1] * 1 || 0,\n      leftToRight: param[2] * 1 || 0,\n      fadeAwayWidth: param[3] * 1 || 0,\n    };\n  }\n  if (/^scroll\\s/.test(param[0])) {\n    return {\n      name: param[0],\n      y1: Math.min(param[1] * 1, param[2] * 1),\n      y2: Math.max(param[1] * 1, param[2] * 1),\n      delay: param[3] * 1 || 0,\n      fadeAwayHeight: param[4] * 1 || 0,\n    };\n  }\n  return null;\n}\n\nfunction parseDrawing(text) {\n  return text\n    .toLowerCase()\n    // numbers\n    .replace(/([+-]?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[+-]?\\d+)?)/g, ' $1 ')\n    // commands\n    .replace(/([mnlbspc])/g, ' $1 ')\n    .trim()\n    .replace(/\\s+/g, ' ')\n    .split(/\\s(?=[mnlbspc])/)\n    .map(function (cmd) { return (\n      cmd.split(' ')\n        .filter(function (x, i) { return !(i && Number.isNaN(x * 1)); })\n    ); });\n}\n\nvar numTags = [\n  'b', 'i', 'u', 's', 'fsp',\n  'k', 'K', 'kf', 'ko', 'kt',\n  'fe', 'q', 'p', 'pbo', 'a', 'an',\n  'fscx', 'fscy', 'fax', 'fay', 'frx', 'fry', 'frz', 'fr',\n  'be', 'blur', 'bord', 'xbord', 'ybord', 'shad', 'xshad', 'yshad' ];\n\nvar numRegexs = numTags.map(function (nt) { return ({ name: nt, regex: new RegExp((\"^\" + nt + \"-?\\\\d\")) }); });\n\nfunction parseTag(text) {\n  var assign;\n\n  var tag = {};\n  for (var i = 0; i < numRegexs.length; i++) {\n    var ref = numRegexs[i];\n    var name = ref.name;\n    var regex = ref.regex;\n    if (regex.test(text)) {\n      tag[name] = text.slice(name.length) * 1;\n      return tag;\n    }\n  }\n  if (/^fn/.test(text)) {\n    tag.fn = text.slice(2);\n  } else if (/^r/.test(text)) {\n    tag.r = text.slice(1);\n  } else if (/^fs[\\d+-]/.test(text)) {\n    tag.fs = text.slice(2);\n  } else if (/^\\d?c&?H?[0-9a-f]+|^\\d?c$/i.test(text)) {\n    var ref$1 = text.match(/^(\\d?)c&?H?(\\w*)/);\n    var num = ref$1[1];\n    var color = ref$1[2];\n    tag[(\"c\" + (num || 1))] = color && (\"000000\" + color).slice(-6);\n  } else if (/^\\da&?H?[0-9a-f]+/i.test(text)) {\n    var ref$2 = text.match(/^(\\d)a&?H?(\\w\\w)/);\n    var num$1 = ref$2[1];\n    var alpha = ref$2[2];\n    tag[(\"a\" + num$1)] = alpha;\n  } else if (/^alpha&?H?[0-9a-f]+/i.test(text)) {\n    (assign = text.match(/^alpha&?H?([0-9a-f]+)/i), tag.alpha = assign[1]);\n    tag.alpha = (\"00\" + (tag.alpha)).slice(-2);\n  } else if (/^(?:pos|org|move|fad|fade)\\(/.test(text)) {\n    var ref$3 = text.match(/^(\\w+)\\((.*?)\\)?$/);\n    var key = ref$3[1];\n    var value = ref$3[2];\n    tag[key] = value\n      .trim()\n      .split(/\\s*,\\s*/)\n      .map(Number);\n  } else if (/^i?clip/.test(text)) {\n    var p = text\n      .match(/^i?clip\\((.*?)\\)?$/)[1]\n      .trim()\n      .split(/\\s*,\\s*/);\n    tag.clip = {\n      inverse: /iclip/.test(text),\n      scale: 1,\n      drawing: null,\n      dots: null,\n    };\n    if (p.length === 1) {\n      tag.clip.drawing = parseDrawing(p[0]);\n    }\n    if (p.length === 2) {\n      tag.clip.scale = p[0] * 1;\n      tag.clip.drawing = parseDrawing(p[1]);\n    }\n    if (p.length === 4) {\n      tag.clip.dots = p.map(Number);\n    }\n  } else if (/^t\\(/.test(text)) {\n    var p$1 = text\n      .match(/^t\\((.*?)\\)?$/)[1]\n      .trim()\n      .replace(/\\\\.*/, function (x) { return x.replace(/,/g, '\\n'); })\n      .split(/\\s*,\\s*/);\n    if (!p$1[0]) { return tag; }\n    tag.t = {\n      t1: 0,\n      t2: 0,\n      accel: 1,\n      tags: p$1[p$1.length - 1]\n        .replace(/\\n/g, ',')\n        .split('\\\\')\n        .slice(1)\n        .map(parseTag),\n    };\n    if (p$1.length === 2) {\n      tag.t.accel = p$1[0] * 1;\n    }\n    if (p$1.length === 3) {\n      tag.t.t1 = p$1[0] * 1;\n      tag.t.t2 = p$1[1] * 1;\n    }\n    if (p$1.length === 4) {\n      tag.t.t1 = p$1[0] * 1;\n      tag.t.t2 = p$1[1] * 1;\n      tag.t.accel = p$1[2] * 1;\n    }\n  }\n\n  return tag;\n}\n\nfunction parseTags(text) {\n  var tags = [];\n  var depth = 0;\n  var str = '';\n  for (var i = 0; i < text.length; i++) {\n    var x = text[i];\n    if (x === '(') { depth++; }\n    if (x === ')') { depth--; }\n    if (depth < 0) { depth = 0; }\n    if (!depth && x === '\\\\') {\n      if (str) {\n        tags.push(str);\n      }\n      str = '';\n    } else {\n      str += x;\n    }\n  }\n  tags.push(str);\n  return tags.map(parseTag);\n}\n\nfunction parseText(text) {\n  var pairs = text.split(/{([^{}]*?)}/);\n  var parsed = [];\n  if (pairs[0].length) {\n    parsed.push({ tags: [], text: pairs[0], drawing: [] });\n  }\n  for (var i = 1; i < pairs.length; i += 2) {\n    var tags = parseTags(pairs[i]);\n    var isDrawing = tags.reduce(function (v, tag) { return (tag.p === undefined ? v : !!tag.p); }, false);\n    parsed.push({\n      tags: tags,\n      text: isDrawing ? '' : pairs[i + 1],\n      drawing: isDrawing ? parseDrawing(pairs[i + 1]) : [],\n    });\n  }\n  return {\n    raw: text,\n    combined: parsed.map(function (frag) { return frag.text; }).join(''),\n    parsed: parsed,\n  };\n}\n\nfunction parseTime(time) {\n  var t = time.split(':');\n  return t[0] * 3600 + t[1] * 60 + t[2] * 1;\n}\n\nfunction parseDialogue(text, format) {\n  var fields = text.split(',');\n  if (fields.length > format.length) {\n    var textField = fields.slice(format.length - 1).join();\n    fields = fields.slice(0, format.length - 1);\n    fields.push(textField);\n  }\n\n  var dia = {};\n  for (var i = 0; i < fields.length; i++) {\n    var fmt = format[i];\n    var fld = fields[i].trim();\n    switch (fmt) {\n      case 'Layer':\n      case 'MarginL':\n      case 'MarginR':\n      case 'MarginV':\n        dia[fmt] = fld * 1;\n        break;\n      case 'Start':\n      case 'End':\n        dia[fmt] = parseTime(fld);\n        break;\n      case 'Effect':\n        dia[fmt] = parseEffect(fld);\n        break;\n      case 'Text':\n        dia[fmt] = parseText(fld);\n        break;\n      default:\n        dia[fmt] = fld;\n    }\n  }\n\n  return dia;\n}\n\nfunction parseFormat(text) {\n  return text.match(/Format\\s*:\\s*(.*)/i)[1].split(/\\s*,\\s*/);\n}\n\nfunction parseStyle(text) {\n  return text.match(/Style\\s*:\\s*(.*)/i)[1].split(/\\s*,\\s*/);\n}\n\nfunction parse(text) {\n  var tree = {\n    info: {},\n    styles: { format: [], style: [] },\n    events: { format: [], comment: [], dialogue: [] },\n  };\n  var lines = text.split(/\\r?\\n/);\n  var state = 0;\n  for (var i = 0; i < lines.length; i++) {\n    var line = lines[i].trim();\n    if (/^;/.test(line)) { continue; }\n\n    if (/^\\[Script Info\\]/i.test(line)) { state = 1; }\n    else if (/^\\[V4\\+? Styles\\]/i.test(line)) { state = 2; }\n    else if (/^\\[Events\\]/i.test(line)) { state = 3; }\n    else if (/^\\[.*\\]/.test(line)) { state = 0; }\n\n    if (state === 0) { continue; }\n    if (state === 1) {\n      if (/:/.test(line)) {\n        var ref = line.match(/(.*?)\\s*:\\s*(.*)/);\n        var key = ref[1];\n        var value = ref[2];\n        tree.info[key] = value;\n      }\n    }\n    if (state === 2) {\n      if (/^Format\\s*:/i.test(line)) {\n        tree.styles.format = parseFormat(line);\n      }\n      if (/^Style\\s*:/i.test(line)) {\n        tree.styles.style.push(parseStyle(line));\n      }\n    }\n    if (state === 3) {\n      if (/^Format\\s*:/i.test(line)) {\n        tree.events.format = parseFormat(line);\n      }\n      if (/^(?:Comment|Dialogue)\\s*:/i.test(line)) {\n        var ref$1 = line.match(/^(\\w+?)\\s*:\\s*(.*)/i);\n        var key$1 = ref$1[1];\n        var value$1 = ref$1[2];\n        tree.events[key$1.toLowerCase()].push(parseDialogue(value$1, tree.events.format));\n      }\n    }\n  }\n\n  return tree;\n}\n\nvar assign = Object.assign || (\n  /* istanbul ignore next */\n  function assign(target) {\n    var sources = [], len = arguments.length - 1;\n    while ( len-- > 0 ) sources[ len ] = arguments[ len + 1 ];\n\n    for (var i = 0; i < sources.length; i++) {\n      if (!sources[i]) { continue; }\n      var keys = Object.keys(sources[i]);\n      for (var j = 0; j < keys.length; j++) {\n        // eslint-disable-next-line no-param-reassign\n        target[keys[j]] = sources[i][keys[j]];\n      }\n    }\n    return target;\n  }\n);\n\nfunction createCommand(arr) {\n  var cmd = {\n    type: null,\n    prev: null,\n    next: null,\n    points: [],\n  };\n  if (/[mnlbs]/.test(arr[0])) {\n    cmd.type = arr[0]\n      .toUpperCase()\n      .replace('N', 'L')\n      .replace('B', 'C');\n  }\n  for (var len = arr.length - !(arr.length & 1), i = 1; i < len; i += 2) {\n    cmd.points.push({ x: arr[i] * 1, y: arr[i + 1] * 1 });\n  }\n  return cmd;\n}\n\nfunction isValid(cmd) {\n  if (!cmd.points.length || !cmd.type) {\n    return false;\n  }\n  if (/C|S/.test(cmd.type) && cmd.points.length < 3) {\n    return false;\n  }\n  return true;\n}\n\nfunction getViewBox(commands) {\n  var ref;\n\n  var minX = Infinity;\n  var minY = Infinity;\n  var maxX = -Infinity;\n  var maxY = -Infinity;\n  (ref = []).concat.apply(ref, commands.map(function (ref) {\n    var points = ref.points;\n\n    return points;\n  })).forEach(function (ref) {\n    var x = ref.x;\n    var y = ref.y;\n\n    minX = Math.min(minX, x);\n    minY = Math.min(minY, y);\n    maxX = Math.max(maxX, x);\n    maxY = Math.max(maxY, y);\n  });\n  return {\n    minX: minX,\n    minY: minY,\n    width: maxX - minX,\n    height: maxY - minY,\n  };\n}\n\n/**\n * Convert S command to B command\n * Reference from https://github.com/d3/d3/blob/v3.5.17/src/svg/line.js#L259\n * @param  {Array}  points points\n * @param  {String} prev   type of previous command\n * @param  {String} next   type of next command\n * @return {Array}         converted commands\n */\nfunction s2b(points, prev, next) {\n  var results = [];\n  var bb1 = [0, 2 / 3, 1 / 3, 0];\n  var bb2 = [0, 1 / 3, 2 / 3, 0];\n  var bb3 = [0, 1 / 6, 2 / 3, 1 / 6];\n  var dot4 = function (a, b) { return (a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3]); };\n  var px = [points[points.length - 1].x, points[0].x, points[1].x, points[2].x];\n  var py = [points[points.length - 1].y, points[0].y, points[1].y, points[2].y];\n  results.push({\n    type: prev === 'M' ? 'M' : 'L',\n    points: [{ x: dot4(bb3, px), y: dot4(bb3, py) }],\n  });\n  for (var i = 3; i < points.length; i++) {\n    px = [points[i - 3].x, points[i - 2].x, points[i - 1].x, points[i].x];\n    py = [points[i - 3].y, points[i - 2].y, points[i - 1].y, points[i].y];\n    results.push({\n      type: 'C',\n      points: [\n        { x: dot4(bb1, px), y: dot4(bb1, py) },\n        { x: dot4(bb2, px), y: dot4(bb2, py) },\n        { x: dot4(bb3, px), y: dot4(bb3, py) } ],\n    });\n  }\n  if (next === 'L' || next === 'C') {\n    var last = points[points.length - 1];\n    results.push({ type: 'L', points: [{ x: last.x, y: last.y }] });\n  }\n  return results;\n}\n\nfunction toSVGPath(instructions) {\n  return instructions.map(function (ref) {\n    var type = ref.type;\n    var points = ref.points;\n\n    return (\n    type + points.map(function (ref) {\n      var x = ref.x;\n      var y = ref.y;\n\n      return (x + \",\" + y);\n    }).join(',')\n  );\n  }).join('');\n}\n\nfunction compileDrawing(rawCommands) {\n  var ref$1;\n\n  var commands = [];\n  var i = 0;\n  while (i < rawCommands.length) {\n    var arr = rawCommands[i];\n    var cmd = createCommand(arr);\n    if (isValid(cmd)) {\n      if (cmd.type === 'S') {\n        var ref = (commands[i - 1] || { points: [{ x: 0, y: 0 }] }).points.slice(-1)[0];\n        var x = ref.x;\n        var y = ref.y;\n        cmd.points.unshift({ x: x, y: y });\n      }\n      if (i) {\n        cmd.prev = commands[i - 1].type;\n        commands[i - 1].next = cmd.type;\n      }\n      commands.push(cmd);\n      i++;\n    } else {\n      if (i && commands[i - 1].type === 'S') {\n        var additionPoints = {\n          p: cmd.points,\n          c: commands[i - 1].points.slice(0, 3),\n        };\n        commands[i - 1].points = commands[i - 1].points.concat(\n          (additionPoints[arr[0]] || []).map(function (ref) {\n            var x = ref.x;\n            var y = ref.y;\n\n            return ({ x: x, y: y });\n        })\n        );\n      }\n      rawCommands.splice(i, 1);\n    }\n  }\n  var instructions = (ref$1 = []).concat.apply(\n    ref$1, commands.map(function (ref) {\n      var type = ref.type;\n      var points = ref.points;\n      var prev = ref.prev;\n      var next = ref.next;\n\n      return (\n      type === 'S'\n        ? s2b(points, prev, next)\n        : { type: type, points: points }\n    );\n  })\n  );\n\n  return assign({ instructions: instructions, d: toSVGPath(instructions) }, getViewBox(commands));\n}\n\nvar tTags = [\n  'fs', 'clip',\n  'c1', 'c2', 'c3', 'c4', 'a1', 'a2', 'a3', 'a4', 'alpha',\n  'fscx', 'fscy', 'fax', 'fay', 'frx', 'fry', 'frz', 'fr',\n  'be', 'blur', 'bord', 'xbord', 'ybord', 'shad', 'xshad', 'yshad' ];\n\nfunction compileTag(tag, key, presets) {\n  var obj, obj$1, obj$2;\n\n  if ( presets === void 0 ) presets = {};\n  var value = tag[key];\n  if (value === undefined) {\n    return null;\n  }\n  if (key === 'pos' || key === 'org') {\n    return value.length === 2 ? ( obj = {}, obj[key] = { x: value[0], y: value[1] }, obj ) : null;\n  }\n  if (key === 'move') {\n    var x1 = value[0];\n    var y1 = value[1];\n    var x2 = value[2];\n    var y2 = value[3];\n    var t1 = value[4]; if ( t1 === void 0 ) t1 = 0;\n    var t2 = value[5]; if ( t2 === void 0 ) t2 = 0;\n    return value.length === 4 || value.length === 6\n      ? { move: { x1: x1, y1: y1, x2: x2, y2: y2, t1: t1, t2: t2 } }\n      : null;\n  }\n  if (key === 'fad' || key === 'fade') {\n    if (value.length === 2) {\n      var t1$1 = value[0];\n      var t2$1 = value[1];\n      return { fade: { type: 'fad', t1: t1$1, t2: t2$1 } };\n    }\n    if (value.length === 7) {\n      var a1 = value[0];\n      var a2 = value[1];\n      var a3 = value[2];\n      var t1$2 = value[3];\n      var t2$2 = value[4];\n      var t3 = value[5];\n      var t4 = value[6];\n      return { fade: { type: 'fade', a1: a1, a2: a2, a3: a3, t1: t1$2, t2: t2$2, t3: t3, t4: t4 } };\n    }\n    return null;\n  }\n  if (key === 'clip') {\n    var inverse = value.inverse;\n    var scale = value.scale;\n    var drawing = value.drawing;\n    var dots = value.dots;\n    if (drawing) {\n      return { clip: { inverse: inverse, scale: scale, drawing: compileDrawing(drawing), dots: dots } };\n    }\n    if (dots) {\n      var x1$1 = dots[0];\n      var y1$1 = dots[1];\n      var x2$1 = dots[2];\n      var y2$1 = dots[3];\n      return { clip: { inverse: inverse, scale: scale, drawing: drawing, dots: { x1: x1$1, y1: y1$1, x2: x2$1, y2: y2$1 } } };\n    }\n    return null;\n  }\n  if (/^[xy]?(bord|shad)$/.test(key)) {\n    value = Math.max(value, 0);\n  }\n  if (key === 'bord') {\n    return { xbord: value, ybord: value };\n  }\n  if (key === 'shad') {\n    return { xshad: value, yshad: value };\n  }\n  if (/^c\\d$/.test(key)) {\n    return ( obj$1 = {}, obj$1[key] = value || presets[key], obj$1 );\n  }\n  if (key === 'alpha') {\n    return { a1: value, a2: value, a3: value, a4: value };\n  }\n  if (key === 'fr') {\n    return { frz: value };\n  }\n  if (key === 'fs') {\n    return {\n      fs: /^\\+|-/.test(value)\n        ? (value * 1 > -10 ? (1 + value / 10) : 1) * presets.fs\n        : value * 1,\n    };\n  }\n  if (key === 't') {\n    var t1$3 = value.t1;\n    var accel = value.accel;\n    var tags = value.tags;\n    var t2$3 = value.t2 || (presets.end - presets.start) * 1e3;\n    var compiledTag = {};\n    tags.forEach(function (t) {\n      var k = Object.keys(t)[0];\n      if (~tTags.indexOf(k) && !(k === 'clip' && !t[k].dots)) {\n        assign(compiledTag, compileTag(t, k, presets));\n      }\n    });\n    return { t: { t1: t1$3, t2: t2$3, accel: accel, tag: compiledTag } };\n  }\n  return ( obj$2 = {}, obj$2[key] = value, obj$2 );\n}\n\nvar a2an = [\n  null, 1, 2, 3,\n  null, 7, 8, 9,\n  null, 4, 5, 6 ];\n\nvar globalTags = ['r', 'a', 'an', 'pos', 'org', 'move', 'fade', 'fad', 'clip'];\n\nfunction createSlice(name, styles) {\n  return {\n    name: name,\n    borderStyle: styles[name].style.BorderStyle,\n    tag: styles[name].tag,\n    fragments: [],\n  };\n}\n\nfunction compileText(ref) {\n  var styles = ref.styles;\n  var name = ref.name;\n  var parsed = ref.parsed;\n  var start = ref.start;\n  var end = ref.end;\n\n  var alignment;\n  var pos;\n  var org;\n  var move;\n  var fade;\n  var clip;\n  var slices = [];\n  var slice = createSlice(name, styles);\n  var prevTag = {};\n  for (var i = 0; i < parsed.length; i++) {\n    var ref$1 = parsed[i];\n    var tags = ref$1.tags;\n    var text = ref$1.text;\n    var drawing = ref$1.drawing;\n    var reset = (void 0);\n    for (var j = 0; j < tags.length; j++) {\n      var tag = tags[j];\n      reset = tag.r === undefined ? reset : tag.r;\n    }\n    var fragment = {\n      tag: reset === undefined ? JSON.parse(JSON.stringify(prevTag)) : {},\n      text: text,\n      drawing: drawing.length ? compileDrawing(drawing) : null,\n    };\n    for (var j$1 = 0; j$1 < tags.length; j$1++) {\n      var tag$1 = tags[j$1];\n      alignment = alignment || a2an[tag$1.a || 0] || tag$1.an;\n      pos = pos || compileTag(tag$1, 'pos');\n      org = org || compileTag(tag$1, 'org');\n      move = move || compileTag(tag$1, 'move');\n      fade = fade || compileTag(tag$1, 'fade') || compileTag(tag$1, 'fad');\n      clip = compileTag(tag$1, 'clip') || clip;\n      var key = Object.keys(tag$1)[0];\n      if (key && !~globalTags.indexOf(key)) {\n        var ref$2 = slice.tag;\n        var c1 = ref$2.c1;\n        var c2 = ref$2.c2;\n        var c3 = ref$2.c3;\n        var c4 = ref$2.c4;\n        var fs = prevTag.fs || slice.tag.fs;\n        var compiledTag = compileTag(tag$1, key, { start: start, end: end, c1: c1, c2: c2, c3: c3, c4: c4, fs: fs });\n        if (key === 't') {\n          fragment.tag.t = fragment.tag.t || [];\n          fragment.tag.t.push(compiledTag.t);\n        } else {\n          assign(fragment.tag, compiledTag);\n        }\n      }\n    }\n    prevTag = fragment.tag;\n    if (reset !== undefined) {\n      slices.push(slice);\n      slice = createSlice(styles[reset] ? reset : name, styles);\n    }\n    if (fragment.text || fragment.drawing) {\n      var prev = slice.fragments[slice.fragments.length - 1] || {};\n      if (prev.text && fragment.text && !Object.keys(fragment.tag).length) {\n        // merge fragment to previous if its tag is empty\n        prev.text += fragment.text;\n      } else {\n        slice.fragments.push(fragment);\n      }\n    }\n  }\n  slices.push(slice);\n\n  return assign({ alignment: alignment, slices: slices }, pos, org, move, fade, clip);\n}\n\nfunction compileDialogues(ref) {\n  var styles = ref.styles;\n  var dialogues = ref.dialogues;\n\n  var minLayer = Infinity;\n  var results = [];\n  for (var i = 0; i < dialogues.length; i++) {\n    var dia = dialogues[i];\n    if (dia.Start >= dia.End) {\n      continue;\n    }\n    if (!styles[dia.Style]) {\n      dia.Style = 'Default';\n    }\n    var stl = styles[dia.Style].style;\n    var compiledText = compileText({\n      styles: styles,\n      name: dia.Style,\n      parsed: dia.Text.parsed,\n      start: dia.Start,\n      end: dia.End,\n    });\n    var alignment = compiledText.alignment || stl.Alignment;\n    minLayer = Math.min(minLayer, dia.Layer);\n    results.push(assign({\n      layer: dia.Layer,\n      start: dia.Start,\n      end: dia.End,\n      // reset style by `\\r` will not effect margin and alignment\n      margin: {\n        left: dia.MarginL || stl.MarginL,\n        right: dia.MarginR || stl.MarginR,\n        vertical: dia.MarginV || stl.MarginV,\n      },\n      effect: dia.Effect,\n    }, compiledText, { alignment: alignment }));\n  }\n  for (var i$1 = 0; i$1 < results.length; i$1++) {\n    results[i$1].layer -= minLayer;\n  }\n  return results.sort(function (a, b) { return a.start - b.start || a.end - b.end; });\n}\n\n// same as Aegisub\n// https://github.com/Aegisub/Aegisub/blob/master/src/ass_style.h\nvar DEFAULT_STYLE = {\n  Name: 'Default',\n  Fontname: 'Arial',\n  Fontsize: '20',\n  PrimaryColour: '&H00FFFFFF&',\n  SecondaryColour: '&H000000FF&',\n  OutlineColour: '&H00000000&',\n  BackColour: '&H00000000&',\n  Bold: '0',\n  Italic: '0',\n  Underline: '0',\n  StrikeOut: '0',\n  ScaleX: '100',\n  ScaleY: '100',\n  Spacing: '0',\n  Angle: '0',\n  BorderStyle: '1',\n  Outline: '2',\n  Shadow: '2',\n  Alignment: '2',\n  MarginL: '10',\n  MarginR: '10',\n  MarginV: '10',\n  Encoding: '1',\n};\n\n/**\n * @param {String} color\n * @returns {Array} [AA, BBGGRR]\n */\nfunction parseStyleColor(color) {\n  if (/^(&|H|&H)[0-9a-f]{6,}/i.test(color)) {\n    var ref = color.match(/&?H?([0-9a-f]{2})?([0-9a-f]{6})/i);\n    var a = ref[1];\n    var c = ref[2];\n    return [a || '00', c];\n  }\n  var num = parseInt(color, 10);\n  if (!Number.isNaN(num)) {\n    var min = -2147483648;\n    var max = 2147483647;\n    if (num < min) {\n      return ['00', '000000'];\n    }\n    var aabbggrr = (min <= num && num <= max)\n      ? (\"00000000\" + ((num < 0 ? num + 4294967296 : num).toString(16))).slice(-8)\n      : String(num).slice(0, 8);\n    return [aabbggrr.slice(0, 2), aabbggrr.slice(2)];\n  }\n  return ['00', '000000'];\n}\n\nfunction compileStyles(ref) {\n  var info = ref.info;\n  var style = ref.style;\n  var format = ref.format;\n  var defaultStyle = ref.defaultStyle;\n\n  var result = {};\n  var styles = [\n    assign({}, DEFAULT_STYLE, defaultStyle, { Name: 'Default' }) ].concat( style.map(function (stl) {\n      var s = {};\n      for (var i = 0; i < format.length; i++) {\n        s[format[i]] = stl[i];\n      }\n      return s;\n    }) );\n  var loop = function ( i ) {\n    var s = styles[i];\n    // this behavior is same as Aegisub by black-box testing\n    if (/^(\\*+)Default$/.test(s.Name)) {\n      s.Name = 'Default';\n    }\n    Object.keys(s).forEach(function (key) {\n      if (key !== 'Name' && key !== 'Fontname' && !/Colour/.test(key)) {\n        s[key] *= 1;\n      }\n    });\n    var ref$1 = parseStyleColor(s.PrimaryColour);\n    var a1 = ref$1[0];\n    var c1 = ref$1[1];\n    var ref$2 = parseStyleColor(s.SecondaryColour);\n    var a2 = ref$2[0];\n    var c2 = ref$2[1];\n    var ref$3 = parseStyleColor(s.OutlineColour);\n    var a3 = ref$3[0];\n    var c3 = ref$3[1];\n    var ref$4 = parseStyleColor(s.BackColour);\n    var a4 = ref$4[0];\n    var c4 = ref$4[1];\n    var tag = {\n      fn: s.Fontname,\n      fs: s.Fontsize,\n      c1: c1,\n      a1: a1,\n      c2: c2,\n      a2: a2,\n      c3: c3,\n      a3: a3,\n      c4: c4,\n      a4: a4,\n      b: Math.abs(s.Bold),\n      i: Math.abs(s.Italic),\n      u: Math.abs(s.Underline),\n      s: Math.abs(s.StrikeOut),\n      fscx: s.ScaleX,\n      fscy: s.ScaleY,\n      fsp: s.Spacing,\n      frz: s.Angle,\n      xbord: s.Outline,\n      ybord: s.Outline,\n      xshad: s.Shadow,\n      yshad: s.Shadow,\n      q: /^[0-3]$/.test(info.WrapStyle) ? info.WrapStyle * 1 : 2,\n    };\n    result[s.Name] = { style: s, tag: tag };\n  };\n\n  for (var i = 0; i < styles.length; i++) loop( i );\n  return result;\n}\n\nfunction compile(text, options) {\n  if ( options === void 0 ) options = {};\n\n  var tree = parse(text);\n  var styles = compileStyles({\n    info: tree.info,\n    style: tree.styles.style,\n    format: tree.styles.format,\n    defaultStyle: options.defaultStyle || {},\n  });\n  return {\n    info: tree.info,\n    width: tree.info.PlayResX * 1 || null,\n    height: tree.info.PlayResY * 1 || null,\n    collisions: tree.info.Collisions || 'Normal',\n    styles: styles,\n    dialogues: compileDialogues({\n      styles: styles,\n      dialogues: tree.events.dialogue,\n    }),\n  };\n}\n\nvar raf = (\n  window.requestAnimationFrame\n  || window.mozRequestAnimationFrame\n  || window.webkitRequestAnimationFrame\n  || (function (cb) { return setTimeout(cb, 50 / 3); })\n);\n\nvar caf = (\n  window.cancelAnimationFrame\n  || window.mozCancelAnimationFrame\n  || window.webkitCancelAnimationFrame\n  || clearTimeout\n);\n\nfunction color2rgba(c) {\n  var t = c.match(/(\\w\\w)(\\w\\w)(\\w\\w)(\\w\\w)/);\n  var a = 1 - (\"0x\" + (t[1])) / 255;\n  var b = +(\"0x\" + (t[2]));\n  var g = +(\"0x\" + (t[3]));\n  var r = +(\"0x\" + (t[4]));\n  return (\"rgba(\" + r + \",\" + g + \",\" + b + \",\" + a + \")\");\n}\n\nfunction uuid() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0;\n    var v = c === 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\nfunction createSVGEl(name, attrs) {\n  if ( attrs === void 0 ) attrs = [];\n\n  var $el = document.createElementNS('http://www.w3.org/2000/svg', name);\n  for (var i = 0; i < attrs.length; i++) {\n    var attr = attrs[i];\n    $el.setAttributeNS(\n      attr[0] === 'xlink:href' ? 'http://www.w3.org/1999/xlink' : null,\n      attr[0],\n      attr[1]\n    );\n  }\n  return $el;\n}\n\nfunction getVendor(prop) {\n  var ref = document.body;\n  var style = ref.style;\n  var Prop = prop.replace(/^\\w/, function (x) { return x.toUpperCase(); });\n  if (prop in style) { return ''; }\n  if ((\"webkit\" + Prop) in style) { return '-webkit-'; }\n  if ((\"moz\" + Prop) in style) { return '-moz-'; }\n  return '';\n}\n\nvar vendor = {\n  transform: getVendor('transform'),\n  animation: getVendor('animation'),\n  clipPath: getVendor('clipPath'),\n};\n\nfunction getStyleRoot(container) {\n  var rootNode = container.getRootNode ? container.getRootNode() : document;\n  return rootNode === document ? rootNode.head : rootNode;\n}\n\nvar strokeTags = ['c3', 'a3', 'c4', 'a4', 'xbord', 'ybord', 'xshad', 'yshad', 'blur', 'be'];\nvar transformTags = ['fscx', 'fscy', 'frx', 'fry', 'frz', 'fax', 'fay'];\n\nfunction createClipPath(clip) {\n  var sw = this._.scriptRes.width;\n  var sh = this._.scriptRes.height;\n  var d = '';\n  if (clip.dots !== null) {\n    var ref = clip.dots;\n    var x1 = ref.x1;\n    var y1 = ref.y1;\n    var x2 = ref.x2;\n    var y2 = ref.y2;\n    x1 /= sw;\n    y1 /= sh;\n    x2 /= sw;\n    y2 /= sh;\n    d = \"M\" + x1 + \",\" + y1 + \"L\" + x1 + \",\" + y2 + \",\" + x2 + \",\" + y2 + \",\" + x2 + \",\" + y1 + \"Z\";\n  }\n  if (clip.drawing !== null) {\n    d = clip.drawing.instructions.map(function (ref) {\n      var type = ref.type;\n      var points = ref.points;\n\n      return (\n      type + points.map(function (ref) {\n        var x = ref.x;\n        var y = ref.y;\n\n        return ((x / sw) + \",\" + (y / sh));\n      }).join(',')\n    );\n    }).join('');\n  }\n  var scale = 1 / (1 << (clip.scale - 1));\n  if (clip.inverse) {\n    d += \"M0,0L0,\" + scale + \",\" + scale + \",\" + scale + \",\" + scale + \",0,0,0Z\";\n  }\n  var id = \"ASS-\" + (uuid());\n  var $clipPath = createSVGEl('clipPath', [\n    ['id', id],\n    ['clipPathUnits', 'objectBoundingBox'] ]);\n  $clipPath.appendChild(createSVGEl('path', [\n    ['d', d],\n    ['transform', (\"scale(\" + scale + \")\")],\n    ['clip-rule', 'evenodd'] ]));\n  this._.$defs.appendChild($clipPath);\n  return {\n    $clipPath: $clipPath,\n    cssText: ((vendor.clipPath) + \"clip-path:url(#\" + id + \");\"),\n  };\n}\n\nfunction setClipPath(dialogue) {\n  if (!dialogue.clip) {\n    return;\n  }\n  var $fobb = document.createElement('div');\n  this._.$stage.insertBefore($fobb, dialogue.$div);\n  $fobb.appendChild(dialogue.$div);\n  $fobb.className = 'ASS-fix-objectBoundingBox';\n  var ref = createClipPath.call(this, dialogue.clip);\n  var cssText = ref.cssText;\n  var $clipPath = ref.$clipPath;\n  this._.$defs.appendChild($clipPath);\n  $fobb.style.cssText = cssText;\n  assign(dialogue, { $div: $fobb, $clipPath: $clipPath });\n}\n\nvar $fixFontSize = document.createElement('div');\n$fixFontSize.className = 'ASS-fix-font-size';\n$fixFontSize.textContent = 'M';\n\nvar cache = Object.create(null);\n\nfunction getRealFontSize(fn, fs) {\n  var key = fn + \"-\" + fs;\n  if (!cache[key]) {\n    $fixFontSize.style.cssText = \"line-height:normal;font-size:\" + fs + \"px;font-family:\\\"\" + fn + \"\\\",Arial;\";\n    cache[key] = fs * fs / $fixFontSize.clientHeight;\n  }\n  return cache[key];\n}\n\nfunction createSVGStroke(tag, id, scale) {\n  var hasBorder = tag.xbord || tag.ybord;\n  var hasShadow = tag.xshad || tag.yshad;\n  var isOpaque = tag.a1 !== 'FF';\n  var blur = tag.blur || tag.be || 0;\n  var $filter = createSVGEl('filter', [['id', id]]);\n  $filter.appendChild(createSVGEl('feGaussianBlur', [\n    ['stdDeviation', hasBorder ? 0 : blur],\n    ['in', 'SourceGraphic'],\n    ['result', 'sg_b'] ]));\n  $filter.appendChild(createSVGEl('feFlood', [\n    ['flood-color', color2rgba(tag.a1 + tag.c1)],\n    ['result', 'c1'] ]));\n  $filter.appendChild(createSVGEl('feComposite', [\n    ['operator', 'in'],\n    ['in', 'c1'],\n    ['in2', 'sg_b'],\n    ['result', 'main'] ]));\n  if (hasBorder) {\n    $filter.appendChild(createSVGEl('feMorphology', [\n      ['radius', ((tag.xbord * scale) + \" \" + (tag.ybord * scale))],\n      ['operator', 'dilate'],\n      ['in', 'SourceGraphic'],\n      ['result', 'dil'] ]));\n    $filter.appendChild(createSVGEl('feGaussianBlur', [\n      ['stdDeviation', blur],\n      ['in', 'dil'],\n      ['result', 'dil_b'] ]));\n    $filter.appendChild(createSVGEl('feComposite', [\n      ['operator', 'out'],\n      ['in', 'dil_b'],\n      ['in2', 'SourceGraphic'],\n      ['result', 'dil_b_o'] ]));\n    $filter.appendChild(createSVGEl('feFlood', [\n      ['flood-color', color2rgba(tag.a3 + tag.c3)],\n      ['result', 'c3'] ]));\n    $filter.appendChild(createSVGEl('feComposite', [\n      ['operator', 'in'],\n      ['in', 'c3'],\n      ['in2', 'dil_b_o'],\n      ['result', 'border'] ]));\n  }\n  if (hasShadow && (hasBorder || isOpaque)) {\n    $filter.appendChild(createSVGEl('feOffset', [\n      ['dx', tag.xshad * scale],\n      ['dy', tag.yshad * scale],\n      ['in', hasBorder ? 'dil' : 'SourceGraphic'],\n      ['result', 'off'] ]));\n    $filter.appendChild(createSVGEl('feGaussianBlur', [\n      ['stdDeviation', blur],\n      ['in', 'off'],\n      ['result', 'off_b'] ]));\n    if (!isOpaque) {\n      $filter.appendChild(createSVGEl('feOffset', [\n        ['dx', tag.xshad * scale],\n        ['dy', tag.yshad * scale],\n        ['in', 'SourceGraphic'],\n        ['result', 'sg_off'] ]));\n      $filter.appendChild(createSVGEl('feComposite', [\n        ['operator', 'out'],\n        ['in', 'off_b'],\n        ['in2', 'sg_off'],\n        ['result', 'off_b_o'] ]));\n    }\n    $filter.appendChild(createSVGEl('feFlood', [\n      ['flood-color', color2rgba(tag.a4 + tag.c4)],\n      ['result', 'c4'] ]));\n    $filter.appendChild(createSVGEl('feComposite', [\n      ['operator', 'in'],\n      ['in', 'c4'],\n      ['in2', isOpaque ? 'off_b' : 'off_b_o'],\n      ['result', 'shadow'] ]));\n  }\n  var $merge = createSVGEl('feMerge', []);\n  if (hasShadow && (hasBorder || isOpaque)) {\n    $merge.appendChild(createSVGEl('feMergeNode', [['in', 'shadow']]));\n  }\n  if (hasBorder) {\n    $merge.appendChild(createSVGEl('feMergeNode', [['in', 'border']]));\n  }\n  $merge.appendChild(createSVGEl('feMergeNode', [['in', 'main']]));\n  $filter.appendChild($merge);\n  return $filter;\n}\n\nfunction createCSSStroke(tag, scale) {\n  var arr = [];\n  var oc = color2rgba(tag.a3 + tag.c3);\n  var ox = tag.xbord * scale;\n  var oy = tag.ybord * scale;\n  var sc = color2rgba(tag.a4 + tag.c4);\n  var sx = tag.xshad * scale;\n  var sy = tag.yshad * scale;\n  var blur = tag.blur || tag.be || 0;\n  if (!(ox + oy + sx + sy)) { return 'none'; }\n  if (ox || oy) {\n    for (var i = -1; i <= 1; i++) {\n      for (var j = -1; j <= 1; j++) {\n        for (var x = 1; x < ox; x++) {\n          for (var y = 1; y < oy; y++) {\n            if (i || j) {\n              arr.push((oc + \" \" + (i * x) + \"px \" + (j * y) + \"px \" + blur + \"px\"));\n            }\n          }\n        }\n        arr.push((oc + \" \" + (i * ox) + \"px \" + (j * oy) + \"px \" + blur + \"px\"));\n      }\n    }\n  }\n  if (sx || sy) {\n    var pnx = sx > 0 ? 1 : -1;\n    var pny = sy > 0 ? 1 : -1;\n    sx = Math.abs(sx);\n    sy = Math.abs(sy);\n    for (var x$1 = Math.max(ox, sx - ox); x$1 < sx + ox; x$1++) {\n      for (var y$1 = Math.max(oy, sy - oy); y$1 < sy + oy; y$1++) {\n        arr.push((sc + \" \" + (x$1 * pnx) + \"px \" + (y$1 * pny) + \"px \" + blur + \"px\"));\n      }\n    }\n    arr.push((sc + \" \" + ((sx + ox) * pnx) + \"px \" + ((sy + oy) * pny) + \"px \" + blur + \"px\"));\n  }\n  return arr.join();\n}\n\nfunction createTransform(tag) {\n  return [\n    // TODO: I don't know why perspective is 314, it just performances well.\n    'perspective(314px)',\n    (\"rotateY(\" + (tag.fry || 0) + \"deg)\"),\n    (\"rotateX(\" + (tag.frx || 0) + \"deg)\"),\n    (\"rotateZ(\" + (-tag.frz || 0) + \"deg)\"),\n    (\"scale(\" + (tag.p ? 1 : (tag.fscx || 100) / 100) + \",\" + (tag.p ? 1 : (tag.fscy || 100) / 100) + \")\"),\n    (\"skew(\" + (tag.fax || 0) + \"rad,\" + (tag.fay || 0) + \"rad)\") ].join(' ');\n}\n\nfunction setTransformOrigin(dialogue) {\n  var alignment = dialogue.alignment;\n  var width = dialogue.width;\n  var height = dialogue.height;\n  var x = dialogue.x;\n  var y = dialogue.y;\n  var $div = dialogue.$div;\n  var org = dialogue.org;\n  if (!org) {\n    org = { x: 0, y: 0 };\n    if (alignment % 3 === 1) { org.x = x; }\n    if (alignment % 3 === 2) { org.x = x + width / 2; }\n    if (alignment % 3 === 0) { org.x = x + width; }\n    if (alignment <= 3) { org.y = y + height; }\n    if (alignment >= 4 && alignment <= 6) { org.y = y + height / 2; }\n    if (alignment >= 7) { org.y = y; }\n  }\n  for (var i = $div.childNodes.length - 1; i >= 0; i--) {\n    var node = $div.childNodes[i];\n    if (node.dataset.hasRotate === 'true') {\n      // It's not extremely precise for offsets are round the value to an integer.\n      var tox = org.x - x - node.offsetLeft;\n      var toy = org.y - y - node.offsetTop;\n      node.style.cssText += (vendor.transform) + \"transform-origin:\" + tox + \"px \" + toy + \"px;\";\n    }\n  }\n}\n\nfunction getKeyframeString(name, list) {\n  return (\"@\" + (vendor.animation) + \"keyframes \" + name + \" {\" + list + \"}\\n\");\n}\n\nvar KeyframeBlockList = function KeyframeBlockList() {\n  this.obj = {};\n};\n\nKeyframeBlockList.prototype.set = function set (keyText, prop, value) {\n  if (!this.obj[keyText]) { this.obj[keyText] = {}; }\n  this.obj[keyText][prop] = value;\n};\n\nKeyframeBlockList.prototype.setT = function setT (ref) {\n    var t1 = ref.t1;\n    var t2 = ref.t2;\n    var duration = ref.duration;\n    var prop = ref.prop;\n    var from = ref.from;\n    var to = ref.to;\n\n  this.set('0.000%', prop, from);\n  if (t1 < duration) {\n    this.set((((t1 / duration * 100).toFixed(3)) + \"%\"), prop, from);\n  }\n  if (t2 < duration) {\n    this.set((((t2 / duration * 100).toFixed(3)) + \"%\"), prop, to);\n  }\n  this.set('100.000%', prop, to);\n};\n\nKeyframeBlockList.prototype.toString = function toString () {\n    var this$1 = this;\n\n  return Object.keys(this.obj)\n    .map(function (keyText) { return (\n      (keyText + \"{\" + (Object.keys(this$1.obj[keyText])\n          .map(function (prop) { return (\"\" + (vendor[prop] || '') + prop + \":\" + (this$1.obj[keyText][prop]) + \";\"); })\n          .join('')) + \"}\")\n    ); })\n    .join('');\n};\n\n// TODO: multi \\t can't be merged directly\nfunction mergeT(ts) {\n  return ts.reduceRight(function (results, t) {\n    var merged = false;\n    return results\n      .map(function (r) {\n        merged = t.t1 === r.t1 && t.t2 === r.t2 && t.accel === r.accel;\n        return assign({}, r, merged ? { tag: assign({}, r.tag, t.tag) } : {});\n      })\n      .concat(merged ? [] : t);\n  }, []);\n}\n\nfunction getKeyframes() {\n  var this$1 = this;\n\n  var keyframes = '';\n  this.dialogues.forEach(function (dialogue) {\n    var start = dialogue.start;\n    var end = dialogue.end;\n    var effect = dialogue.effect;\n    var move = dialogue.move;\n    var fade = dialogue.fade;\n    var slices = dialogue.slices;\n    var duration = (end - start) * 1000;\n    var diaKbl = new KeyframeBlockList();\n    // TODO: when effect and move both exist, its behavior is weird, for now only move works.\n    if (effect && !move) {\n      var name = effect.name;\n      var delay = effect.delay;\n      var lefttoright = effect.lefttoright;\n      var y1 = effect.y1;\n      var y2 = effect.y2 || this$1._.resampledRes.height;\n      if (name === 'banner') {\n        var tx = this$1.scale * (duration / delay) * (lefttoright ? 1 : -1);\n        diaKbl.set('0.000%', 'transform', 'translateX(0)');\n        diaKbl.set('100.000%', 'transform', (\"translateX(\" + tx + \"px)\"));\n      }\n      if (/^scroll/.test(name)) {\n        var updown = /up/.test(name) ? -1 : 1;\n        var tFrom = \"translateY(\" + (this$1.scale * y1 * updown) + \"px)\";\n        var tTo = \"translateY(\" + (this$1.scale * y2 * updown) + \"px)\";\n        var dp = (y2 - y1) / (duration / delay) * 100;\n        diaKbl.set('0.000%', 'transform', tFrom);\n        if (dp < 100) {\n          diaKbl.set(((dp.toFixed(3)) + \"%\"), 'transform', tTo);\n        }\n        diaKbl.set('100.000%', 'transform', tTo);\n      }\n    }\n    if (move) {\n      var x1 = move.x1;\n      var y1$1 = move.y1;\n      var x2 = move.x2;\n      var y2$1 = move.y2;\n      var t1 = move.t1;\n      var t2 = move.t2 || duration;\n      var pos = dialogue.pos || { x: 0, y: 0 };\n      var values = [{ x: x1, y: y1$1 }, { x: x2, y: y2$1 }].map(function (ref) {\n        var x = ref.x;\n        var y = ref.y;\n\n        return (\n        (\"translate(\" + (this$1.scale * (x - pos.x)) + \"px, \" + (this$1.scale * (y - pos.y)) + \"px)\")\n      );\n      });\n      diaKbl.setT({ t1: t1, t2: t2, duration: duration, prop: 'transform', from: values[0], to: values[1] });\n    }\n    if (fade) {\n      if (fade.type === 'fad') {\n        var t1$1 = fade.t1;\n        var t2$1 = fade.t2;\n        diaKbl.set('0.000%', 'opacity', 0);\n        if (t1$1 < duration) {\n          diaKbl.set((((t1$1 / duration * 100).toFixed(3)) + \"%\"), 'opacity', 1);\n          if (t1$1 + t2$1 < duration) {\n            diaKbl.set(((((duration - t2$1) / duration * 100).toFixed(3)) + \"%\"), 'opacity', 1);\n          }\n          diaKbl.set('100.000%', 'opacity', 0);\n        } else {\n          diaKbl.set('100.000%', 'opacity', duration / t1$1);\n        }\n      } else {\n        var a1 = fade.a1;\n        var a2 = fade.a2;\n        var a3 = fade.a3;\n        var t1$2 = fade.t1;\n        var t2$2 = fade.t2;\n        var t3 = fade.t3;\n        var t4 = fade.t4;\n        var keyTexts = [t1$2, t2$2, t3, t4].map(function (t) { return (((t / duration * 100).toFixed(3)) + \"%\"); });\n        var values$1 = [a1, a2, a3].map(function (a) { return 1 - a / 255; });\n        diaKbl.set('0.000%', 'opacity', values$1[0]);\n        if (t1$2 < duration) { diaKbl.set(keyTexts[0], 'opacity', values$1[0]); }\n        if (t2$2 < duration) { diaKbl.set(keyTexts[1], 'opacity', values$1[1]); }\n        if (t3 < duration) { diaKbl.set(keyTexts[2], 'opacity', values$1[1]); }\n        if (t4 < duration) { diaKbl.set(keyTexts[3], 'opacity', values$1[2]); }\n        diaKbl.set('100.000%', 'opacity', values$1[2]);\n      }\n    }\n    var diaList = diaKbl.toString();\n    if (diaList) {\n      assign(dialogue, { animationName: (\"ASS-\" + (uuid())) });\n      keyframes += getKeyframeString(dialogue.animationName, diaList);\n    }\n    slices.forEach(function (slice) {\n      slice.fragments.forEach(function (fragment) {\n        if (!fragment.tag.t || !fragment.tag.t.length) {\n          return;\n        }\n        var kbl = new KeyframeBlockList();\n        var fromTag = assign({}, slice.tag, fragment.tag);\n        // TODO: accel is not implemented yet\n        mergeT(fragment.tag.t).forEach(function (ref) {\n          var t1 = ref.t1;\n          var t2 = ref.t2;\n          var tag = ref.tag;\n\n          if (tag.fs) {\n            var from = (this$1.scale * getRealFontSize(fromTag.fn, fromTag.fs)) + \"px\";\n            var to = (this$1.scale * getRealFontSize(tag.fn, fromTag.fs)) + \"px\";\n            kbl.setT({ t1: t1, t2: t2, duration: duration, prop: 'font-size', from: from, to: to });\n          }\n          if (tag.fsp) {\n            var from$1 = (this$1.scale * fromTag.fsp) + \"px\";\n            var to$1 = (this$1.scale * tag.fsp) + \"px\";\n            kbl.setT({ t1: t1, t2: t2, duration: duration, prop: 'letter-spacing', from: from$1, to: to$1 });\n          }\n          var hasAlpha = (\n            tag.a1 !== undefined\n            && tag.a1 === tag.a2\n            && tag.a2 === tag.a3\n            && tag.a3 === tag.a4\n          );\n          if (tag.c1 || (tag.a1 && !hasAlpha)) {\n            var from$2 = color2rgba(fromTag.a1 + fromTag.c1);\n            var to$2 = color2rgba((tag.a1 || fromTag.a1) + (tag.c1 || fromTag.c1));\n            kbl.setT({ t1: t1, t2: t2, duration: duration, prop: 'color', from: from$2, to: to$2 });\n          }\n          if (hasAlpha) {\n            var from$3 = 1 - parseInt(fromTag.a1, 16) / 255;\n            var to$3 = 1 - parseInt(tag.a1, 16) / 255;\n            kbl.setT({ t1: t1, t2: t2, duration: duration, prop: 'opacity', from: from$3, to: to$3 });\n          }\n          var hasStroke = strokeTags.some(function (x) { return (\n            tag[x] !== undefined\n            && tag[x] !== (fragment.tag[x] || slice.tag[x])\n          ); });\n          if (hasStroke) {\n            var scale = /Yes/i.test(this$1.info.ScaledBorderAndShadow) ? this$1.scale : 1;\n            var from$4 = createCSSStroke(fromTag, scale);\n            var to$4 = createCSSStroke(assign({}, fromTag, tag), scale);\n            kbl.setT({ t1: t1, t2: t2, duration: duration, prop: 'text-shadow', from: from$4, to: to$4 });\n          }\n          var hasTransfrom = transformTags.some(function (x) { return (\n            tag[x] !== undefined\n            && tag[x] !== (fragment.tag[x] || slice.tag[x])\n          ); });\n          if (hasTransfrom) {\n            var toTag = assign({}, fromTag, tag);\n            if (fragment.drawing) {\n              // scales will be handled inside svg\n              assign(toTag, {\n                p: 0,\n                fscx: ((tag.fscx || fromTag.fscx) / fromTag.fscx) * 100,\n                fscy: ((tag.fscy || fromTag.fscy) / fromTag.fscy) * 100,\n              });\n              assign(fromTag, { fscx: 100, fscy: 100 });\n            }\n            var from$5 = createTransform(fromTag);\n            var to$5 = createTransform(toTag);\n            kbl.setT({ t1: t1, t2: t2, duration: duration, prop: 'transform', from: from$5, to: to$5 });\n          }\n        });\n        var list = kbl.toString();\n        assign(fragment, { animationName: (\"ASS-\" + (uuid())) });\n        keyframes += getKeyframeString(fragment.animationName, list);\n      });\n    });\n  });\n  return keyframes;\n}\n\nfunction createAnimation(name, duration, delay) {\n  var va = vendor.animation;\n  return (\n    va + \"animation-name:\" + name + \";\"\n    + va + \"animation-duration:\" + duration + \"s;\"\n    + va + \"animation-delay:\" + delay + \"s;\"\n    + va + \"animation-timing-function:linear;\"\n    + va + \"animation-iteration-count:1;\"\n    + va + \"animation-fill-mode:forwards;\"\n  );\n}\n\nfunction createDrawing(fragment, styleTag) {\n  var tag = assign({}, styleTag, fragment.tag);\n  var ref = fragment.drawing;\n  var minX = ref.minX;\n  var minY = ref.minY;\n  var width = ref.width;\n  var height = ref.height;\n  var baseScale = this.scale / (1 << (tag.p - 1));\n  var scaleX = (tag.fscx ? tag.fscx / 100 : 1) * baseScale;\n  var scaleY = (tag.fscy ? tag.fscy / 100 : 1) * baseScale;\n  var blur = tag.blur || tag.be || 0;\n  var vbx = tag.xbord + (tag.xshad < 0 ? -tag.xshad : 0) + blur;\n  var vby = tag.ybord + (tag.yshad < 0 ? -tag.yshad : 0) + blur;\n  var vbw = width * scaleX + 2 * tag.xbord + Math.abs(tag.xshad) + 2 * blur;\n  var vbh = height * scaleY + 2 * tag.ybord + Math.abs(tag.yshad) + 2 * blur;\n  var $svg = createSVGEl('svg', [\n    ['width', vbw],\n    ['height', vbh],\n    ['viewBox', ((-vbx) + \" \" + (-vby) + \" \" + vbw + \" \" + vbh)] ]);\n  var strokeScale = /Yes/i.test(this.info.ScaledBorderAndShadow) ? this.scale : 1;\n  var filterId = \"ASS-\" + (uuid());\n  var $defs = createSVGEl('defs');\n  $defs.appendChild(createSVGStroke(tag, filterId, strokeScale));\n  $svg.appendChild($defs);\n  var symbolId = \"ASS-\" + (uuid());\n  var $symbol = createSVGEl('symbol', [\n    ['id', symbolId],\n    ['viewBox', (minX + \" \" + minY + \" \" + width + \" \" + height)] ]);\n  $symbol.appendChild(createSVGEl('path', [['d', fragment.drawing.d]]));\n  $svg.appendChild($symbol);\n  $svg.appendChild(createSVGEl('use', [\n    ['width', width * scaleX],\n    ['height', height * scaleY],\n    ['xlink:href', (\"#\" + symbolId)],\n    ['filter', (\"url(#\" + filterId + \")\")] ]));\n  $svg.style.cssText = (\n    'position:absolute;'\n    + \"left:\" + (minX * scaleX - vbx) + \"px;\"\n    + \"top:\" + (minY * scaleY - vby) + \"px;\"\n  );\n  return {\n    $svg: $svg,\n    cssText: (\"position:relative;width:\" + (width * scaleX) + \"px;height:\" + (height * scaleY) + \"px;\"),\n  };\n}\n\nfunction encodeText(text, q) {\n  return text\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\\s/g, '&nbsp;')\n    .replace(/\\\\h/g, '&nbsp;')\n    .replace(/\\\\N/g, '<br>')\n    .replace(/\\\\n/g, q === 2 ? '<br>' : '&nbsp;');\n}\n\nfunction createDialogue(dialogue) {\n  var this$1 = this;\n\n  var $div = document.createElement('div');\n  $div.className = 'ASS-dialogue';\n  var df = document.createDocumentFragment();\n  var slices = dialogue.slices;\n  var start = dialogue.start;\n  var end = dialogue.end;\n  slices.forEach(function (slice) {\n    var borderStyle = slice.borderStyle;\n    slice.fragments.forEach(function (fragment) {\n      var text = fragment.text;\n      var drawing = fragment.drawing;\n      var animationName = fragment.animationName;\n      var tag = assign({}, slice.tag, fragment.tag);\n      var cssText = 'display:inline-block;';\n      var vct = this$1.video.currentTime;\n      if (!drawing) {\n        cssText += \"font-family:\\\"\" + (tag.fn) + \"\\\",Arial;\";\n        cssText += \"font-size:\" + (this$1.scale * getRealFontSize(tag.fn, tag.fs)) + \"px;\";\n        cssText += \"color:\" + (color2rgba(tag.a1 + tag.c1)) + \";\";\n        var scale = /Yes/i.test(this$1.info.ScaledBorderAndShadow) ? this$1.scale : 1;\n        if (borderStyle === 1) {\n          cssText += \"text-shadow:\" + (createCSSStroke(tag, scale)) + \";\";\n        }\n        if (borderStyle === 3) {\n          cssText += (\n            \"background-color:\" + (color2rgba(tag.a3 + tag.c3)) + \";\"\n            + \"box-shadow:\" + (createCSSStroke(tag, scale)) + \";\"\n          );\n        }\n        cssText += tag.b ? (\"font-weight:\" + (tag.b === 1 ? 'bold' : tag.b) + \";\") : '';\n        cssText += tag.i ? 'font-style:italic;' : '';\n        cssText += (tag.u || tag.s) ? (\"text-decoration:\" + (tag.u ? 'underline' : '') + \" \" + (tag.s ? 'line-through' : '') + \";\") : '';\n        cssText += tag.fsp ? (\"letter-spacing:\" + (tag.fsp) + \"px;\") : '';\n        // TODO: (tag.q === 0) and (tag.q === 3) are not implemented yet,\n        // for now just handle it as (tag.q === 1)\n        if (tag.q === 1 || tag.q === 0 || tag.q === 3) {\n          cssText += 'word-break:break-all;white-space:normal;';\n        }\n        if (tag.q === 2) {\n          cssText += 'word-break:normal;white-space:nowrap;';\n        }\n      }\n      var hasTransfrom = transformTags.some(function (x) { return (\n        /^fsc[xy]$/.test(x) ? tag[x] !== 100 : !!tag[x]\n      ); });\n      if (hasTransfrom) {\n        cssText += (vendor.transform) + \"transform:\" + (createTransform(tag)) + \";\";\n        if (!drawing) {\n          cssText += 'transform-style:preserve-3d;word-break:normal;white-space:nowrap;';\n        }\n      }\n      if (animationName) {\n        cssText += createAnimation(animationName, end - start, Math.min(0, start - vct));\n      }\n      if (drawing && tag.pbo) {\n        var pbo = this$1.scale * -tag.pbo * (tag.fscy || 100) / 100;\n        cssText += \"vertical-align:\" + pbo + \"px;\";\n      }\n\n      var hasRotate = /\"fr[xyz]\":[^0]/.test(JSON.stringify(tag));\n      encodeText(text, tag.q).split('<br>').forEach(function (html, idx) {\n        var $span = document.createElement('span');\n        $span.dataset.hasRotate = hasRotate;\n        if (drawing) {\n          var obj = createDrawing.call(this$1, fragment, slice.tag);\n          $span.style.cssText = obj.cssText;\n          $span.appendChild(obj.$svg);\n        } else {\n          if (idx) {\n            df.appendChild(document.createElement('br'));\n          }\n          if (!html) {\n            return;\n          }\n          $span.innerHTML = html;\n        }\n        // TODO: maybe it can be optimized\n        $span.style.cssText += cssText;\n        df.appendChild($span);\n      });\n    });\n  });\n  $div.appendChild(df);\n  return $div;\n}\n\nfunction allocate(dialogue) {\n  var layer = dialogue.layer;\n  var margin = dialogue.margin;\n  var width = dialogue.width;\n  var height = dialogue.height;\n  var alignment = dialogue.alignment;\n  var end = dialogue.end;\n  var stageWidth = this.width - (this.scale * (margin.left + margin.right) | 0);\n  var stageHeight = this.height;\n  var vertical = this.scale * margin.vertical | 0;\n  var vct = this.video.currentTime * 100;\n  this._.space[layer] = this._.space[layer] || {\n    left: { width: new Uint16Array(stageHeight + 1), end: new Uint16Array(stageHeight + 1) },\n    center: { width: new Uint16Array(stageHeight + 1), end: new Uint16Array(stageHeight + 1) },\n    right: { width: new Uint16Array(stageHeight + 1), end: new Uint16Array(stageHeight + 1) },\n  };\n  var channel = this._.space[layer];\n  var align = ['right', 'left', 'center'][alignment % 3];\n  var willCollide = function (y) {\n    var lw = channel.left.width[y];\n    var cw = channel.center.width[y];\n    var rw = channel.right.width[y];\n    var le = channel.left.end[y];\n    var ce = channel.center.end[y];\n    var re = channel.right.end[y];\n    return (\n      (align === 'left' && (\n        (le > vct && lw)\n        || (ce > vct && cw && 2 * width + cw > stageWidth)\n        || (re > vct && rw && width + rw > stageWidth)\n      ))\n      || (align === 'center' && (\n        (le > vct && lw && 2 * lw + width > stageWidth)\n        || (ce > vct && cw)\n        || (re > vct && rw && 2 * rw + width > stageWidth)\n      ))\n      || (align === 'right' && (\n        (le > vct && lw && lw + width > stageWidth)\n        || (ce > vct && cw && 2 * width + cw > stageWidth)\n        || (re > vct && rw)\n      ))\n    );\n  };\n  var count = 0;\n  var result = 0;\n  var find = function (y) {\n    count = willCollide(y) ? 0 : count + 1;\n    if (count >= height) {\n      result = y;\n      return true;\n    }\n    return false;\n  };\n  if (alignment <= 3) {\n    for (var i = stageHeight - vertical - 1; i > vertical; i--) {\n      if (find(i)) { break; }\n    }\n  } else if (alignment >= 7) {\n    for (var i$1 = vertical + 1; i$1 < stageHeight - vertical; i$1++) {\n      if (find(i$1)) { break; }\n    }\n  } else {\n    for (var i$2 = (stageHeight - height) >> 1; i$2 < stageHeight - vertical; i$2++) {\n      if (find(i$2)) { break; }\n    }\n  }\n  if (alignment > 3) {\n    result -= height - 1;\n  }\n  for (var i$3 = result; i$3 < result + height; i$3++) {\n    channel[align].width[i$3] = width;\n    channel[align].end[i$3] = end * 100;\n  }\n  return result;\n}\n\nfunction getPosition(dialogue) {\n  var effect = dialogue.effect;\n  var move = dialogue.move;\n  var alignment = dialogue.alignment;\n  var width = dialogue.width;\n  var height = dialogue.height;\n  var margin = dialogue.margin;\n  var slices = dialogue.slices;\n  var x = 0;\n  var y = 0;\n  if (effect) {\n    if (effect.name === 'banner') {\n      if (alignment <= 3) { y = this.height - height - margin.vertical; }\n      if (alignment >= 4 && alignment <= 6) { y = (this.height - height) / 2; }\n      if (alignment >= 7) { y = margin.vertical; }\n      x = effect.lefttoright ? -width : this.width;\n    }\n  } else if (dialogue.pos || move) {\n    var pos = dialogue.pos || { x: 0, y: 0 };\n    if (alignment % 3 === 1) { x = this.scale * pos.x; }\n    if (alignment % 3 === 2) { x = this.scale * pos.x - width / 2; }\n    if (alignment % 3 === 0) { x = this.scale * pos.x - width; }\n    if (alignment <= 3) { y = this.scale * pos.y - height; }\n    if (alignment >= 4 && alignment <= 6) { y = this.scale * pos.y - height / 2; }\n    if (alignment >= 7) { y = this.scale * pos.y; }\n  } else {\n    if (alignment % 3 === 1) { x = 0; }\n    if (alignment % 3 === 2) { x = (this.width - width) / 2; }\n    if (alignment % 3 === 0) { x = this.width - width - this.scale * margin.right; }\n    var hasT = slices.some(function (slice) { return (\n      slice.fragments.some(function (ref) {\n        var animationName = ref.animationName;\n\n        return animationName;\n      })\n    ); });\n    if (hasT) {\n      if (alignment <= 3) { y = this.height - height - margin.vertical; }\n      if (alignment >= 4 && alignment <= 6) { y = (this.height - height) / 2; }\n      if (alignment >= 7) { y = margin.vertical; }\n    } else {\n      y = allocate.call(this, dialogue);\n    }\n  }\n  return { x: x, y: y };\n}\n\nfunction createStyle(dialogue) {\n  var layer = dialogue.layer;\n  var start = dialogue.start;\n  var end = dialogue.end;\n  var alignment = dialogue.alignment;\n  var effect = dialogue.effect;\n  var pos = dialogue.pos;\n  var margin = dialogue.margin;\n  var animationName = dialogue.animationName;\n  var width = dialogue.width;\n  var height = dialogue.height;\n  var x = dialogue.x;\n  var y = dialogue.y;\n  var vct = this.video.currentTime;\n  var cssText = '';\n  if (layer) { cssText += \"z-index:\" + layer + \";\"; }\n  if (animationName) {\n    cssText += createAnimation(animationName, end - start, Math.min(0, start - vct));\n  }\n  cssText += \"text-align:\" + (['right', 'left', 'center'][alignment % 3]) + \";\";\n  if (!effect) {\n    var mw = this.width - this.scale * (margin.left + margin.right);\n    cssText += \"max-width:\" + mw + \"px;\";\n    if (!pos) {\n      if (alignment % 3 === 1) {\n        cssText += \"margin-left:\" + (this.scale * margin.left) + \"px;\";\n      }\n      if (alignment % 3 === 0) {\n        cssText += \"margin-right:\" + (this.scale * margin.right) + \"px;\";\n      }\n      if (width > this.width - this.scale * (margin.left + margin.right)) {\n        cssText += \"margin-left:\" + (this.scale * margin.left) + \"px;\";\n        cssText += \"margin-right:\" + (this.scale * margin.right) + \"px;\";\n      }\n    }\n  }\n  cssText += \"width:\" + width + \"px;height:\" + height + \"px;left:\" + x + \"px;top:\" + y + \"px;\";\n  return cssText;\n}\n\nfunction renderer(dialogue) {\n  var $div = createDialogue.call(this, dialogue);\n  assign(dialogue, { $div: $div });\n  this._.$stage.appendChild($div);\n  var ref = $div.getBoundingClientRect();\n  var width = ref.width;\n  var height = ref.height;\n  assign(dialogue, { width: width, height: height });\n  assign(dialogue, getPosition.call(this, dialogue));\n  $div.style.cssText = createStyle.call(this, dialogue);\n  setTransformOrigin(dialogue);\n  setClipPath.call(this, dialogue);\n  return dialogue;\n}\n\nfunction framing() {\n  var vct = this.video.currentTime;\n  for (var i = this._.stagings.length - 1; i >= 0; i--) {\n    var dia = this._.stagings[i];\n    var end = dia.end;\n    if (dia.effect && /scroll/.test(dia.effect.name)) {\n      var ref = dia.effect;\n      var y1 = ref.y1;\n      var y2 = ref.y2;\n      var delay = ref.delay;\n      var duration = ((y2 || this._.resampledRes.height) - y1) / (1000 / delay);\n      end = Math.min(end, dia.start + duration);\n    }\n    if (end < vct) {\n      this._.$stage.removeChild(dia.$div);\n      if (dia.$clipPath) {\n        this._.$defs.removeChild(dia.$clipPath);\n      }\n      this._.stagings.splice(i, 1);\n    }\n  }\n  var dias = this.dialogues;\n  while (\n    this._.index < dias.length\n    && vct >= dias[this._.index].start\n  ) {\n    if (vct < dias[this._.index].end) {\n      var dia$1 = renderer.call(this, dias[this._.index]);\n      this._.stagings.push(dia$1);\n    }\n    ++this._.index;\n  }\n}\n\nfunction play() {\n  var this$1 = this;\n\n  var frame = function () {\n    framing.call(this$1);\n    this$1._.requestId = raf(frame);\n  };\n  caf(this._.requestId);\n  this._.requestId = raf(frame);\n  this._.$stage.classList.remove('ASS-animation-paused');\n  return this;\n}\n\nfunction pause() {\n  caf(this._.requestId);\n  this._.requestId = 0;\n  this._.$stage.classList.add('ASS-animation-paused');\n  return this;\n}\n\nfunction clear() {\n  while (this._.$stage.lastChild) {\n    this._.$stage.removeChild(this._.$stage.lastChild);\n  }\n  while (this._.$defs.lastChild) {\n    this._.$defs.removeChild(this._.$defs.lastChild);\n  }\n  this._.stagings = [];\n  this._.space = [];\n}\n\nfunction seek() {\n  var vct = this.video.currentTime;\n  var dias = this.dialogues;\n  clear.call(this);\n  this._.index = (function () {\n    var from = 0;\n    var to = dias.length - 1;\n    while (from + 1 < to && vct > dias[(to + from) >> 1].end) {\n      from = (to + from) >> 1;\n    }\n    if (!from) { return 0; }\n    for (var i = from; i < to; i++) {\n      if (\n        dias[i].end > vct && vct >= dias[i].start\n        || (i && dias[i - 1].end < vct && vct < dias[i].start)\n      ) {\n        return i;\n      }\n    }\n    return to;\n  })();\n  framing.call(this);\n}\n\nfunction bindEvents() {\n  var l = this._.listener;\n  l.play = play.bind(this);\n  l.pause = pause.bind(this);\n  l.seeking = seek.bind(this);\n  this.video.addEventListener('play', l.play);\n  this.video.addEventListener('pause', l.pause);\n  this.video.addEventListener('seeking', l.seeking);\n}\n\nfunction unbindEvents() {\n  var l = this._.listener;\n  this.video.removeEventListener('play', l.play);\n  this.video.removeEventListener('pause', l.pause);\n  this.video.removeEventListener('seeking', l.seeking);\n  l.play = null;\n  l.pause = null;\n  l.seeking = null;\n}\n\nfunction resize() {\n  var cw = this.video.clientWidth;\n  var ch = this.video.clientHeight;\n  var vw = this.video.videoWidth || cw;\n  var vh = this.video.videoHeight || ch;\n  var sw = this._.scriptRes.width;\n  var sh = this._.scriptRes.height;\n  var rw = sw;\n  var rh = sh;\n  var videoScale = Math.min(cw / vw, ch / vh);\n  if (this.resampling === 'video_width') {\n    rh = sw / vw * vh;\n  }\n  if (this.resampling === 'video_height') {\n    rw = sh / vh * vw;\n  }\n  this.scale = Math.min(cw / rw, ch / rh);\n  if (this.resampling === 'script_width') {\n    this.scale = videoScale * (vw / rw);\n  }\n  if (this.resampling === 'script_height') {\n    this.scale = videoScale * (vh / rh);\n  }\n  this.width = this.scale * rw;\n  this.height = this.scale * rh;\n  this._.resampledRes = { width: rw, height: rh };\n\n  this.container.style.cssText = \"width:\" + cw + \"px;height:\" + ch + \"px;\";\n  var cssText = (\n    \"width:\" + (this.width) + \"px;\"\n    + \"height:\" + (this.height) + \"px;\"\n    + \"top:\" + ((ch - this.height) / 2) + \"px;\"\n    + \"left:\" + ((cw - this.width) / 2) + \"px;\"\n  );\n  this._.$stage.style.cssText = cssText;\n  this._.$svg.style.cssText = cssText;\n  this._.$svg.setAttributeNS(null, 'viewBox', (\"0 0 \" + sw + \" \" + sh));\n\n  this._.$animation.innerHTML = getKeyframes.call(this);\n  seek.call(this);\n\n  return this;\n}\n\nvar GLOBAL_CSS = '.ASS-container,.ASS-stage{position:relative;overflow:hidden}.ASS-container video{position:absolute;top:0;left:0}.ASS-stage{pointer-events:none;position:absolute}.ASS-dialogue{font-size:0;position:absolute}.ASS-fix-font-size{position:absolute;visibility:hidden}.ASS-fix-objectBoundingBox{width:100%;height:100%;position:absolute;top:0;left:0}.ASS-animation-paused *{-webkit-animation-play-state:paused!important;animation-play-state:paused!important}';\n\nfunction init(source, video, options) {\n  if ( options === void 0 ) options = {};\n\n  this.scale = 1;\n\n  // private variables\n  this._ = {\n    index: 0,\n    stagings: [],\n    space: [],\n    listener: {},\n    $svg: createSVGEl('svg'),\n    $defs: createSVGEl('defs'),\n    $stage: document.createElement('div'),\n    $animation: document.createElement('style'),\n  };\n  this._.$svg.appendChild(this._.$defs);\n  this._.$stage.className = 'ASS-stage ASS-animation-paused';\n\n  this._.resampling = options.resampling || 'video_height';\n\n  this.container = options.container || document.createElement('div');\n  this.container.classList.add('ASS-container');\n  this.container.appendChild($fixFontSize);\n  this.container.appendChild(this._.$svg);\n  this._.hasInitContainer = !!options.container;\n\n  this.video = video;\n  bindEvents.call(this);\n  if (!this._.hasInitContainer) {\n    var isPlaying = !video.paused;\n    video.parentNode.insertBefore(this.container, video);\n    this.container.appendChild(video);\n    if (isPlaying && video.paused) {\n      video.play();\n    }\n  }\n  this.container.appendChild(this._.$stage);\n\n  var ref = compile(source);\n  var info = ref.info;\n  var width = ref.width;\n  var height = ref.height;\n  var dialogues = ref.dialogues;\n  this.info = info;\n  this._.scriptRes = {\n    width: width || video.videoWidth,\n    height: height || video.videoHeight,\n  };\n  this.dialogues = dialogues;\n\n  var styleRoot = getStyleRoot(this.container);\n  var $style = styleRoot.querySelector('#ASS-global-style');\n  if (!$style) {\n    $style = document.createElement('style');\n    $style.type = 'text/css';\n    $style.id = 'ASS-global-style';\n    $style.appendChild(document.createTextNode(GLOBAL_CSS));\n    styleRoot.appendChild($style);\n  }\n  this._.$animation.type = 'text/css';\n  this._.$animation.className = 'ASS-animation';\n  styleRoot.appendChild(this._.$animation);\n\n  resize.call(this);\n\n  if (!this.video.paused) {\n    seek.call(this);\n    play.call(this);\n  }\n\n  return this;\n}\n\nfunction show() {\n  this._.$stage.style.visibility = 'visible';\n  return this;\n}\n\nfunction hide() {\n  this._.$stage.style.visibility = 'hidden';\n  return this;\n}\n\nfunction destroy() {\n  pause.call(this);\n  clear.call(this);\n  unbindEvents.call(this, this._.listener);\n\n  var styleRoot = getStyleRoot(this.container);\n  if (!this._.hasInitContainer) {\n    var isPlay = !this.video.paused;\n    this.container.parentNode.insertBefore(this.video, this.container);\n    this.container.parentNode.removeChild(this.container);\n    if (isPlay && this.video.paused) {\n      this.video.play();\n    }\n  }\n  styleRoot.removeChild(this._.$animation);\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (var key in this) {\n    if (Object.prototype.hasOwnProperty.call(this, key)) {\n      this[key] = null;\n    }\n  }\n\n  return this;\n}\n\nvar regex = /^(video|script)_(width|height)$/;\n\nfunction getter() {\n  return regex.test(this._.resampling) ? this._.resampling : 'video_height';\n}\n\nfunction setter(r) {\n  if (r === this._.resampling) { return r; }\n  if (regex.test(r)) {\n    this._.resampling = r;\n    this.resize();\n  }\n  return this._.resampling;\n}\n\nvar ASS = function ASS(source, video, options) {\n  if (typeof source !== 'string') {\n    return this;\n  }\n  return init.call(this, source, video, options);\n};\n\nvar prototypeAccessors = { resampling: { configurable: true } };\n\nASS.prototype.resize = function resize$1 () {\n  return resize.call(this);\n};\n\nASS.prototype.show = function show$1 () {\n  return show.call(this);\n};\n\nASS.prototype.hide = function hide$1 () {\n  return hide.call(this);\n};\n\nASS.prototype.destroy = function destroy$1 () {\n  return destroy.call(this);\n};\n\nprototypeAccessors.resampling.get = function () {\n  return getter.call(this);\n};\n\nprototypeAccessors.resampling.set = function (r) {\n  return setter.call(this, r);\n};\n\nObject.defineProperties( ASS.prototype, prototypeAccessors );\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ASS);\n\n\n//# sourceURL=webpack://MultitrackJS/./node_modules/assjs/dist/ass.esm.js?");

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/style.scss":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/style.scss ***!
  \*****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.i, \"*[application-name=multitrack-js] {\\n  width: 640px;\\n  height: 360px;\\n  font-family: -apple-system, BlinkMacSystemFont, Roboto, Open Sans, Helvetica Neue, \\\"Noto Sans Armenian\\\", \\\"Noto Sans Bengali\\\", \\\"Noto Sans Cherokee\\\", \\\"Noto Sans Devanagari\\\", \\\"Noto Sans Ethiopic\\\", \\\"Noto Sans Georgian\\\", \\\"Noto Sans Hebrew\\\", \\\"Noto Sans Kannada\\\", \\\"Noto Sans Khmer\\\", \\\"Noto Sans Lao\\\", \\\"Noto Sans Osmanya\\\", \\\"Noto Sans Tamil\\\", \\\"Noto Sans Telugu\\\", \\\"Noto Sans Thai\\\", sans-serif;\\n  font-size: 1rem;\\n  position: relative;\\n  background: black;\\n  color: white;\\n  user-select: none;\\n  -moz-user-select: none;\\n  -webkit-user-select: none;\\n}\\n*[application-name=multitrack-js] video,\\n*[application-name=multitrack-js] #subtitles {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n}\\n*[application-name=multitrack-js] div[name=settings] {\\n  display: none;\\n  font-size: 0.75em;\\n  position: absolute;\\n  bottom: 64px;\\n  right: 8px;\\n  max-width: 300px;\\n  width: 100%;\\n  max-height: calc(100% - 128px);\\n  background-color: rgba(0, 0, 0, 0.75);\\n  overflow: hidden;\\n}\\n*[application-name=multitrack-js] div[name=settings] div[name=settingsHeader] {\\n  display: flex;\\n  background: white;\\n  color: black;\\n  padding: 0px 12px;\\n  width: 100%;\\n  line-height: 32px;\\n  height: 32px;\\n  overflow: hidden;\\n  box-sizing: border-box;\\n}\\n*[application-name=multitrack-js] div[name=settings] div[name=settingsBody] > div {\\n  padding: 8px 0px;\\n}\\n*[application-name=multitrack-js] div[name=settings] div[name=settingsBody] *[name=listEl] {\\n  display: block;\\n  height: 32px;\\n  width: 100%;\\n  box-sizing: border-box;\\n  display: flex;\\n  padding: 0px 12px;\\n  line-height: 32px;\\n  color: white;\\n  text-decoration: none;\\n  cursor: pointer;\\n  transition: 0.3s background;\\n  overflow: hidden;\\n  word-break: break-all;\\n}\\n*[application-name=multitrack-js] div[name=settings] div[name=settingsBody] *[name=listEl]:hover {\\n  background-color: rgba(255, 255, 255, 0.25);\\n}\\n*[application-name=multitrack-js] div[name=settings] div[name=settingsBody] *[name=listEl][selected=true] {\\n  background-color: rgba(255, 255, 255, 0.5);\\n}\\n*[application-name=multitrack-js] div[name=settings] div[name=settingsBody] div[blockname=info] {\\n  padding: 12px;\\n}\\n*[application-name=multitrack-js] div[name=overlay] {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  background: linear-gradient(to top, rgba(0, 0, 0, 0.75) 0px, rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.375), rgba(0, 0, 0, 0.15), rgba(0, 0, 0, 0) 96px), linear-gradient(to bottom, rgba(0, 0, 0, 0.75) 0px, rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.375), rgba(0, 0, 0, 0.15), rgba(0, 0, 0, 0) 96px);\\n  transition: 0.3s opacity, 0.3s visibility;\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] {\\n  position: absolute;\\n  left: 0;\\n  bottom: 38px;\\n  width: -webkit-fill-available;\\n  width: -moz-available;\\n  width: fill-available;\\n  height: 16px;\\n  margin: 0px 8px;\\n  box-sizing: border-box;\\n  cursor: pointer;\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] div[name=timeline-popup] {\\n  position: absolute;\\n  bottom: 16px;\\n  padding: 2px;\\n  border-radius: 2px;\\n  background-color: rgba(0, 0, 0, 0.5);\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] div[name=timeline-popup] div[name=timeline-popup-image] {\\n  width: 128px;\\n  height: 72px;\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] div[name=timeline-popup] div[name=timeline-popup-time] {\\n  width: max-content;\\n  font-size: 12px;\\n  margin: 0 auto;\\n  padding: 4px;\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=progress-all]:hover div[name=progress-played]::before {\\n  display: block;\\n  content: \\\" \\\";\\n  width: 12px;\\n  height: 12px;\\n  border-radius: 50%;\\n  position: absolute;\\n  top: 50%;\\n  right: 0;\\n  transform: translateX(50%) translateY(-50%);\\n  background-color: white;\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=progress-all]:hover div[name=progress-line],\\n*[application-name=multitrack-js] div[name=overlay] div[name=progress-all]:hover canvas[name=progress-loaded],\\n*[application-name=multitrack-js] div[name=overlay] div[name=progress-all]:hover div[name=progress-played] {\\n  height: 6px;\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] div[name=progress-line],\\n*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] canvas[name=progress-loaded],\\n*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] div[name=progress-played] {\\n  position: absolute;\\n  transform: translateY(-50%);\\n  top: 50%;\\n  left: 0;\\n  height: 4px;\\n  width: 100%;\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] div[name=progress-played] {\\n  width: 0%;\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] div[name=progress-line] {\\n  background-color: rgba(255, 255, 255, 0.25);\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] canvas[name=progress-loaded] {\\n  opacity: 0.5;\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=progress-all] div[name=progress-played] {\\n  background-color: white;\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=volumebar-all] {\\n  position: relative;\\n  width: 60px;\\n  height: 100%;\\n  margin: 0 4px;\\n  box-sizing: border-box;\\n  cursor: pointer;\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=volumebar-all] div[name=volumebar-line],\\n*[application-name=multitrack-js] div[name=overlay] div[name=volumebar-all] div[name=volumebar-selected] {\\n  position: absolute;\\n  transform: translateY(-50%);\\n  top: 50%;\\n  left: 0;\\n  height: 4px;\\n  width: 100%;\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=volumebar-all] div[name=volumebar-line] {\\n  background-color: rgba(255, 255, 255, 0.25);\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=volumebar-all] div[name=volumebar-selected] {\\n  background-color: white;\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=volumebar-all] div[name=volumebar-selected]::before {\\n  display: block;\\n  content: \\\" \\\";\\n  width: 12px;\\n  height: 12px;\\n  border-radius: 50%;\\n  position: absolute;\\n  top: 50%;\\n  right: 0;\\n  transform: translateX(50%) translateY(-50%);\\n  background-color: white;\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=overlay-top],\\n*[application-name=multitrack-js] div[name=overlay] div[name=overlay-bottom] {\\n  display: flex;\\n  position: absolute;\\n  left: 0;\\n  width: 100%;\\n  height: 44px;\\n  padding: 4px;\\n  box-sizing: border-box;\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=overlay-top] {\\n  top: 0;\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=overlay-bottom] {\\n  bottom: 0;\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=title] {\\n  flex: auto;\\n  line-height: 36px;\\n  padding: 0 8px;\\n  box-sizing: border-box;\\n}\\n*[application-name=multitrack-js] div[name=overlay] div[name=time] {\\n  padding: 0px 8px;\\n  line-height: 36px;\\n  font-size: 12px;\\n}\\n*[application-name=multitrack-js] button {\\n  display: block;\\n  border: none;\\n  margin: none;\\n  padding: 6px;\\n  width: 24px;\\n  height: 24px;\\n  box-sizing: content-box;\\n  background-color: transparent;\\n  background-position: 50%;\\n  background-repeat: no-repeat;\\n  cursor: pointer;\\n}\\n*[application-name=multitrack-js] button[hidden] {\\n  display: none;\\n}\\n*[application-name=multitrack-js] button[name=playBtn] {\\n  padding: 6px 11px;\\n  background-image: url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='M8 5v14l11-7z' fill='white'/%3E%3C/svg%3E\\\");\\n}\\n*[application-name=multitrack-js] button[name=pauseBtn] {\\n  padding: 6px 11px;\\n  background-image: url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='M6 19h4V5H6v14zm8-14v14h4V5h-4z' fill='white'/%3E%3C/svg%3E\\\");\\n}\\n*[application-name=multitrack-js] button[name=backward10] {\\n  background-image: url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' enable-background='new 0 0 24 24' height='24' viewBox='0 0 24 24' width='24'%3E%3Cg%3E%3Cg%3E%3Cpath d='M11.99,5V1l-5,5l5,5V7c3.31,0,6,2.69,6,6s-2.69,6-6,6s-6-2.69-6-6h-2c0,4.42,3.58,8,8,8s8-3.58,8-8S16.41,5,11.99,5z' fill='white'/%3E%3Cg%3E%3Cpath d='M10.89,16h-0.85v-3.26l-1.01,0.31v-0.69l1.77-0.63h0.09V16z' fill='white'/%3E%3Cpath d='M15.17,14.24c0,0.32-0.03,0.6-0.1,0.82s-0.17,0.42-0.29,0.57s-0.28,0.26-0.45,0.33s-0.37,0.1-0.59,0.1 s-0.41-0.03-0.59-0.1s-0.33-0.18-0.46-0.33s-0.23-0.34-0.3-0.57s-0.11-0.5-0.11-0.82V13.5c0-0.32,0.03-0.6,0.1-0.82 s0.17-0.42,0.29-0.57s0.28-0.26,0.45-0.33s0.37-0.1,0.59-0.1s0.41,0.03,0.59,0.1c0.18,0.07,0.33,0.18,0.46,0.33 s0.23,0.34,0.3,0.57s0.11,0.5,0.11,0.82V14.24z M14.32,13.38c0-0.19-0.01-0.35-0.04-0.48s-0.07-0.23-0.12-0.31 s-0.11-0.14-0.19-0.17s-0.16-0.05-0.25-0.05s-0.18,0.02-0.25,0.05s-0.14,0.09-0.19,0.17s-0.09,0.18-0.12,0.31 s-0.04,0.29-0.04,0.48v0.97c0,0.19,0.01,0.35,0.04,0.48s0.07,0.24,0.12,0.32s0.11,0.14,0.19,0.17s0.16,0.05,0.25,0.05 s0.18-0.02,0.25-0.05s0.14-0.09,0.19-0.17s0.09-0.19,0.11-0.32s0.04-0.29,0.04-0.48V13.38z' fill='white'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\\\");\\n}\\n*[application-name=multitrack-js] button[name=forward10] {\\n  background-image: url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' enable-background='new 0 0 24 24' height='24' viewBox='0 0 24 24' width='24'%3E%3Cg%3E%3Cg%3E%3Cpath fill='white' d='M18,13c0,3.31-2.69,6-6,6s-6-2.69-6-6s2.69-6,6-6v4l5-5l-5-5v4c-4.42,0-8,3.58-8,8c0,4.42,3.58,8,8,8s8-3.58,8-8H18z'/%3E%3Cpolygon points='10.86,15.94 10.86,11.67 10.77,11.67 9,12.3 9,12.99 10.01,12.68 10.01,15.94' fill='white'/%3E%3Cpath d='M12.25,13.44v0.74c0,1.9,1.31,1.82,1.44,1.82c0.14,0,1.44,0.09,1.44-1.82v-0.74c0-1.9-1.31-1.82-1.44-1.82 C13.55,11.62,12.25,11.53,12.25,13.44z M14.29,13.32v0.97c0,0.77-0.21,1.03-0.59,1.03c-0.38,0-0.6-0.26-0.6-1.03v-0.97 c0-0.75,0.22-1.01,0.59-1.01C14.07,12.3,14.29,12.57,14.29,13.32z' fill='white'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\\\");\\n}\\n*[application-name=multitrack-js] button[name=fullscreenOn] {\\n  background-image: url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z' fill='white'/%3E%3C/svg%3E\\\");\\n}\\n*[application-name=multitrack-js] button[name=fullscreenOff] {\\n  background-image: url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z' fill='white'/%3E%3C/svg%3E\\\");\\n}\\n*[application-name=multitrack-js] button[name=pipOn] {\\n  background-image: url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='M19 7h-8v6h8V7zm2-4H3c-1.1 0-2 .9-2 2v14c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98V5c0-1.1-.9-2-2-2zm0 16.01H3V4.98h18v14.03z' fill='white'/%3E%3C/svg%3E\\\");\\n}\\n*[application-name=multitrack-js] button[name=pipOff] {\\n  background-image: url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z' fill='white'/%3E%3C/svg%3E\\\");\\n}\\n*[application-name=multitrack-js] button[name=volume][icon=\\\"0\\\"] {\\n  background-image: url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z' fill='white'/%3E%3C/svg%3E\\\");\\n}\\n*[application-name=multitrack-js] button[name=volume][icon=\\\"1\\\"] {\\n  background-image: url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='m 3,9 v 6 h 4 l 5,5 V 4 L 7,9 Z' fill='white'/%3E%3C/svg%3E\\\");\\n}\\n*[application-name=multitrack-js] button[name=volume][icon=\\\"2\\\"] {\\n  background-image: url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='m 3,9 v 6 h 4 l 5,5 V 4 L 7,9 Z m 13.5,3 C 16.5,10.23 15.48,8.71 14,7.97 v 8.05 c 1.48,-0.73 2.5,-2.25 2.5,-4.02 z' fill='white'/%3E%3C/svg%3E\\\");\\n}\\n*[application-name=multitrack-js] button[name=volume][icon=\\\"3\\\"] {\\n  background-image: url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z' fill='white'/%3E%3C/svg%3E\\\");\\n}\\n*[application-name=multitrack-js] button[name=menu] {\\n  background-image: url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' enable-background='new 0 0 24 24' height='24' viewBox='0 0 24 24' width='24'%3E%3Cg%3E%3Cpath d='M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z' fill='white'/%3E%3C/g%3E%3C/svg%3E\\\");\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n\n\n//# sourceURL=webpack://MultitrackJS/./src/style.scss?./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js");

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}\n\n//# sourceURL=webpack://MultitrackJS/./node_modules/css-loader/dist/runtime/api.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce =  true ? __webpack_require__.nc : undefined;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};\n\n//# sourceURL=webpack://MultitrackJS/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("const MultitrackJS = __webpack_require__(/*! ./multitrack.js */ \"./src/multitrack.js\").default;\nmodule.exports = MultitrackJS;\n\n\n//# sourceURL=webpack://MultitrackJS/./src/index.js?");

/***/ }),

/***/ "./src/internal/gui.js":
/*!*****************************!*\
  !*** ./src/internal/gui.js ***!
  \*****************************/
/*! exports provided: gui */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"gui\", function() { return gui; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./src/internal/utils.js\");\n/* harmony import */ var _gui_hotkeys__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./gui/hotkeys */ \"./src/internal/gui/hotkeys.js\");\n/* harmony import */ var _gui_gestures__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./gui/gestures */ \"./src/internal/gui/gestures.js\");\n/* harmony import */ var _gui_windowFocus__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./gui/windowFocus */ \"./src/internal/gui/windowFocus.js\");\n/* harmony import */ var _gui_video__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./gui/video */ \"./src/internal/gui/video.js\");\n/* harmony import */ var _gui_audio__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./gui/audio */ \"./src/internal/gui/audio.js\");\n/* harmony import */ var _gui_volume__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./gui/volume */ \"./src/internal/gui/volume.js\");\n/* harmony import */ var _gui_settings__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./gui/settings */ \"./src/internal/gui/settings.js\");\n/* harmony import */ var _gui_progressbar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./gui/progressbar */ \"./src/internal/gui/progressbar.js\");\n/* harmony import */ var _gui_buttons__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./gui/buttons */ \"./src/internal/gui/buttons.js\");\n/* harmony import */ var _gui_overlay__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./gui/overlay */ \"./src/internal/gui/overlay.js\");\n\n\n\n\n\n\n\n\n\n\n\n\nfunction gui() {\n    this._.form = {};\n    // Генерация элементов GUI\n    _gui_video__WEBPACK_IMPORTED_MODULE_4__[\"generateVideo\"].call(this);\n    _gui_audio__WEBPACK_IMPORTED_MODULE_5__[\"generateAudio\"].call(this);\n\n    this._.form.subtitles = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\", {\n        id: \"subtitles\",\n    });\n    this._.form.time = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n        \"div\",\n        {\n            name: \"time\",\n        },\n        (el) => {\n            el.innerText = \"--:-- / --:--\";\n        }\n    );\n    this._.form.title = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\", {\n        name: \"title\",\n    });\n\n    // Кнопки (массив)\n    _gui_buttons__WEBPACK_IMPORTED_MODULE_9__[\"generateButtons\"].call(this);\n    _gui_progressbar__WEBPACK_IMPORTED_MODULE_8__[\"generateProgressbar\"].call(this);\n    _gui_volume__WEBPACK_IMPORTED_MODULE_6__[\"generateVolume\"].call(this);\n    _gui_settings__WEBPACK_IMPORTED_MODULE_7__[\"generateSettings\"].call(this);\n    _gui_overlay__WEBPACK_IMPORTED_MODULE_10__[\"generateOverlay\"].call(this);\n\n    this._.element.appendChild(this._.form.video);\n    this._.element.appendChild(this._.form.audio);\n    this._.element.appendChild(this._.form.subtitles);\n    this._.element.appendChild(this._.form.overlays._root);\n    this._.element.appendChild(this._.form.settings._root);\n\n    _gui_gestures__WEBPACK_IMPORTED_MODULE_2__[\"gestures\"].call(this);\n    _gui_hotkeys__WEBPACK_IMPORTED_MODULE_1__[\"hotkeys\"].call(this);\n    _gui_windowFocus__WEBPACK_IMPORTED_MODULE_3__[\"windowFocus\"].call(this);\n}\n\n\n//# sourceURL=webpack://MultitrackJS/./src/internal/gui.js?");

/***/ }),

/***/ "./src/internal/gui/audio.js":
/*!***********************************!*\
  !*** ./src/internal/gui/audio.js ***!
  \***********************************/
/*! exports provided: generateAudio */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"generateAudio\", function() { return generateAudio; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/internal/utils.js\");\n/* harmony import */ var _playback__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../playback */ \"./src/internal/playback.js\");\n\n\n\nfunction generateAudio() {\n    this._.form.audio = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"audio\", {}, (el) => {\n        // Обработка событий плей/пауза\n        el._onplaying = () => {\n            _playback__WEBPACK_IMPORTED_MODULE_1__[\"changePlaying\"].call(this, true);\n        };\n        el.onplaying = el._onplaying;\n        el._onpause = () => {\n            _playback__WEBPACK_IMPORTED_MODULE_1__[\"changePlaying\"].call(this, false);\n        };\n        el.onpause = el._onpause;\n        // Обработка событий загрузки\n        el.onwaiting = () => {\n            _playback__WEBPACK_IMPORTED_MODULE_1__[\"changeIsWaitingAudio\"].call(this, true);\n        };\n        el.oncanplay = () => {\n            _playback__WEBPACK_IMPORTED_MODULE_1__[\"changeIsWaitingAudio\"].call(this, false);\n        };\n        // Остальные обработчики событий\n        el.ontimeupdate = () => {\n            this.currentTime = el.currentTime;\n            if (!this._.form.progressbar.updateStyle)\n                this._.form.progressbar.played.setAttribute(\n                    \"style\",\n                    `width: ${(100 * el.currentTime) / this.duration}%`\n                );\n            this._.form.time.innerText = `${_utils__WEBPACK_IMPORTED_MODULE_0__[\"secondsToTime\"].call(\n                this,\n                el.currentTime\n            )} / ${_utils__WEBPACK_IMPORTED_MODULE_0__[\"secondsToTime\"].call(this, this.duration)}`;\n        };\n    });\n}\n\n\n//# sourceURL=webpack://MultitrackJS/./src/internal/gui/audio.js?");

/***/ }),

/***/ "./src/internal/gui/buttons.js":
/*!*************************************!*\
  !*** ./src/internal/gui/buttons.js ***!
  \*************************************/
/*! exports provided: toggleFullscreen, generateButtons */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"toggleFullscreen\", function() { return toggleFullscreen; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"generateButtons\", function() { return generateButtons; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/internal/utils.js\");\n/* harmony import */ var _gui_settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../gui/settings */ \"./src/internal/gui/settings.js\");\n\n\n\nfunction toggleFullscreen() {\n    if (\n        document.fullscreenElement ||\n        document.webkitFullscreenElement ||\n        document.mozFullScreenElement ||\n        document.msFullscreenElement\n    ) {\n        if (document.exitFullscreen) {\n            document.exitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n            document.mozCancelFullScreen();\n        } else if (document.webkitExitFullscreen) {\n            document.webkitExitFullscreen();\n        } else if (document.msExitFullscreen) {\n            document.msExitFullscreen();\n        }\n        this._.form.buttons.fullscreen.setAttribute(\"name\", \"fullscreenOn\");\n    } else {\n        var element = this._.element;\n        if (element.requestFullscreen) {\n            element.requestFullscreen();\n        } else if (element.mozRequestFullScreen) {\n            element.mozRequestFullScreen();\n        } else if (element.webkitRequestFullscreen) {\n            element.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n        } else if (element.msRequestFullscreen) {\n            element.msRequestFullscreen();\n        }\n        this._.form.buttons.fullscreen.setAttribute(\"name\", \"fullscreenOff\");\n    }\n}\n\nfunction generateButtons() {\n    this._.form.buttons = {\n        // Плей/пауза\n        play: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n            \"button\",\n            {\n                name: \"playBtn\",\n            },\n            (el) => {\n                el.onclick = () => {\n                    this.playing ? this.pause() : this.play();\n                };\n            }\n        ),\n        // Отмотать на 10 секунд\n        backward10: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n            \"button\",\n            {\n                name: \"backward10\",\n            },\n            (el) => {\n                el.onclick = () => {\n                    this.rewind(-10);\n                };\n            }\n        ),\n        // Перемотать на 10 секунд\n        forward10: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n            \"button\",\n            {\n                name: \"forward10\",\n            },\n            (el) => {\n                el.onclick = () => {\n                    this.rewind(10);\n                };\n            }\n        ),\n        // Кнопка полного экрана\n        fullscreen: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n            \"button\",\n            {\n                name: \"fullscreenOn\",\n            },\n            (el) => {\n                el.onclick = (btn) => {\n                    toggleFullscreen.call(this);\n                };\n            }\n        ),\n        // Кнопка режима \"Картинка-в-картинке\"\n        pip: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n            \"button\",\n            {\n                name: \"pipOn\",\n            },\n            (el) => {\n                el.onclick = (btn) => {\n                    if (\"pictureInPictureEnabled\" in document) {\n                        if (\n                            this._.form.video !==\n                            document.pictureInPictureElement\n                        ) {\n                            this._.form.video.requestPictureInPicture();\n                            el.setAttribute(\"name\", \"pipOff\");\n                        } else {\n                            document.exitPictureInPicture();\n                            el.setAttribute(\"name\", \"pipOn\");\n                        }\n                    } else {\n                        _utils__WEBPACK_IMPORTED_MODULE_0__[\"logError\"].call(\n                            this,\n                            \"Sorry, your browser is not support picture-in-picture\"\n                        );\n                    }\n                };\n            }\n        ),\n        // Открыть меню\n        menu: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n            \"button\",\n            {\n                name: \"menu\",\n            },\n            (el) => {\n                el.addEventListener(\"click\", () => {\n                    _gui_settings__WEBPACK_IMPORTED_MODULE_1__[\"toggleSettings\"].call(this);\n                });\n            }\n        )\n    };\n}\n\n\n//# sourceURL=webpack://MultitrackJS/./src/internal/gui/buttons.js?");

/***/ }),

/***/ "./src/internal/gui/gestures.js":
/*!**************************************!*\
  !*** ./src/internal/gui/gestures.js ***!
  \**************************************/
/*! exports provided: gestures */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"gestures\", function() { return gestures; });\n/* harmony import */ var _gui_settings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../gui/settings */ \"./src/internal/gui/settings.js\");\n/* harmony import */ var _gui_buttons__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../gui/buttons */ \"./src/internal/gui/buttons.js\");\n\n\n\nfunction gestures() {\n    this._.moveEvents = [];\n    document.addEventListener(\"mousemove\", (event) => {\n        for (let func of this._.moveEvents) {\n            func.move(event);\n        }\n    });\n    document.addEventListener(\"mouseup\", (event) => {\n        for (let func of this._.moveEvents) {\n            func.release(event);\n        }\n        this._.moveEvents = [];\n    });\n    document.addEventListener(\n        \"touchmove\",\n        (event) => {\n            for (let func of this._.moveEvents) {\n                func.move(event.touches[0]);\n            }\n        },\n        false\n    );\n    document.addEventListener(\n        \"touchend\",\n        (event) => {\n            for (let func of this._.moveEvents) {\n                func.release(event.changedTouches[0]);\n            }\n            this._.moveEvents = [];\n        },\n        false\n    );\n    this._.form.overlays._root.addEventListener(\n        \"dblclick\",\n        (event) => {\n            if (event.target === this._.form.overlays._root) {\n                _gui_buttons__WEBPACK_IMPORTED_MODULE_1__[\"toggleFullscreen\"].call(this);\n            }\n        },\n        false\n    );\n    this._.element.addEventListener(\n        \"contextmenu\",\n        (event) => {\n            event.preventDefault();\n            _gui_settings__WEBPACK_IMPORTED_MODULE_0__[\"toggleSettings\"].call(this);\n            return false;\n        },\n        false\n    );\n}\n\n\n//# sourceURL=webpack://MultitrackJS/./src/internal/gui/gestures.js?");

/***/ }),

/***/ "./src/internal/gui/hotkeys.js":
/*!*************************************!*\
  !*** ./src/internal/gui/hotkeys.js ***!
  \*************************************/
/*! exports provided: hotkeys */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"hotkeys\", function() { return hotkeys; });\n/* harmony import */ var _volume__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../volume */ \"./src/internal/volume.js\");\n\n\nfunction hotkeys() {\n    document.addEventListener(\"keydown\", (event) => {\n        switch (event.code) {\n            case \"Space\":\n                event.preventDefault();\n            case \"KeyK\":\n                this.playing ? this.pause() : this.play();\n                break;\n            case \"ArrowLeft\":\n                event.preventDefault();\n                this.rewind(-5);\n                break;\n            case \"ArrowRight\":\n                event.preventDefault();\n                this.rewind(5);\n                break;\n            case \"KeyJ\":\n                this.rewind(-10);\n                break;\n            case \"KeyL\":\n                this.rewind(10);\n                break;\n            case \"KeyM\":\n                this.mute(false);\n                break;\n            case \"ArrowUp\":\n                event.preventDefault();\n                if (this._.form.audio.volume)\n                    this._.form.audio.lastVolume = this._.form.audio.volume;\n                _volume__WEBPACK_IMPORTED_MODULE_0__[\"setVolume\"].call(this, this._.form.audio.volume + 0.05);\n                break;\n            case \"ArrowDown\":\n                event.preventDefault();\n                if (this._.form.audio.volume)\n                    this._.form.audio.lastVolume = this._.form.audio.volume;\n                _volume__WEBPACK_IMPORTED_MODULE_0__[\"setVolume\"].call(this, this._.form.audio.volume - 0.05);\n                break;\n            case \"KeyF\":\n                toggleFullscreen.call(this);\n                break;\n            case \"Digit0\":\n            case \"Numpad0\":\n                this.setTime(this.duration * 0);\n                break;\n            case \"Digit1\":\n            case \"Numpad1\":\n                this.setTime(this.duration * 0.1);\n                break;\n            case \"Digit2\":\n            case \"Numpad2\":\n                this.setTime(this.duration * 0.2);\n                break;\n            case \"Digit3\":\n            case \"Numpad3\":\n                this.setTime(this.duration * 0.3);\n                break;\n            case \"Digit4\":\n            case \"Numpad4\":\n                this.setTime(this.duration * 0.4);\n                break;\n            case \"Digit5\":\n            case \"Numpad5\":\n                this.setTime(this.duration * 0.5);\n                break;\n            case \"Digit6\":\n            case \"Numpad6\":\n                this.setTime(this.duration * 0.6);\n                break;\n            case \"Digit7\":\n            case \"Numpad7\":\n                this.setTime(this.duration * 0.7);\n                break;\n            case \"Digit8\":\n            case \"Numpad8\":\n                this.setTime(this.duration * 0.8);\n                break;\n            case \"Digit9\":\n            case \"Numpad9\":\n                this.setTime(this.duration * 0.9);\n                break;\n        }\n    });\n}\n\n\n//# sourceURL=webpack://MultitrackJS/./src/internal/gui/hotkeys.js?");

/***/ }),

/***/ "./src/internal/gui/overlay.js":
/*!*************************************!*\
  !*** ./src/internal/gui/overlay.js ***!
  \*************************************/
/*! exports provided: generateOverlay */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"generateOverlay\", function() { return generateOverlay; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/internal/utils.js\");\n\n\nfunction generateOverlay() {\n    let GUItimeout;\n    this._.element.addEventListener(\"mousemove\", () => {\n        this._.form.overlays._root.removeAttribute(\"style\");\n        clearTimeout(GUItimeout);\n        GUItimeout = setTimeout(() => {\n            this._.form.overlays._root.setAttribute(\n                \"style\",\n                \"opacity: 0; cursor: none;\"\n            );\n        }, 3000);\n    });\n    this._.element.addEventListener(\"mouseout\", () => {\n        clearTimeout(GUItimeout);\n        this._.form.overlays._root.setAttribute(\"style\", \"opacity: 0;\");\n    });\n\n    this._.form.overlays = {\n        _root: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n            \"div\", {\n                name: \"overlay\",\n            },\n            (el) => {}\n        ),\n        bottom: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\", {\n            name: \"overlay-bottom\",\n        }),\n        top: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\", {\n            name: \"overlay-top\",\n        }),\n    };\n\n    this._.form.overlays.top.appendChild(this._.form.title);\n\n    this._.form.overlays.bottom.appendChild(this._.form.buttons.play);\n    this._.form.overlays.bottom.appendChild(this._.form.buttons.backward10);\n    this._.form.overlays.bottom.appendChild(this._.form.buttons.forward10);\n    this._.form.overlays.bottom.appendChild(this._.form.buttons.volume);\n    this._.form.overlays.bottom.appendChild(this._.form.volumebar._root);\n    this._.form.overlays.bottom.appendChild(this._.form.time);\n    this._.form.overlays.bottom.appendChild(\n        Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\", {\n            style: \"flex: auto\",\n        })\n    );\n    if (\n        \"pictureInPictureEnabled\" in document &&\n        !(navigator.userAgent.search(/YaBrowser/) > 0)\n    ) {\n        this._.form.overlays.bottom.appendChild(this._.form.buttons.pip);\n    }\n    this._.form.overlays.bottom.appendChild(this._.form.buttons.menu);\n    this._.form.overlays.bottom.appendChild(this._.form.buttons.fullscreen);\n\n    this._.form.overlays._root.appendChild(this._.form.overlays.top);\n    this._.form.overlays._root.appendChild(this._.form.overlays.bottom);\n    this._.form.overlays._root.appendChild(this._.form.progressbar._root);\n    this._.form.overlays._root.addEventListener(\"click\", (event) => {\n        if (event.target == this._.form.overlays._root) {\n            this.playing ? this.pause() : this.play();\n        }\n    });\n}\n\n//# sourceURL=webpack://MultitrackJS/./src/internal/gui/overlay.js?");

/***/ }),

/***/ "./src/internal/gui/progressbar.js":
/*!*****************************************!*\
  !*** ./src/internal/gui/progressbar.js ***!
  \*****************************************/
/*! exports provided: generateProgressbar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"generateProgressbar\", function() { return generateProgressbar; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/internal/utils.js\");\n\n\nfunction generateProgressbar() {\n    this._.form.progressbar = {\n        line: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\", {\n            name: \"progress-line\",\n        }),\n        loaded: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n            \"canvas\",\n            {\n                name: \"progress-loaded\",\n                height: 1,\n            },\n            (el) => {\n                el._canvas = el.getContext(\"2d\");\n            }\n        ),\n        played: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\", {\n            name: \"progress-played\",\n        }),\n        popup: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n            \"div\",\n            {\n                name: \"timeline-popup\",\n                style: \"display: none\",\n            },\n            (el) => {\n                el.text = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\", {\n                    name: \"timeline-popup-time\",\n                });\n                el.image = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\", {\n                    name: \"timeline-popup-image\",\n                });\n            }\n        ),\n        _root: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n            \"div\",\n            {\n                name: \"progress-all\",\n            },\n            (el) => {\n                let updatePopup = (cursorX, position) => {\n                    // Обновление всплывающего пузырька\n                    this._.form.progressbar.popup.text.innerText = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"secondsToTime\"])(\n                        this.duration * position\n                    );\n                    if (this._.form.progressbar.popup.clientWidth != 0) {\n                        this._.form.progressbar.popup.halfWidth =\n                            this._.form.progressbar.popup.clientWidth / 2;\n                    }\n                    if (cursorX < this._.form.progressbar.popup.halfWidth) {\n                        this._.form.progressbar.popup.setAttribute(\n                            \"style\",\n                            `left: 0px`\n                        );\n                    } else if (\n                        cursorX <\n                        el.clientWidth - this._.form.progressbar.popup.halfWidth\n                    ) {\n                        this._.form.progressbar.popup.setAttribute(\n                            \"style\",\n                            `left: ${\n                                cursorX -\n                                this._.form.progressbar.popup.halfWidth\n                            }px`\n                        );\n                    } else {\n                        this._.form.progressbar.popup.setAttribute(\n                            \"style\",\n                            `left: ${\n                                el.clientWidth -\n                                this._.form.progressbar.popup.halfWidth * 2\n                            }px`\n                        );\n                    }\n                    // Отображение нужного тайла на экран\n                    if (this._.parameters.frames.image) {\n                        var framesAll =\n                            this._.parameters.frames.x *\n                            this._.parameters.frames.y;\n                        var frame = Math.floor(position * framesAll);\n                        if (frame >= framesAll) frame = framesAll - 1;\n                        var offsetX =\n                            (frame % this._.parameters.frames.x) /\n                            (this._.parameters.frames.x - 1);\n                        var offsetY =\n                            Math.floor(frame / this._.parameters.frames.x) /\n                            (this._.parameters.frames.y - 1);\n                        this._.form.progressbar.popup.image.setAttribute(\n                            \"style\",\n                            `\n                            background-position: ${offsetX * 100}% ${\n                                offsetY * 100\n                            }%;\n                            background-size: ${\n                                this._.parameters.frames.x * 100\n                            }%;\n                            background-image: url(${\n                                this._.parameters.frames.image\n                            })`\n                        );\n                    } else {\n                        this._.form.progressbar.popup.image.setAttribute(\n                            \"style\",\n                            \"display: none\"\n                        );\n                    }\n                };\n\n                let move = (event) => {\n                    // Получение координаты и вычисление позиции (от 0 до 1)\n                    var cursor = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getPosInElement\"])(el, event);\n                    var position = cursor.x / el.clientWidth;\n                    if (position < 0) position = 0;\n                    if (position > 1) position = 1;\n                    // Обновление ширины текущей позиции\n                    if (this._.form.progressbar.updateStyle) {\n                        this._.form.progressbar.played.setAttribute(\n                            \"style\",\n                            `width: ${100 * position}%`\n                        );\n                    }\n                    updatePopup(cursor.x, position);\n                };\n                let release = (event) => {\n                    this._.form.progressbar.updateStyle = false;\n                    this._.form.progressbar.popup.setAttribute(\n                        \"style\",\n                        \"display: none\"\n                    );\n                    this.setTime(\n                        (this.duration * Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getPosInElement\"])(el, event).x) /\n                            el.clientWidth\n                    );\n                };\n                el.addEventListener(\"mousedown\", (event) => {\n                    this._.form.progressbar.updateStyle = true;\n                    Object(this._.moveEvents).push({\n                        move: move,\n                        release: release,\n                    });\n                });\n                el.addEventListener(\"touchstart\", (event) => {\n                    this._.form.progressbar.updateStyle = true;\n                    Object(this._.moveEvents).push({\n                        move: move,\n                        release: release,\n                    });\n                });\n\n                el.addEventListener(\"mousemove\", (event) => {\n                    var cursor = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getPosInElement\"])(el, event);\n                    var position = cursor.x / el.clientWidth;\n                    if (position < 0) position = 0;\n                    if (position > 1) position = 1;\n                    if (this._.form.progressbar.updateStyle || cursor.y > 0) {\n                        updatePopup(cursor.x, position);\n                    } else {\n                        this._.form.progressbar.popup.setAttribute(\n                            \"style\",\n                            \"display: none\"\n                        );\n                    }\n                });\n                el.addEventListener(\"mouseout\", (event) => {\n                    this._.form.progressbar.popup.setAttribute(\n                        \"style\",\n                        \"display: none\"\n                    );\n                });\n            }\n        ),\n    };\n    this._.form.progressbar.popup.appendChild(\n        this._.form.progressbar.popup.image\n    );\n    this._.form.progressbar.popup.appendChild(\n        this._.form.progressbar.popup.text\n    );\n\n    this._.form.progressbar._root.appendChild(this._.form.progressbar.popup);\n    this._.form.progressbar._root.appendChild(this._.form.progressbar.line);\n    this._.form.progressbar._root.appendChild(this._.form.progressbar.loaded);\n    this._.form.progressbar._root.appendChild(this._.form.progressbar.played);\n}\n\n\n//# sourceURL=webpack://MultitrackJS/./src/internal/gui/progressbar.js?");

/***/ }),

/***/ "./src/internal/gui/settings.js":
/*!**************************************!*\
  !*** ./src/internal/gui/settings.js ***!
  \**************************************/
/*! exports provided: toggleSettings, generateSettings */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"toggleSettings\", function() { return toggleSettings; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"generateSettings\", function() { return generateSettings; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/internal/utils.js\");\n/* harmony import */ var _trackSwitcher__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../trackSwitcher */ \"./src/internal/trackSwitcher.js\");\n\n\n\nfunction resetMenu() {\n    this._.form.settings.title.innerText = \"Настройки\";\n    for(let el in this._.form.settings.menu){\n        this._.form.settings.menu[el].content.setAttribute(\"style\", \"display: none\");\n    }\n    this._.form.settings.menuSwitcher._root.removeAttribute(\"style\");\n};\n\nfunction toggleSettings() {\n    if (!this._.form.settings.opened) {\n        resetMenu.call(this)\n        this._.form.settings._root.setAttribute(\"style\", \"display: block\");\n    } else {\n        this._.form.settings._root.removeAttribute(\"style\");\n    }\n    this._.form.settings.opened = !this._.form.settings.opened;\n}\n\nfunction generateSettings() {\n    this._.form.settings = {\n        opened: false,\n        menu: {\n            quality: {\n                titlename: \"Качество\",\n                content: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\"),\n            },\n            dubs: {\n                titlename: \"Озвучки\",\n                content: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\"),\n            },\n            subtitles: {\n                titlename: \"Субтитры\",\n                content: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\"),\n            },\n            info: {\n                titlename: \"Информация о плеере\",\n                content: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\",\n                    {\n                        blockName: \"info\",\n                    },\n                    (el) => {\n                        el.innerHTML +=\n                            '<a href=\"https://forms.gle/gTrxarVsZoof3CyW6\" target=\"_blank\" style=\"color: #ffccff; font-size: 24px\">Баг-репорт</a> (перед отправкой проверьте ссылку ниже, возможно этот баг уже известен!)';\n                        let authorBlock = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n                            \"div\",\n                            {\n                                style: \"display: flex; padding: 12px 0px\",\n                            },\n                            (bl) => {\n                                bl.appendChild(\n                                    Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"img\", {\n                                        src:\n                                            \"https://avatars2.githubusercontent.com/u/26777464?s=96\",\n                                        width: 48,\n                                        height: 48,\n                                    })\n                                );\n                                bl.appendChild(\n                                    Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n                                        \"div\",\n                                        {\n                                            style:\n                                                \"line-height: 20px; padding: 4px 8px\",\n                                        },\n                                        (inf) => {\n                                            inf.innerHTML +=\n                                                'Исходный код плеера:<br><a href=\"https://github.com/Ponywka/Multitrack.JS\" style=\"color: #ffccff\">Ponywka/Multitrack.JS</a>';\n                                            inf.innerHTML +=\n                                                \"<!--| Да, Somepony, ты дождался его! |-->\";\n                                        }\n                                    )\n                                );\n                            }\n                        );\n                        el.appendChild(authorBlock);\n                    }\n                ),\n            },\n        },\n        title: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\", {\n            name: \"title\",\n        }),\n        header: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\", {\n            name: \"settingsHeader\",\n        }),\n        body: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\", {\n            name: \"settingsBody\",\n        }),\n        menuSwitcher: {\n            _root: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\")\n        },\n        _root: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\", {\n            name: \"settings\"\n        })\n    };\n\n    this._.form.settings.body.appendChild(\n        this._.form.settings.menuSwitcher._root\n    );\n\n    for (let el in this._.form.settings.menu) {\n        this._.form.settings.body.appendChild(\n            this._.form.settings.menu[el].content\n        );\n        this._.form.settings.menuSwitcher[`btn${el}`] = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n            \"div\",\n            {\n                name: \"listEl\",\n                page: el,\n            },\n            (btn) => {\n                btn.innerText = this._.form.settings.menu[el].titlename;\n\n                btn.onclick = (event) => {\n                    resetMenu.call(this);\n                    this._.form.settings.title.innerText = this._.form.settings.menu[el].titlename;\n                    this._.form.settings.menu[el].content.removeAttribute(\n                        \"style\"\n                    );\n                    this._.form.settings.menuSwitcher._root.setAttribute('style', 'display: none;')\n                };\n            }\n        );\n        this._.form.settings.menuSwitcher._root.appendChild(\n            this._.form.settings.menuSwitcher[`btn${el}`]\n        );\n    }\n\n    resetMenu.call(this);\n\n    for (let el of this._.videos) {\n        let btn = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n            \"div\",\n            {\n                name: \"listEl\",\n                link: el.path,\n            },\n            (btn) => {\n                btn.innerText = el.name;\n                btn.onclick = (event) => {\n                    for (let el1 of this._.form.settings.menu.quality.content.querySelectorAll(\"*\")) el1.removeAttribute(\"selected\");\n                    btn.setAttribute(\"selected\", \"true\");\n                    _trackSwitcher__WEBPACK_IMPORTED_MODULE_1__[\"setVideo\"].call(this, el.path);\n                };\n            }\n        );\n        this._.form.settings.menu.quality.content.appendChild(btn);\n    }\n\n    for (let el of this._.audios) {\n        let btn = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n            \"div\",\n            {\n                name: \"listEl\",\n                link: el.path,\n            },\n            (btn) => {\n                btn.innerText = el.name;\n                btn.onclick = (event) => {\n                    for (let el1 of this._.form.settings.menu.dubs.content.querySelectorAll(\"*\")) el1.removeAttribute(\"selected\");\n                    btn.setAttribute(\"selected\", \"true\");\n                    _trackSwitcher__WEBPACK_IMPORTED_MODULE_1__[\"setAudio\"].call(this, el.path);\n                };\n            }\n        );\n        this._.form.settings.menu.dubs.content.appendChild(btn);\n    }\n\n    let noSubtitles = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n        \"div\",\n        {\n            name: \"listEl\"\n        },\n        (btn) => {\n            btn.innerText = \"Отключено\";\n            btn.onclick = (event) => {\n                for (let el1 of this._.form.settings.menu.subtitles.content.querySelectorAll(\"*\")) el1.removeAttribute(\"selected\");\n                btn.setAttribute(\"selected\", \"true\");\n                _trackSwitcher__WEBPACK_IMPORTED_MODULE_1__[\"setSubtitles\"].call(this);\n            };\n        }\n    );\n    this._.form.settings.menu.subtitles.content.appendChild(noSubtitles);\n    noSubtitles.click();\n\n    for (let el of this._.subtitles) {\n        let btn = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n            \"div\",\n            {\n                name: \"listEl\",\n                link: el.path,\n            },\n            (btn) => {\n                btn.innerText = el.name;\n                btn.onclick = (event) => {\n                    for (let el1 of this._.form.settings.menu.subtitles.content.querySelectorAll(\"*\")) el1.removeAttribute(\"selected\");\n                    btn.setAttribute(\"selected\", \"true\");\n                    _trackSwitcher__WEBPACK_IMPORTED_MODULE_1__[\"setSubtitles\"].call(this, el.path);\n                };\n            }\n        );\n        this._.form.settings.menu.subtitles.content.appendChild(btn);\n    }\n\n    this._.form.settings.header.appendChild(this._.form.settings.title);\n    this._.form.settings._root.appendChild(this._.form.settings.header);\n    this._.form.settings._root.appendChild(this._.form.settings.body);\n}\n\n\n//# sourceURL=webpack://MultitrackJS/./src/internal/gui/settings.js?");

/***/ }),

/***/ "./src/internal/gui/video.js":
/*!***********************************!*\
  !*** ./src/internal/gui/video.js ***!
  \***********************************/
/*! exports provided: generateVideo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"generateVideo\", function() { return generateVideo; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/internal/utils.js\");\n/* harmony import */ var _playback__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../playback */ \"./src/internal/playback.js\");\n\n\n\nfunction generateVideo() {\n    this._.form.video = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"video\", {}, (el) => {\n        // Обработка событий плей/пауза\n        el._onplaying = () => {\n            _playback__WEBPACK_IMPORTED_MODULE_1__[\"changePlaying\"].call(this, true);\n        };\n        el.onplaying = el._onplaying;\n        el._onpause = (event) => {\n            if (el === document.pictureInPictureElement || this._.pageFocused) {\n                _playback__WEBPACK_IMPORTED_MODULE_1__[\"changePlaying\"].call(this, false);\n            }\n        };\n        el.onpause = el._onpause;\n        // Обработка событий загрузки\n        el.onwaiting = () => {\n            _playback__WEBPACK_IMPORTED_MODULE_1__[\"changeIsWaitingVideo\"].call(this, true);\n        };\n        el.oncanplay = () => {\n            _playback__WEBPACK_IMPORTED_MODULE_1__[\"changeIsWaitingVideo\"].call(this, false);\n        };\n        el.onloadedmetadata = () => {\n            this.duration = el.duration;\n            this._.form.time.innerText = `${Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"secondsToTime\"])(\n                this._.form.audio.currentTime\n            )} / ${Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"secondsToTime\"])(this.duration)}`;\n        };\n        el.onprogress = () => {\n            var element = this._.form.progressbar.loaded;\n            var canvas = this._.form.progressbar.loaded._canvas;\n            element.width = element.clientWidth;\n            canvas.fillStyle = \"white\";\n            canvas.clearRect(0, 0, element.width, 1);\n            for (let i = 0; i < el.buffered.length; i++) {\n                var startX =\n                    (el.buffered.start(i) * element.width) / this.duration;\n                var endX = (el.buffered.end(i) * element.width) / this.duration;\n                var width = endX - startX;\n                canvas.fillRect(Math.floor(startX), 0, Math.floor(width), 1);\n            }\n        };\n    });\n}\n\n\n//# sourceURL=webpack://MultitrackJS/./src/internal/gui/video.js?");

/***/ }),

/***/ "./src/internal/gui/volume.js":
/*!************************************!*\
  !*** ./src/internal/gui/volume.js ***!
  \************************************/
/*! exports provided: generateVolume */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"generateVolume\", function() { return generateVolume; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/internal/utils.js\");\n/* harmony import */ var _volume__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../volume */ \"./src/internal/volume.js\");\n\n\n\nfunction generateVolume() {\n    (this._.form.buttons.volume = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n        \"button\",\n        {\n            name: \"volume\",\n            icon: 3,\n        },\n        (el) => {\n            el.addEventListener(\"click\", () => {\n                _volume__WEBPACK_IMPORTED_MODULE_1__[\"mute\"].call(this, false);\n            });\n        }\n    )),\n        (this._.form.volumebar = {\n            line: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\", {\n                name: \"volumebar-line\",\n            }),\n            selected: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\"div\", {\n                name: \"volumebar-selected\",\n            }),\n            _root: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"])(\n                \"div\",\n                {\n                    name: \"volumebar-all\",\n                },\n                (el) => {\n                    let release = (event) => {\n                        this._.form.volumebar.updateStyle = false;\n                        // Получение координаты и вычисление позиции (от 0 до 1)\n                        var cursorX = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getPosInElement\"])(el, event).x;\n                        var position =\n                            Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getPosInElement\"])(el, event).x / el.clientWidth;\n                        _volume__WEBPACK_IMPORTED_MODULE_1__[\"setVolume\"].call(this, position);\n                    };\n                    let move = (event) => {\n                        if (this._.form.volumebar.updateStyle) {\n                            // Получение координаты и вычисление позиции (от 0 до 1)\n                            var cursorX = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getPosInElement\"])(el, event).x;\n                            var position = cursorX / el.clientWidth;\n                            _volume__WEBPACK_IMPORTED_MODULE_1__[\"setVolume\"].call(this, position);\n                        }\n                    };\n                    el.addEventListener(\"mousedown\", () => {\n                        this._.form.volumebar.updateStyle = true;\n                        this._.form.audio.lastVolume = this._.form.audio.volume;\n                        Object(this._.moveEvents).push({\n                            move: move,\n                            release: release,\n                        });\n                    });\n                    el.addEventListener(\"touchstart\", () => {\n                        this._.form.volumebar.updateStyle = true;\n                        this._.form.audio.lastVolume = this._.form.audio.volume;\n                        Object(this._.moveEvents).push({\n                            move: move,\n                            release: release,\n                        });\n                    });\n                }\n            ),\n        });\n    this._.form.volumebar._root.appendChild(this._.form.volumebar.line);\n    this._.form.volumebar._root.appendChild(this._.form.volumebar.selected);\n}\n\n\n//# sourceURL=webpack://MultitrackJS/./src/internal/gui/volume.js?");

/***/ }),

/***/ "./src/internal/gui/windowFocus.js":
/*!*****************************************!*\
  !*** ./src/internal/gui/windowFocus.js ***!
  \*****************************************/
/*! exports provided: windowFocus */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"windowFocus\", function() { return windowFocus; });\n/* harmony import */ var _playback__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../playback */ \"./src/internal/playback.js\");\n\n\nfunction windowFocus() {\n    this._.pageFocused = true;\n    window.addEventListener(\"focus\", () => {\n        this._.pageFocused = true;\n        if (this.playing) _playback__WEBPACK_IMPORTED_MODULE_0__[\"changePlaying\"].call(this, true);\n    });\n    window.addEventListener(\"blur\", () => {\n        this._.pageFocused = false;\n    });\n}\n\n\n//# sourceURL=webpack://MultitrackJS/./src/internal/gui/windowFocus.js?");

/***/ }),

/***/ "./src/internal/init.js":
/*!******************************!*\
  !*** ./src/internal/init.js ***!
  \******************************/
/*! exports provided: init */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"init\", function() { return init; });\n/* harmony import */ var _gui_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./gui.js */ \"./src/internal/gui.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"./src/internal/utils.js\");\n\n\n\nfunction init(selector, dataArray) {\n    this._ = {\n        name: \"Multitrack.JS\",\n        parameters: {\n            frames: {\n                x: 10,\n                y: 10,\n            },\n        },\n        subtitlesDownloader: null,\n        videos: dataArray.videos,\n        audios: dataArray.audios,\n        subtitles: dataArray.subtitles,\n    };\n    this.playing = false;\n\n    if ((this._.element = document.querySelector(selector))) {\n        this._.element.setAttribute(\"application-name\", \"multitrack-js\");\n        _gui_js__WEBPACK_IMPORTED_MODULE_0__[\"gui\"].call(this);\n\n        if (dataArray.placeholder)\n            this._.form.video.poster = dataArray.placeholder;\n        if (dataArray.preview)\n            this._.parameters.frames.image = dataArray.preview;\n        this._.form.title.innerText = dataArray.title;\n        // Полузаметная синхронизация дорожек\n        // ТРЕБУЕТСЯ ПЕРЕПИСАТЬ\n        let video = this._.form.video;\n        let audio = this._.form.audio;\n\n        function _invisibleSync() {\n            let diff = audio.currentTime - video.currentTime;\n            let mdiff = Math.abs(diff);\n            if (this.playing && mdiff > 1 / 60) {\n                if (mdiff < 3) {\n                    var scale = mdiff + 1;\n                    if (diff > 0) {\n                        this._.form.video.playbackRate = scale;\n                        setTimeout(() => {\n                            this._.form.video.playbackRate = 1;\n                            _invisibleSync.call(this);\n                        }, 1000);\n                    } else {\n                        this._.form.video.playbackRate = 1 / scale;\n                        setTimeout(() => {\n                            this._.form.video.playbackRate = 1;\n                            _invisibleSync.call(this);\n                        }, scale * 1000);\n                    }\n                } else {\n                    this._.form.video.currentTime = this._.form.audio.currentTime;\n                    _invisibleSync.call(this);\n                }\n            } else {\n                setTimeout(() => {\n                    _invisibleSync.call(this);\n                }, 1000);\n            }\n        }\n        _invisibleSync.call(this);\n    } else _utils_js__WEBPACK_IMPORTED_MODULE_1__[\"logError\"].call(this, `Can not find \"${selector}\" element!`);\n}\n\n\n//# sourceURL=webpack://MultitrackJS/./src/internal/init.js?");

/***/ }),

/***/ "./src/internal/playback.js":
/*!**********************************!*\
  !*** ./src/internal/playback.js ***!
  \**********************************/
/*! exports provided: servicePlayingVideo, servicePlayingAudio, changeIsWaitingVideo, changeIsWaitingAudio, changePlaying, play, pause, rewind, setTime */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"servicePlayingVideo\", function() { return servicePlayingVideo; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"servicePlayingAudio\", function() { return servicePlayingAudio; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"changeIsWaitingVideo\", function() { return changeIsWaitingVideo; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"changeIsWaitingAudio\", function() { return changeIsWaitingAudio; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"changePlaying\", function() { return changePlaying; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"play\", function() { return play; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"pause\", function() { return pause; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rewind\", function() { return rewind; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setTime\", function() { return setTime; });\nfunction servicePlayingVideo(val) {\n    if (val) {\n        this._.form.video.onplaying = null;\n        this._.form.video.play().then(() => {\n            this._.form.video.onplaying = this._.form.video._onplaying;\n        });\n    } else {\n        this._.form.video.onpause = null;\n        this._.form.video.pause();\n        setTimeout(() => {\n            this._.form.video.onpause = this._.form.video._onpause;\n        }, 16);\n    }\n}\n\nfunction servicePlayingAudio(val) {\n    if (val) {\n        this._.form.audio.onplaying = null;\n        this._.form.audio.play().then(() => {\n            this._.form.audio.onplaying = this._.form.audio._onplaying;\n        });\n    } else {\n        this._.form.audio.onpause = null;\n        this._.form.audio.pause();\n        setTimeout(() => {\n            this._.form.audio.onpause = this._.form.audio._onpause;\n        }, 16);\n    }\n}\n\nfunction changeIsWaitingVideo(val) {\n    if (val) {\n        servicePlayingAudio.call(this, false);\n    } else if (this.playing) {\n        servicePlayingAudio.call(this, true);\n    }\n    this._.form.video._isWaiting = val;\n}\n\nfunction changeIsWaitingAudio(val) {\n    if (val) {\n        servicePlayingVideo.call(this, false);\n    } else if (this.playing) {\n        servicePlayingVideo.call(this, true);\n    }\n    this._.form.audio._isWaiting = val;\n}\n\nfunction changePlaying(val) {\n    if (val) {\n        if (!this._.form.audio._isWaiting) servicePlayingVideo.call(this, true);\n        if (!this._.form.video._isWaiting) servicePlayingAudio.call(this, true);\n        this._.form.buttons.play.setAttribute(\"name\", \"pauseBtn\");\n    } else {\n        servicePlayingVideo.call(this, false);\n        servicePlayingAudio.call(this, false);\n        this._.form.buttons.play.setAttribute(\"name\", \"playBtn\");\n    }\n    this.playing = val;\n}\n\nfunction play() {\n    changePlaying.call(this, true);\n}\n\nfunction pause() {\n    changePlaying.call(this, false);\n}\n\nfunction rewind(val) {\n    val += this._.form.audio.currentTime;\n    if (val < 0) val = 0;\n    this._.form.video.currentTime = val;\n    this._.form.audio.currentTime = val;\n}\n\nfunction setTime(val) {\n    val = Math.floor(val);\n    this._.form.video.currentTime = val;\n    this._.form.audio.currentTime = val;\n}\n\n\n//# sourceURL=webpack://MultitrackJS/./src/internal/playback.js?");

/***/ }),

/***/ "./src/internal/trackSwitcher.js":
/*!***************************************!*\
  !*** ./src/internal/trackSwitcher.js ***!
  \***************************************/
/*! exports provided: setVideo, setAudio, setSubtitles */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setVideo\", function() { return setVideo; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setAudio\", function() { return setAudio; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setSubtitles\", function() { return setSubtitles; });\n/* harmony import */ var _playback__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./playback */ \"./src/internal/playback.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/internal/utils.js\");\n\n\n\n\n// Надо ждать, пока загрузится страница, а иначе - ошибка\nlet ASS;\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    ASS = __webpack_require__(/*! assjs */ \"./node_modules/assjs/dist/ass.esm.js\").default;\n});\n\nfunction setVideo(link) {\n    _playback__WEBPACK_IMPORTED_MODULE_0__[\"servicePlayingVideo\"].call(this, false);\n    _playback__WEBPACK_IMPORTED_MODULE_0__[\"changeIsWaitingVideo\"].call(this, true);\n    this._.form.video.src = link;\n    this._.form.video.currentTime = this._.form.audio.currentTime;\n    if (this.playing) _playback__WEBPACK_IMPORTED_MODULE_0__[\"servicePlayingVideo\"].call(this, true);\n}\n\nfunction setAudio(link) {\n    let time = this._.form.audio.currentTime;\n    _playback__WEBPACK_IMPORTED_MODULE_0__[\"servicePlayingAudio\"].call(this, false);\n    _playback__WEBPACK_IMPORTED_MODULE_0__[\"changeIsWaitingAudio\"].call(this, true);\n    this._.form.audio.src = link;\n    this._.form.audio.currentTime = time;\n    if (this.playing) _playback__WEBPACK_IMPORTED_MODULE_0__[\"servicePlayingAudio\"].call(this, true);\n}\n\nfunction setSubtitles(url) {\n    clearTimeout(this._.subtitlesDownloader);\n    if (this._.ass !== undefined) {\n        this._.ass.destroy();\n        this._.ass = undefined;\n    }\n    if (url) {\n        this._.subtitlesDownloader = setTimeout(() => {\n            var xhr = new XMLHttpRequest();\n            xhr.open(\"GET\", url, false);\n            xhr.send();\n            if (xhr.status == 200) {\n                try {\n                    this._.ass = new ASS(xhr.responseText, this._.form.video, {\n                        container: this._.form.subtitles,\n                    });\n                    this.resize();\n                } catch (e) {\n                    _utils__WEBPACK_IMPORTED_MODULE_1__[\"logError\"].call(this, \"Can't use ASS library\");\n                }\n            }\n        });\n    }\n}\n\n\n//# sourceURL=webpack://MultitrackJS/./src/internal/trackSwitcher.js?");

/***/ }),

/***/ "./src/internal/utils.js":
/*!*******************************!*\
  !*** ./src/internal/utils.js ***!
  \*******************************/
/*! exports provided: getPosInElement, logError, secondsToTime, createElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getPosInElement\", function() { return getPosInElement; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"logError\", function() { return logError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"secondsToTime\", function() { return secondsToTime; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createElement\", function() { return createElement; });\nfunction getPosInElement(element, event) {\n    return {\n        x: event.clientX - element.getBoundingClientRect().x,\n        y: event.clientY - element.getBoundingClientRect().y,\n    };\n}\n\nfunction logError(text) {\n    console.error(`${this._.name} | ${text}`);\n}\n\nfunction secondsToTime(sec) {\n    sec = Math.floor(sec);\n    let seconds = sec % 60;\n    let minutes = Math.floor(sec / 60) % 60;\n    let hours = Math.floor(sec / 3600);\n    return hours > 0\n        ? `${hours}:${minutes\n              .toString()\n              .padStart(2, \"0\")}:${seconds.toString().padStart(2, \"0\")}`\n        : `${minutes.toString().padStart(2, \"0\")}:${seconds\n              .toString()\n              .padStart(2, \"0\")}`;\n}\n\nfunction createElement(tag, params = {}, actions = () => {}) {\n    var el = document.createElement(tag);\n    for (var name in params) el.setAttribute(name, params[name]);\n    actions(el);\n    return el;\n}\n\n\n//# sourceURL=webpack://MultitrackJS/./src/internal/utils.js?");

/***/ }),

/***/ "./src/internal/volume.js":
/*!********************************!*\
  !*** ./src/internal/volume.js ***!
  \********************************/
/*! exports provided: setVolume, mute */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setVolume\", function() { return setVolume; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"mute\", function() { return mute; });\nfunction setVolume(val) {\n    if (val < 0) val = 0;\n    if (val > 1) val = 1;\n    this._.form.buttons.volume.setAttribute(\"icon\", Math.ceil(val * 3));\n    this._.form.volumebar.selected.setAttribute(\n        \"style\",\n        `width: ${100 * val}%`\n    );\n    this._.form.audio.volume = val;\n}\n\nfunction mute(val = true) {\n    if (this._.form.audio.volume != 0) {\n        this._.form.audio.lastVolume = this._.form.audio.volume;\n        setVolume.call(this, 0);\n    } else if (!val) {\n        setVolume.call(this, this._.form.audio.lastVolume);\n    }\n}\n\n\n//# sourceURL=webpack://MultitrackJS/./src/internal/volume.js?");

/***/ }),

/***/ "./src/multitrack.js":
/*!***************************!*\
  !*** ./src/multitrack.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _style_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./style.scss */ \"./src/style.scss\");\n/* harmony import */ var _style_scss__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_style_scss__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _internal_init__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./internal/init */ \"./src/internal/init.js\");\n/* harmony import */ var _internal_playback__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./internal/playback */ \"./src/internal/playback.js\");\n\n\n\n//import { ASS } from 'assjs'\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (class {\n    constructor(selector, dataArray) {\n        _internal_init__WEBPACK_IMPORTED_MODULE_1__[\"init\"].call(this, selector, dataArray);\n        return this;\n    }\n\n    play() {\n        _internal_playback__WEBPACK_IMPORTED_MODULE_2__[\"play\"].call(this);\n    }\n\n    pause() {\n        _internal_playback__WEBPACK_IMPORTED_MODULE_2__[\"pause\"].call(this);\n    }\n\n    rewind(val) {\n        _internal_playback__WEBPACK_IMPORTED_MODULE_2__[\"rewind\"].call(this, val);\n    }\n\n    setTime(val) {\n        _internal_playback__WEBPACK_IMPORTED_MODULE_2__[\"setTime\"].call(this, val);\n    }\n\n    mute(val) {\n        mute.call(this, val);\n    }\n\n    resize() {\n        if (this._.ass !== undefined) this._.ass.resize();\n    }\n});\n\n\n//# sourceURL=webpack://MultitrackJS/./src/multitrack.js?");

/***/ }),

/***/ "./src/style.scss":
/*!************************!*\
  !*** ./src/style.scss ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var api = __webpack_require__(/*! ../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./style.scss */ \"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/style.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n//# sourceURL=webpack://MultitrackJS/./src/style.scss?");

/***/ })

/******/ });